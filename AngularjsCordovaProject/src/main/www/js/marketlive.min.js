!function(a){"use strict";var b=a.module("pointOfSaleApplication",["pascalprecht.translate","ngRoute","ngSignaturePad","ngTouch","ngIOS9UIWebViewPatch"]);b.config(["$logProvider",function(a){a.debugEnabled(!0)}]),b.factory("authHttpResponseInterceptor",["$q","$injector","$location","dataStorageService","redirectBridgeService",function(a,b,c,d,e){return{response:function(a){return a},responseError:function(c){if(401===c.status&&c.data.error&&"invalid_token"===c.data.error){var f=a.defer(),g=b.get("securityService").refreshToken();return g.then(function(a){d.setAccessToken(a.data.access_token),d.setRefreshToken(a.data.refresh_token),c.config.headers.Authorization="Bearer "+d.getAccessToken(),b.get("$http")(c.config).then(function(a){f.resolve(a)},function(a){f.reject(a)})},function(a){console.log("Refresh token request failed so navigate to login screen. "+a),f.reject(),e.goTo("/home")}),f.promise}return a.reject(c)}}}]),b.factory("applicationResourceLoader",["$q",function(b){return function(){var c={},d={"msg.ppos.application.title":"MarketLive Point of Sale","msg.ppos.provisioning.header":"Point of Sale Application Provisioning","lbl.ppos.provisioning.serverUrl":"Server URL","lbl.ppos.provisioning.storeCode":"Store Code","msg.ppos.provisioning.enterServerUrl":"Enter server URL","msg.ppos.provisioning.enterStoreCode":"Enter store code","err.ppos.provisioning.urlBase.required":"Server URL is required.","err.ppos.provisioning.storeCode.required":"Store code is required.","btn.ppos.provisioning.submit":"Submit","msg.ppos.provisioning.changeStore":"Change Store","lbl.ppos.login.username":"Username","lbl.ppos.login.password":"Password","msg.ppos.login.enterUsername":"Enter username","msg.ppos.login.enterPassword":"Enter password","err.ppos.login.username.required":"Username is required.","err.ppos.login.password.required":"Password is required.","err.ppos.login.invalidUsernamePassword":"Invalid username/password!","btn.ppos.login.loginButton":"Login"},e=b.defer();if(sessionStorage.getItem("resources")){var f=JSON.parse(sessionStorage.getItem("resources"));a.extend(c,d,f),e.resolve(c)}else a.extend(c,d),e.resolve(c);return e.promise}}]),b.config(["$translateProvider","$routeProvider","$httpProvider",function(a,b,c){a.useSanitizeValueStrategy(null),a.useLoader("applicationResourceLoader"),a.preferredLanguage("en_us"),a.fallbackLanguage("en_us"),b.when("/provisioning",{templateUrl:"views/provisioning/Provisioning.html",controller:"provisioningController"}).when("/home",{templateUrl:"views/home/Home.html",controller:"homeController"}).when("/dashboard",{templateUrl:"views/dashboard/Dashboard.html",controller:"dashboardController"}).when("/csrList",{templateUrl:"views/csr/CSRList.html",controller:"csrListController"}).when("/csrAdd",{templateUrl:"views/csr/CSRAdd.html",controller:"csrController"}).when("/csrEdit",{templateUrl:"views/csr/CSREdit.html",controller:"csrEditController"}).when("/productSearchResult",{templateUrl:"views/search/ProductSearchResult.html"}).when("/inStorePickupOrderShipments",{templateUrl:"views/instorepickup/InStorePickupOrderShipments.html",controller:"inStorePickupOrderShipmentsController",access:{requiresLogin:!0,requiredPermissions:["INSTORE_PICKUP"]}}).when("/pickupNewOrderShipments",{templateUrl:"views/instorepickup/PickupNewOrderShipments.html",controller:"inStorePickupOrderShipmentsController",access:{requiresLogin:!0,requiredPermissions:["INSTORE_PICKUP"]}}).when("/pickupInProcessOrderShipments",{templateUrl:"views/instorepickup/PickupInProcessOrderShipments.html",controller:"inStorePickupOrderShipmentsController",access:{requiresLogin:!0,requiredPermissions:["INSTORE_PICKUP"]}}).when("/pickupReadyOrderShipments",{templateUrl:"views/instorepickup/PickupReadyOrderShipments.html",controller:"inStorePickupOrderShipmentsController",access:{requiresLogin:!0,requiredPermissions:["INSTORE_PICKUP"]}}).when("/pickupDoneOrderShipments",{templateUrl:"views/instorepickup/PickupDoneOrderShipments.html",controller:"inStorePickupOrderShipmentsController",access:{requiresLogin:!0,requiredPermissions:["INSTORE_PICKUP"]}}).when("/orderDetail",{templateUrl:"views/order/OrderDetail.html",controller:"orderDetailController"}).when("/productDetail",{templateUrl:"views/product/ProductDetail.html",controller:"productDetailController"}).when("/basket",{templateUrl:"views/basket/Basket.html"}).when("/csrChangePassword",{templateUrl:"views/csr/CSRChangePassword.html",controller:"changePasswordController"}).when("/csrChangePin",{templateUrl:"views/csr/CSRChangePIN.html",controller:"changePinController"}).when("/management",{templateUrl:"views/management/Management.html",controller:"managementController"}).when("/posSettings",{templateUrl:"views/settings/POSSettings.html",controller:"posSettingsController"}).when("/unlockScreen",{templateUrl:"views/login/UnlockScreen.html"}).otherwise({redirectTo:"/provisioning"}),c.interceptors.push("authHttpResponseInterceptor")}]),b.run(["$log","$rootScope","dataStorageService","securityService",function(a,b,c,d){b.$on("$routeChangeStart",function(b,e){if(e.access)if(e.access.requiresLogin){if(c.isLoggedIn()){var f=e.access.requiredPermissions,g=d.authorize(c.getLoggedInCSR(),f);g||(a.warn("Not Permitted"),b.preventDefault())}}else a.warn("Not Logged In!")})}])}(window.angular),function(){"use strict";var a={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){window.StatusBar.hide()},receivedDeviceReadyEvent:function(a){var b=document.getElementById(a),c=b.querySelector(".listening"),d=b.querySelector(".received");c.setAttribute("style","display:none;"),d.setAttribute("style","display:block;"),console.log("Received deviceready Event: "+a)}};a.initialize()}(),function(a){"use strict";a.module("pointOfSaleApplication").controller("addCouponCodeModalController",["$scope","$location","$route","$translate","dataStorageService","basketService",function(b,c,d,e,f,g){b.addCouponCodeDataModel={couponCode:null,showAddCouponCodeError:!1,addCouponCodeErrorMessage:null},b.clearAddCouponCodeData=function(){b.addCouponCodeDataModel.couponCode=null,b.addCouponCodeDataModel.showAddCouponCodeError=!1,b.addCouponCodeDataModel.addCouponCodeErrorMessage=null},b.closeAddCouponCodeModal=function(){a.element("#addCouponCodeModal").modal("hide"),b.clearAddCouponCodeData()},b.addCouponCode=function(){b.addCouponCodeDataModel.couponCode?g.addSourceCode(f.getBasketId(),b.addCouponCodeDataModel.couponCode).then(function(c){c&&(b.clearAddCouponCodeData(),a.element("#addCouponCodeModal").modal("hide"),b.$emit("reloadBasket"))},function(c){"422"===c.data.responseCode&&(b.addCouponCodeDataModel.showAddCouponCodeError=!0,b.addCouponCodeDataModel.addCouponCodeErrorMessage="The coupon code you have entered is not valid. Please check the code you have entered and try again.",a.element("#couponCode").focus())}):(b.addCouponCodeDataModel.showAddCouponCodeError=!0,b.addCouponCodeDataModel.addCouponCodeErrorMessage="Please enter coupon code.",a.element("#couponCode").focus())}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("applicationController",["$scope","$location","$timeout","dataStorageService","redirectBridgeService","starPrinter","$translate",function(b,c,d,e,f,g,h){b.applicationModel={toggleValue:!1,isCSRLoggedIn:!1,csrFirstName:"",csrLastName:"",isScreenLocked:!1,csrUserName:""},b.initializeApplicationModel=function(){b.applicationModel.toggleValue=!1,b.applicationModel.isCSRLoggedIn=e.isLoggedIn(),b.applicationModel.isScreenLocked=e.isScreenLocked(),e.getLoggedInCSR()?b.applicationModel.csrFirstName=e.getLoggedInCSR().firstName:b.applicationModel.csrFirstName="",e.getLoggedInCSR()?b.applicationModel.csrLastName=e.getLoggedInCSR().lastName:b.applicationModel.csrLastName="",b.applicationModel.csrUserName=b.processCsrUserName()},b.processCsrUserName=function(){var a=b.applicationModel.csrFirstName+" "+b.applicationModel.csrLastName;return a.length>=12&&(a=a.substring(0,12)+"...",a=a.trim()),a},b.$on("login",function(){b.applicationModel.isCSRLoggedIn=!0,b.applicationModel.isScreenLocked=!1,b.applicationModel.csrFirstName=e.getLoggedInCSR().firstName,b.applicationModel.csrLastName=e.getLoggedInCSR().lastName,b.applicationModel.csrUserName=b.processCsrUserName(),b.initPrinter()}),b.$on("logout",function(){b.applicationModel.isCSRLoggedIn=!1}),b.$on("screenLocked",function(){b.applicationModel.isScreenLocked=!0}),b.$on("screenUnlocked",function(){b.applicationModel.isScreenLocked=!1}),b.$on("redirectTo",function(a,b){d(function(){c.path(b.path)},1)}),b.openDashboardPage=function(){e.isScreenLocked()||(e.isLoggedIn()?c.path("/dashboard"):f.goTo("/home"))},b.lockScreen=function(){e.setScreenLocked("true"),b.$emit("screenLocked"),c.path("/unlockScreen")},b.openBasketPage=function(){e.getBasketId()?c.path("/basket"):a.element("#noShoppingBagModal").modal("show")},b.openCSRChangePasswordPage=function(){c.path("/csrChangePassword")},b.openCSRChangePINPage=function(){c.path("/csrChangePin")},b.openManagementPage=function(){c.path("/management")},b.toggleOverlay=function(){return b.applicationModel.toggleValue?b.applicationModel.toggleValue=!1:b.applicationModel.toggleValue=!0,b.applicationModel.toggleValue},b.hideOverlay=function(){b.applicationModel.toggleValue=!1},b.pollForNameSpace=function(){void 0===window.ppos&&d(b.initPrinter,500)},b.initPrinter=function(){void 0!==window.ppos?g.getDeviceName().then(function(a){"NoDevice"===a?(e.setPrinterConnected(!1),h("lbl.ppos.noDevice").then(function(a){e.setStarMicronicsPrinterName(a)})):(e.setStarMicronicsPrinterName(a),e.setPrinterConnected(!0))},function(){e.setPrinterConnected(!1),h("lbl.ppos.noDevice").then(function(a){e.setStarMicronicsPrinterName(a)})}):b.pollForNameSpace()},b.initializeApplicationModel()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("basketController",["$scope","$location","$route","dataStorageService","basketService","accountService","scanBarcodeService","$log","$q","productCatalogService",function(b,c,d,e,f,g,h,i,j,k){function l(a,b,c){var d={basketItemID:a.id,productID:a.product.id,skuID:a.skuID,qty:a.qty,storeID:c,shipToContactID:b};return d}b.barcodeService=h,b.customerInformation=null,b.basketDetailDataModel=null,b.currentStore=e.getStore(),b.basketId=e.getBasketId(),b.storeId=e.getStoreId(),b.loggedInCSR=e.getLoggedInCSR(),b.skuBarcodeSearchPostData={basketId:b.basketId||null,csrId:b.loggedInCSR.id||null,storeId:b.storeId||null},b.$on("reloadBasket",function(){b.initializeCustomerDetail(e.getCustomerId()),b.initializeBasketDetailDataModel(e.getBasketId())}),b.initializeBasketDetailDataModel=function(c){sessionStorage.showShippingModal=!1,c&&f.getBasketById(c).then(function(c){b.basketDetailDataModel=c,b.basketDetailDataModel.isAutoSaveBag=f.isAutoSaveBag();var d=[],g=[];a.forEach(b.basketDetailDataModel.data.shipments,function(c){a.forEach(c.items,function(a){if(a.isPickupFromStore===!0)d.push(b.isSkuAvailableOnline(a.skuID));else{sessionStorage.showShippingModal=!0;var c=e.getStoreId();g.push(b.isSkuAvailableAtStore(a.skuID,c))}})}),j.all(d).then(function(c){a.forEach(c,function(c){a.forEach(b.basketDetailDataModel.data.shipments,function(b){a.forEach(b.items,function(a){a.isPickupFromStore===!0&&c.data.sku===a.skuID&&(a.isAvailableInStore=!0,c.data.qtyAvailable>=a.qty?a.isAvailableOnline=!0:a.isAvailableOnline=!1)})})})}),j.all(g).then(function(c){a.forEach(c,function(c){a.forEach(b.basketDetailDataModel.data.shipments,function(b){a.forEach(b.items,function(a){a.isPickupFromStore===!1&&c.data.sku===a.skuID&&(a.isAvailableOnline=!0,c.data.qtyAvailable>=a.qty?a.isAvailableInStore=!0:a.isAvailableInStore=!1)})})})})},function(a){console.log(a)})},b.isSkuAvailableOnline=function(a){return k.getInventory(a,null)},b.isSkuAvailableAtStore=function(a,b){return k.getInventory(a,b)},b.initializeCustomerDetail=function(a){a&&g.getCustomerById(a).then(function(a){var c=a.data;"Guest"===c.primaryContact.person.firstName&&"Guest"===c.primaryContact.person.lastName?b.customerInformation="Guest":b.customerInformation=c.primaryContact.person.firstName+" "+c.primaryContact.person.lastName},function(a){console.log(a)})},b.updateBasketItem=function(a,c,d,e,g,h){var i=null;null!==h&&(i=h.id);var j={basketItems:[{basketItemID:c,productID:d,skuID:e,qty:g,storeID:i}]};a&&c&&(0===g?b.removeItemFromBasket(a,c):f.updateBasketItems(a,j).then(function(c){c&&b.initializeBasketDetailDataModel(a)},function(a){console.log(a)}))},b.removeItemFromBasket=function(a,c){a&&c&&f.removeItemFromBasket(a,c).then(function(c){c&&b.initializeBasketDetailDataModel(a)},function(a){console.log(a)})},b.removeSourceCode=function(a,c){a&&c&&f.removeSourceCode(a,c).then(function(c){c&&b.initializeBasketDetailDataModel(a)},function(a){console.log(a)})},b.saveBag=function(c){f.saveBag(c,e.getLoggedInCSR().id).then(function(d){d&&(b.initializeBasketDetailDataModel(c),a.element("#saveBagSuccessModal").modal("show"))},function(a){console.log(a)})},b.setItemAsShipTo=function(a,c){c.isPickupFromStore&&g.getCustomerById(e.getCustomerId()).then(function(d){if(d.data.primaryContact.id){var g=l(c,d.data.primaryContact.id,null),h={basketItems:[g]};f.updateBasketItems(a,h).then(function(a){i.info(a),b.initializeBasketDetailDataModel(e.getBasketId())},function(a){i.error(a)})}},function(a){i.error(a)})},b.setItemAsPickup=function(a,c){if(!c.isPickupFromStore){var d=l(c,null,e.getStoreId()),g={basketItems:[d]};f.updateBasketItems(a,g).then(function(a){i.info(a),b.initializeBasketDetailDataModel(e.getBasketId())},function(a){i.error(a)})}},b.scanSuccessHandler=function(){var c=a.element(".ml-ppos-basket-detail-container .ml-ppos-scroll-container"),d=c.find("div:first");b.reinitializeBasketDetailDataModel(),c.animate({scrollTop:d.height()},"slow")},b.viewProductDetail=function(a){c.url("/productDetail?productId="+a+"&fromProductSearch=false")},b.reinitializeBasketDetailDataModel=function(){b.initializeBasketDetailDataModel(e.getBasketId())},b.initializeBasketDetailDataModel(e.getBasketId()),b.initializeCustomerDetail(e.getCustomerId())}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("csrController",["$scope","csrService","$location","$translate","dataStorageService","csrValidationService",function(b,c,d,e,f,g){b.storeAssociateRoleCode="Store Associates",b.storeManagerRoleCode="Store Manager",b.csr={employeeId:null,firstName:null,lastName:null,email:null,password:null,confirmPassword:null,unlockPosPin:null,roleType:null,selectedRole:"",activeStatus:null,pin1:null,pin2:null,pin3:null,pin4:null,pin5:null,pin6:null,showCsrOpFailureMessage:!1,csrOpFailureMessage:null},b.init=function(){c.getCSRTypes().then(function(a){2!==a.data.length&&e("sel.ppos.selectRole").then(function(b){var c={id:"",code:b};a.data.splice(0,0,c)}),b.csr.roleType=a.data,2===b.csr.roleType.length?(b.csr.selectedRole=c.getStoreAssociateRoleName(b.csr.roleType,b.storeAssociateRoleCode),c.populateCSRTypeDetails(b.csr.selectedRole)):c.populateCSRTypeDetails("")},function(a){console.log("ErrorResult - An error occurred while getting CSRType list : "+a)}),b.csr.activeStatus="false",b.csr.pin1="0",b.csr.pin2="0",b.csr.pin3="0",b.csr.pin4="0",b.csr.pin5="0",b.csr.pin6="0"},b.addCSR=function(d){$("input").blur(),$("select").blur();var e=g.validateCSR(d,"add");if(e){for(var h="",i=0;i<b.csr.roleType.length;i++)if(b.csr.roleType[i].id.toString()===d.selectedRole.toString()){h=b.csr.roleType[i].code;break}var j=null,k=null;d.activeStatus===!0||"true"===d.activeStatus?j=(new Date).getTime():k=(new Date).getTime();var l=[];l.push(f.getStoreId());var m={firstName:d.firstName,lastName:d.lastName,status:d.activeStatus,employeeID:d.employeeId,email:d.email,password:d.password,pin:d.unlockPosPin,codeCSRType:h,dateActivate:j,dateDeactivate:k,stores:l};c.createCSR(m).then(function(e){console.log("CSR added "+e),c.clearCSR(b.storeAssociateRoleCode,b.storeManagerRoleCode,d),g.showMessageAndFocus("msg.ppos.userAdded",b.csr),a.element("#divMsgIconContainer").hasClass("ml-icon-error")&&(a.element("#divMsgIconContainer").removeClass("ml-icon-error"),a.element("#divMsgIconContainer").addClass("ml-icon-success"))},function(a){var c="",d="",e=a.data.errorMessage;if("422"===a.data.responseCode||"409"===a.data.responseCode){for(var f in e)""!==e[f]&&(d=e[f].toString().trim(),c+=d.lastIndexOf(".")===d.length-1?d+" ":d+". ");g.showMessageAndFocus(c,b.csr)}else console.log("ErrorResult - An error occurred while adding CSR : "+a),g.showMessageAndFocus("msg.ppos.userNotAdded",b.csr)})}},b.moveOnNext=function(a,d,e){c.moveOnNext(a,d,e,b.csr)},b.goToManagementScreen=function(){c.goToManagementScreen()},b.clearContent=function(a){c.clearContent(a,b.csr)},b.clearPIN=function(a){c.clearPIN(a,b.csr)},b.populateCSRTypeDetails=function(a){c.populateCSRTypeDetails(a)},b.setStatus=function(a){b.csr.activeStatus=a},b.showHidePermission=function(){c.showHidePermission()},b.cancel=function(){window.history.back()},b.$watch(function(){return b.csr.pin1+b.csr.pin2+b.csr.pin3+b.csr.pin4+b.csr.pin5+b.csr.pin6},function(a){b.csr.unlockPosPin=a}),b.init(),a.element("#employeeId").focus()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("csrEditController",["$scope","csrService","$location","$translate","csrValidationService","dataStorageService",function(b,c,d,e,f,g){b.storeAssociateRoleCode="Store Associates",b.storeManagerRoleCode="Store Manager",b.csr={csrId:null,employeeId:null,firstName:null,lastName:null,email:null,password:null,confirmPassword:null,unlockPosPin:null,roleType:null,selectedRole:"",activeStatus:null,typePPOS:null,typePPOSId:null,showCsrOpFailureMessage:!1,csrOpFailureMessage:null},b.init=function(){b.csr.activeStatus="false",b.csrId=JSON.parse(sessionStorage.lastEditCsrId),c.getCSRById(b.csrId).then(function(d){var f=d.data.pin;b.csr.employeeId=d.data.employeeID,b.csr.firstName=d.data.firstName,b.csr.lastName=d.data.lastName,b.csr.email=d.data.email,b.csr.activeStatus=d.data.active,b.csr.unlockPosPin=f,b.csr.typePPOS=d.data.typePPOS,d.data.active&&!a.element("#lblActive").hasClass("active")&&(a.element("#lblInactive").toggleClass("active"),a.element("#lblActive").toggleClass("active")),c.getCSRTypes().then(function(a){b.csr.roleType=a.data,b.csr.selectedRole=c.getStoreAssociateRoleName(b.csr.roleType,b.csr.typePPOS),b.populateCSRTypeDetails(b.csr.selectedRole),2!==a.data.length?e("sel.ppos.selectRole").then(function(b){var c={id:"",code:b};a.data.splice(0,0,c)}):b.populateCSRTypeDetails("")},function(a){console.log("ErrorResult - An error occurred while getting CSRType list : "+a)})},function(a){console.log("ErrorResult - An error occurred while getting CSR : "+a)})},b.updateCSR=function(d){$("input").blur(),$("select").blur();var e=f.validateCSR(d,"edit");if(e){for(var h="",i=0;i<b.csr.roleType.length;i++)if(b.csr.roleType[i].id.toString()===d.selectedRole.toString()){h=b.csr.roleType[i].code;break}var j=null,k=null;d.activeStatus===!0||"true"===d.activeStatus?j=(new Date).getTime():k=(new Date).getTime();var l=[];l.push(g.getStoreId());var m={firstName:d.firstName,lastName:d.lastName,status:d.activeStatus,employeeID:d.employeeId,email:d.email,pin:d.unlockPosPin,codeCSRType:h,dateActivate:j,dateDeactivate:k,stores:l};c.updateCSR(b.csrId,m).then(function(c){console.log("CSR updated "+c),f.showMessageAndFocus("msg.ppos.userUpdated",b.csr),b.init(),a.element("#divMsgIconContainer").hasClass("ml-icon-error")&&(a.element("#divMsgIconContainer").removeClass("ml-icon-error"),a.element("#divMsgIconContainer").addClass("ml-icon-success"))},function(a){var c="",d="",e=a.data.errorMessage;if("422"===a.data.responseCode||"409"===a.data.responseCode){for(var g in e)""!==e[g]&&(d=e[g].toString().trim(),c+=d.lastIndexOf(".")===d.length-1?d+" ":d+". ");f.showMessageAndFocus(c,b.csr)}else console.log("ErrorResult - An error occurred while adding CSR : "+a),f.showMessageAndFocus("msg.ppos.userNotUpdated",b.csr)})}},b.populateCSRTypeDetails=function(a){c.populateCSRTypeDetails(a)},b.goToCsrListScreen=function(){c.goToCsrListScreen()},b.goToManagementScreen=function(){c.goToManagementScreen()},b.showHidePermission=function(){c.showHidePermission()},b.moveOnNext=function(a,d,e){c.moveOnNext(a,d,e,b.csr)},b.clearContent=function(a){c.clearContent(a,b.csr)},b.clearPIN=function(a){c.clearPIN(a,b.csr)},b.$watch(function(){return b.csr.pin1+b.csr.pin2+b.csr.pin3+b.csr.pin4+b.csr.pin5+b.csr.pin6},function(a){b.csr.unlockPosPin=a}),b.setStatus=function(a){b.csr.activeStatus=a},b.init(),a.element("#employeeId").focus()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("csrListController",["$log","$scope","$location","csrService","dataStorageService",function(b,c,d,e,f){c.csrListDataModel={userData:null,csrDeleteId:null,csrDeleteUser:null,csrListType:null},c.init=function(){c.getAllCSRs()},c.getAllCSRs=function(){c.csrListDataModel.csrListType="ALL",e.getAllCSRs().then(function(a){c.csrListDataModel.userData="",c.csrListDataModel.userData=a.data},function(a){b.error(a)})},c.getActiveCSRs=function(){c.csrListDataModel.csrListType="ACTIVE",e.getActiveCSRs().then(function(a){c.csrListDataModel.userData=a.data},function(a){b.error(a)})},c.getInActiveCSRs=function(){c.csrListDataModel.csrListType="INACTIVE",e.getInActiveCSRs().then(function(a){c.csrListDataModel.userData=a.data},function(a){b.error(a)})},c.goToManagementScreen=function(){d.path("/management")},c.goToCsrAddScreen=function(){d.path("/csrAdd")},c.goToCsrEditScreen=function(a){sessionStorage.lastEditCsrId=a,d.path("/csrEdit")},c.deleteUser=function(b,d){c.csrListDataModel.csrDeleteId=b,c.csrListDataModel.csrDeleteUser=d,a.element("#csrDeleteConfirmationModal").modal("show")},c.closeDelConfirmModal=function(){a.element("#csrDeleteConfirmationModal").modal("hide")},c.deleteCsrUser=function(){a.element("#csrDeleteConfirmationModal").modal("hide"),e.deleteCSR(c.csrListDataModel.csrDeleteId).then(function(a){console.log("CSR deleted : "+a),c.init()},function(a){b.error(a)})},c.isActive=function(a,b){var c=!1;return"true"===a&&"showActive"===b?!0:"false"===a&&"showInactive"===b?!0:c},c.showDelete=function(a,b){return"true"===a||"Admin"===b?!1:!0},c.showEdit=function(a){return"Admin"===a?!1:!0},c.showUserRow=function(a){var b=f.getLoggedInCSR().typePPOS;return"Admin"===a&&"Admin"!==b?!1:!0},c.init()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("changePinController",["$scope","$location","dataStorageService","csrService","$translate","$log",function(b,c,d,e,f,g){function h(){b.changePinModel.currentPin=null,b.changePinModel.newPin=null,b.changePinModel.confirmPin=null}function i(a){return void 0===a.currentPin?(j("msg.ppos.invalidCurrentAccessPIN"),!1):void 0===a.newPin?(j("msg.ppos.invalidNewAccessPIN"),!1):void 0===a.confirmPin?(j("msg.ppos.invalidConfirmAccessPIN"),!1):a.currentPin?a.newPin?a.confirmPin?b.isNumber(a.currentPin)&&6===a.currentPin.length?b.isNumber(a.newPin)&&6===a.newPin.length?b.isNumber(a.confirmPin)&&6===a.confirmPin.length?a.newPin!==a.confirmPin?(j("msg.ppos.pinNotMatch"),!1):a.currentPin===a.newPin?(j("msg.ppos.currentNewPinSame"),!1):a.csrJsonBeforeSave&&a.csrJsonBeforeSave.pin&&a.csrJsonBeforeSave.pin!==a.currentPin?(j("msg.ppos.currentPinNoMatch"),!1):!0:(j("msg.ppos.invalidConfirmAccessPIN"),!1):(j("msg.ppos.invalidNewAccessPIN"),!1):(j("msg.ppos.invalidCurrentAccessPIN"),!1):(k("lbl.ppos.confirmAccessPin"),!1):(k("lbl.ppos.newAccessPin"),!1):(k("lbl.ppos.currentAccessPin"),!1)}function j(c){a.element("#divMsgIconContainer").hasClass("ml-icon-success")&&(a.element("#divMsgIconContainer").removeClass("ml-icon-success"),a.element("#divMsgIconContainer").addClass("ml-icon-error")),f(c).then(function(c){b.changePinModel.showMessage=!0,b.changePinModel.message=c,a.element("#save").focus()})}function k(c){a.element("#divMsgIconContainer").hasClass("ml-icon-success")&&(a.element("#divMsgIconContainer").removeClass("ml-icon-success"),a.element("#divMsgIconContainer").addClass("ml-icon-error")),f(c).then(function(c){f("msg.ppos.isRequiredField",{fieldName:c}).then(function(c){b.changePinModel.showMessage=!0,b.changePinModel.message=c,a.element("#save").focus()})})}b.init=function(){var a=d.getLoggedInCSR();a&&a.email&&e.getCSRByEmail(a.email).then(function(a){b.changePinModel.csrJsonBeforeSave=a.data,d.setLoggedInCSR(a.data)},function(a){b.changePinModel.csrJsonBeforeSave=null,g.error("ErrorResult - An error occurred while getting CSR : "+a)})},b.changePinModel={csrJsonBeforeSave:null,currentPin:null,newPin:null,confirmPin:null,showMessage:!1,message:null,inputType:"text"},b.changePIN=function(c){if(null!==c.csrJsonBeforeSave){var f=i(c);if(f){var k=[];k.push(d.getStoreId());var l={firstName:c.csrJsonBeforeSave.firstName,lastName:c.csrJsonBeforeSave.lastName,status:c.csrJsonBeforeSave.active,employeeID:c.csrJsonBeforeSave.employeeID,email:c.csrJsonBeforeSave.email,pin:c.newPin,stores:k,codeCSRType:c.csrJsonBeforeSave.typePPOS};e.updateCSR(c.csrJsonBeforeSave.id,l).then(function(c){g.info("CSR Modified "+c),h(),j("msg.ppos.pinChanged"),a.element("#divMsgIconContainer").hasClass("ml-icon-error")&&(a.element("#divMsgIconContainer").removeClass("ml-icon-error"),a.element("#divMsgIconContainer").addClass("ml-icon-success")),b.init()},function(a){g.error("ErrorResult - An error occurred while changing CSR PIN: "+a),j("msg.ppos.pinNotChanged","currentPin")})}}else g.error("ErrorResult - An error occurred while changing CSR PIN"),j("msg.ppos.pinNotChanged","currentPin")},b.showHidePin=function(a){"text"===a?b.changePinModel.inputType="text":"masked"===a&&(b.changePinModel.inputType="password")},b.openDashboardPage=function(){c.path("/dashboard")},b.isNumber=function(a,b){return null==b||b.match(/^[0-9]+$/)?!0:!1},b.init(),a.element("#currentPin").focus()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("changePasswordController",["$scope","$location","dataStorageService","csrService","$translate",function(b,c,d,e,f){function g(){b.changePasswordModel={currentPassword:null,newPassword:null,confirmPassword:null,showChangePasswordFailureMessage:!1}}function h(a){return a.currentPassword?a.newPassword?a.confirmPassword?i(a.currentPassword)?i(a.newPassword)?i(a.confirmPassword)?a.newPassword!==a.confirmPassword?(j("msg.ppos.passwordNotMatch","newPassword"),!1):a.currentPassword===a.newPassword?(j("msg.ppos.currentNewPasswordSame","newPassword"),!1):!0:(j("msg.ppos.invalidPassword","confirmPassword"),!1):(j("msg.ppos.invalidPassword","newPassword"),!1):(j("msg.ppos.invalidPassword","currentPassword"),!1):(k("lbl.ppos.reEnterPassword","confirmPassword"),!1):(k("lbl.ppos.newPassword","newPassword"),!1):(k("lbl.ppos.password","currentPassword"),!1)}function i(a){return a.length<7||a.length>50?!1:a.match(/(([0-9]+[a-zA-Z]+)|([a-zA-Z]+[0-9]+))([a-zA-Z0-9]*)/)?!0:!1}function j(c,d){a.element("#divMsgIconContainer").hasClass("ml-icon-success")&&(a.element("#divMsgIconContainer").removeClass("ml-icon-success"),a.element("#divMsgIconContainer").addClass("ml-icon-error")),f(c).then(function(c){b.changePasswordModel.showChangePasswordFailureMessage=!0,b.changePasswordModel.changePasswordFailureMessage=c,a.element("#"+d).focus()})}function k(c,d){a.element("#divMsgIconContainer").hasClass("ml-icon-success")&&(a.element("#divMsgIconContainer").removeClass("ml-icon-success"),a.element("#divMsgIconContainer").addClass("ml-icon-error")),f(c).then(function(c){f("msg.ppos.isRequiredField",{fieldName:c}).then(function(c){b.changePasswordModel.showChangePasswordFailureMessage=!0,b.changePasswordModel.changePasswordFailureMessage=c,a.element("#"+d).focus()})})}b.changePasswordModel={currentPassword:null,newPassword:null,confirmPassword:null,showChangePasswordFailureMessage:!1,changePasswordFailureMessage:null,inputType:"text"},b.changePassword=function(b){var c=h(b);if(c){var f=d.getLoggedInCSR(),i=f.id,k={passwordOld:b.currentPassword,passwordNew:b.newPassword,passwordNewConfirm:b.confirmPassword};e.updateCSRPassword(i,k).then(function(b){console.log(b),j("msg.ppos.passwordChanged",""),g(),a.element("#currentPassword").focus(),a.element("#divMsgIconContainer").hasClass("ml-icon-error")&&(a.element("#divMsgIconContainer").removeClass("ml-icon-error"),a.element("#divMsgIconContainer").addClass("ml-icon-success"))},function(a){var b=a.data.error.error,c=a.data.errorMessage.CSR;"422"===a.data.responseCode?void 0!==c&&c.includes("password confirmation")>0?j("msg.ppos.passwordNotMatch","newPassword"):void 0!==c&&c.includes("password incorrect.")>0?j("msg.ppos.currentPasswordMismatch","currentPassword"):void 0!==c&&c.includes("same as old password")>0?j("msg.ppos.currentNewPasswordSame","newPassword"):void 0!==b&&b.includes("missing input data")>0&&j("msg.ppos.invalidPassword","currentPassword"):(j("msg.ppos.csrPasswordChangeError","currentPassword"),console.log("ErrorResult - An error occurred while changing password : "+a))})}},b.showHidePassword=function(a){"text"===a?b.changePasswordModel.inputType="text":"masked"===a&&(b.changePasswordModel.inputType="password")},b.openDashboardPage=function(){c.path("/dashboard")},a.element("#currentPassword").focus()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("customerProfileInformationController",["$log","$scope","$location","$q","dataStorageService","accountService","appService","customerSearchService","$translate","globalValidationService","newOrderService",function(b,c,d,e,f,g,h,i,j,k,l){function m(a){for(var b=0;b<a.data.length;b++)if(c.customerID===a.data[b].id){a.data.splice(b,1);break}}function n(a){"update"===c.fromPage?c.updateCustomer(a):"dashboard"===c.fromPage&&c.saveCustomer(a)}function o(a){var d=e.defer();return c.initSecurityQuestions().then(function(e){b.info("Security questions loaded "+e),g.getCustomerById(a).then(function(a){if(c.customerID=a.data.id,c.customerDO.accountSet=a.data.accountSet,a.data.primaryContact.id){if(c.primaryContact=a.data.primaryContact.id,c.customerDO.hintAnswer=a.data.hintAnswer,null!==a.data.hintQuestion)for(var e=0;e<c.customerDO.securityQuestions.length;e++)if(c.customerDO.securityQuestions[e].question===a.data.hintQuestion){c.customerDO.hint=c.customerDO.securityQuestions[e].id;break}g.getContactById(a.data.primaryContact.id).then(function(a){a.data.guest||(c.customerDO.phoneNumber=a.data.phone1,c.customerDO.firstName=a.data.person.firstName,c.customerDO.lastName=a.data.person.lastName,c.customerDO.email=a.data.email,c.customerDO.street1=a.data.address.street1,c.customerDO.city=a.data.address.city,c.customerDO.state=a.data.address.state,c.customerDO.country=a.data.address.country,c.customerDO.postalCode=a.data.address.postalCode),d.resolve(!0)},function(a){d.reject(!1),b.error("Error while getting contact information "+a)})}},function(a){d.reject(!1),b.error("Error while getting customer information "+a)})},function(a){d.reject(!1),b.info("Error while loading security questions "+a)}),d.promise}function p(a){var d=e.defer();return g.getCustomerById(a).then(function(a){c.customerID=a.data.id,c.customerDO.id=a.data.id,c.customerDO.accountSet=a.data.accountSet,a.data.primaryContact.id&&(c.primaryContact=a.data.primaryContact.id,g.getContactById(a.data.primaryContact.id).then(function(a){a.data.guest||(c.customerDO.street1=a.data.address.street1,c.customerDO.city=a.data.address.city,c.customerDO.state=a.data.address.state,c.customerDO.country=a.data.address.country,c.customerDO.postalCode=a.data.address.postalCode),d.resolve(!0)},function(a){d.reject(!1),b.error(a)}))},function(a){b.error(a)}),d.promise}function q(a){return c.customerDO.showOpFailureMessage=!1,c.customerDO.opFailureMessage="",a.phoneNumber?k.isValidPhoneNumber(a.phoneNumber)?a.firstName?a.lastName?void 0!==a.email&&a.email&&k.isEmailValid(a.email)?a.password?a.confirmPassword?a.password!==a.confirmPassword?(c.showMessageAndFocus("msg.ppos.passwordNotMatch"),
!1):k.isPasswordValid(a.password)?a.hint&&"-1"!==a.hint?a.hintAnswer?!0:(c.createEmptyFieldMsgAndDisplay("lbl.ppos.securityAnswer"),!1):(c.createEmptyFieldMsgAndDisplay("lbl.ppos.securityQuestion"),!1):(c.showMessageAndFocus("msg.ppos.invalidPassword"),!1):(c.createEmptyFieldMsgAndDisplay("lbl.ppos.reEnterPassword"),!1):(c.createEmptyFieldMsgAndDisplay("lbl.ppos.password"),!1):(c.showMessageAndFocus("msg.ppos.invalidEmail"),!1):(c.createEmptyFieldMsgAndDisplay("lbl.ppos.lastName"),!1):(c.createEmptyFieldMsgAndDisplay("lbl.ppos.firstName"),!1):(c.showMessageAndFocus("msg.ppos.invalidPhoneNumber"),!1):(c.createEmptyFieldMsgAndDisplay("lbl.ppos.phoneNumber"),!1)}function r(a){var b={phone1:a.phoneNumber,email:a.email,person:{firstName:a.firstName,lastName:a.lastName},address:{street1:c.customerDO.street1,city:c.customerDO.city,state:c.customerDO.state,country:c.customerDO.country,postalCode:c.customerDO.postalCode}};return b}function s(){c.customerDO.phoneNumber=null,c.customerDO.firstName=null,c.customerDO.lastName=null,c.customerDO.email=null,c.customerDO.password=null,c.customerDO.confirmPassword=null,c.customerDO.securityQuestions=[],c.customerDO.hint="-1",c.customerDO.hintAnswer=null,c.customerDO.showOpFailureMessage=!1,c.customerDO.opFailureMessage=null,c.primaryContact=null,c.customerID=null,c.customerSearchDataModel={customerPhoneNumber:null,existingPhoneCustomerResult:null},c.existingPhoneCustomerInformation=!0,c.existingEmailCustomerInformation=!0}function t(a){var b=a.lastIndexOf("/"),c=a.substring(b+1,a.length);return c}c.customerDO={id:"",accountSet:"",phoneNumber:"",firstName:"",lastName:"",email:"",userName:"",password:"",confirmPassword:"",securityQuestions:[],hint:"-1",hintAnswer:"",guest:!0,showOpFailureMessage:!1,opFailureMessage:null,street1:f.getStore().street1,city:f.getStore().city,state:f.getStore().country+"/"+f.getStore().state,country:f.getStore().country,postalCode:f.getStore().zipCode},c.fromPage="",c.customerSearchDataModel={customerPhoneNumber:null,customerEmail:null,existingPhoneCustomerResult:null,existingEmailCustomerResult:null},c.primaryContact="",c.customerID="",c.customerProfileInformationModal=function(b){c.customerFormDiv=!1,c.fromPage=b,"update"===c.fromPage?c.initCustomerProfileInformationModal().then(function(b){b&&a.element("#customerProfileInformation").modal("show")}):"dashboard"===c.fromPage&&(c.initCustomerProfileInformationModalNewCustomer(),a.element("#customerProfileInformation").modal("show"))},c.closeProfileInformationModal=function(){s(),$("input").blur(),$("select").blur(),a.element("#customerProfileInformation").modal("hide")},c.initCustomerProfileInformationModal=function(){return s(),f.getCustomerId()?o(f.getCustomerId()):void 0},c.initCustomerProfileInformationModalNewCustomer=function(){s(),c.initSecurityQuestions()},c.initSecurityQuestions=function(){var a=e.defer();return j("Select a recovery question").then(function(d){var e;e={id:"-1",question:d},c.customerDO.securityQuestions.push(e),g.getSecurityQuestions().then(function(b){for(var d=0;d<b.data.length;d++)e={id:b.data[d].id,question:b.data[d].question},c.customerDO.securityQuestions.push(e);a.resolve(b.data)},function(c){b.error(c),a.reject(c)})}),a.promise},c.saveOrUpdateCustomer=function(a){var d=q(a);d&&(h.activateSpinner(),c.customerSearchDataModel.customerPhoneNumber=a.phoneNumber,c.customerSearchDataModel.customerEmail=a.email,(""===a.firstName||"Guest"===a.firstName)&&(a.firstName=a.email),(""===a.lastName||"Guest"===a.lastName)&&(a.lastName=a.email),c.customerSearchDataModel.existingPhoneCustomerResult=null,c.customerSearchDataModel.existingEmailCustomerResult=null,c.existingPhoneCustomerInformation=!0,c.existingEmailCustomerInformation=!0,i.searchCustomerByEmail(a.email).then(function(b){m(b),b.data.length>0?(c.customerFormDiv=!0,c.customerSearchDataModel.existingEmailCustomerResult=b,c.customerSearchDataModel.existingEmail=a.email):n(a),h.deactivateSpinner()},function(d){b.error(d),i.searchCustomerByPhoneNumber(a.phoneNumber).then(function(b){m(b),b.data.length>0?(c.customerFormDiv=!0,c.customerSearchDataModel.existingPhoneCustomerResult=b,h.deactivateSpinner()):n(a)},function(c){b.error(c),n(a),h.deactivateSpinner()}),h.deactivateSpinner()}))},c.closeSearchModal=function(){c.customerSearchDataModel.existingEmailCustomerResult=null,c.customerSearchDataModel.existingPhoneCustomerResult=null,c.customerFormDiv=!1},c.createEmptyFieldMsgAndDisplay=function(b){j(b).then(function(b){j("msg.ppos.isRequiredField",{fieldName:b}).then(function(b){c.customerDO.showOpFailureMessage=!0,c.customerDO.opFailureMessage=b,a.element("#btnCloseCustomerProfileModal").focus()})})},c.showMessageAndFocus=function(b){j(b).then(function(b){c.customerDO.showOpFailureMessage=!0,c.customerDO.opFailureMessage=b,a.element("#btnCloseCustomerProfileModal").focus()})},c.updateSelectedContact=function(a,d,g){f.setCustomerId(a),g.id=a;var h=e.defer();p(a).then(function(a){b.info("Updated customer : "+a),c.primaryContact=d,g.accountSet=c.customerDO.accountSet,c.updateCustomer(g)},function(a){b.error("error during updating customer : "+a)}),b.info(h)},c.updateCustomer=function(a){c.customerDO.userName=a.email,c.customerDO.guest=!1,a.id=f.getCustomerId(),g.updateCustomer(f.getCustomerId(),a).then(function(e){b.info("Customer with customerID: "+f.getCustomerId()+" is successfully updated "+e),c.primaryContact?g.getContactById(c.primaryContact).then(function(e){var i=r(a);g.updateContact(f.getCustomerId(),c.primaryContact,i).then(function(a){d.path("/basket"),c.$emit("reloadBasket"),c.closeProfileInformationModal(),b.info(a),h.deactivateSpinner()},function(a){c.showServerError(a),b.error("Contact with ContactID: "+c.primaryContact+" is not updated "+a.data.errorMessage),h.deactivateSpinner()}),b.info(e)},function(a){c.showServerError(a),b.error("Contact with ContactID: "+c.primaryContact+" is not updated "+a.data.errorMessage),h.deactivateSpinner()}):h.deactivateSpinner()},function(a){h.deactivateSpinner(),c.showServerError(a)})},c.showServerError=function(a){var b=a.data.errorMessage,d="",e="";if("422"===a.data.responseCode||"409"===a.data.responseCode){for(var f in b)""!==b[f]&&(e=b[f].toString().trim(),d+=e.lastIndexOf(".")===e.length-1?e+" ":e+". ");c.showMessageAndFocus(d)}},c.saveCustomer=function(a){return"update"===c.fromPage?void c.updateCustomer(a):(c.customerDO.userName=a.email,c.customerDO.guest=!1,c.customerDO.accountSet="1",void g.createCustomer(a).then(function(e){var i=t(e.data);if(e){var j=r(a);j.primary=!0,g.createContact(i,j).then(function(e){var g=f.getStore().id,j=f.getLoggedInCSR().id,k=a.phoneNumber;f.setCustomerId(i),l.startNewOrder(i,g,j,k).then(function(a){c.$emit("reloadBasket"),d.path("/basket"),h.deactivateSpinner(),b.info(a),c.closeProfileInformationModal()},function(a){h.deactivateSpinner(),c.showServerError(a),b.error("An error occured while starting new Order."+a)}),b.info(e)},function(a){c.showServerError(a),b.error("Not able to create contact for customer "+i+a.data.errorMessage),h.deactivateSpinner()}),b.info(e)}},function(a){c.showServerError(a),h.deactivateSpinner(),b.error(a.data.errorMessage)}))}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("customerSearchModalController",["$log","$scope","$location","dataStorageService","customerSearchService","appService","basketService","newOrderService",function(b,c,d,e,f,g,h,i){function j(a){if(!a)return!1;var b=/^\d{10}$/;return-1!==String(a).search(b)}function k(){c.customerSearchDataModel={customerPhoneNumber:null,customerSearchResult:null},c.showPhoneNumberRequiredMessage=!1,c.showInValidPhoneNumberMessage=!1}c.customerSearchDataModel={customerPhoneNumber:null,customerSearchResult:null},c.showPhoneNumberRequiredMessage=!1,c.showInValidPhoneNumberMessage=!1,c.showCustomerSearchModal=function(){a.element("#customerSearchModal").modal("show"),k(),a.element("#customerPhoneNumber").focus(),document.getElementById("customerPhoneNumber").focus(),a.element("#customerPhoneNumber").select()},c.close=function(){k(),a.element("#customerSearchModal").modal("hide")},c.cancel=function(){k(),a.element("#customerSearchModal").modal("hide")},c.searchCustomer=function(){var b=!0;c.customerSearchDataModel.customerPhoneNumber?j(c.customerSearchDataModel.customerPhoneNumber)||(b=!1,c.showPhoneNumberRequiredMessage=!1,c.showInValidPhoneNumberMessage=!0,a.element("#customerPhoneNumber").focus()):(b=!1,c.showPhoneNumberRequiredMessage=!0,c.showInValidPhoneNumberMessage=!1,a.element("#customerPhoneNumber").focus()),b&&null!=c.customerSearchDataModel.customerPhoneNumber&&(g.activateSpinner(),f.searchCustomerByPhoneNumber(c.customerSearchDataModel.customerPhoneNumber).then(function(a){null==a.data?c.startNewOrder(null):1===a.data.length?c.startNewOrder(a.data[0].id):a.data.length>1?(c.customerSearchDataModel.customerSearchResult=a,g.deactivateSpinner()):g.deactivateSpinner()},function(a){"404"===a.data.responseCode?c.startNewOrder(null):g.deactivateSpinner()}))},c.skipCustomerSearchAndStartNewOrder=function(){c.customerSearchDataModel.customerPhoneNumber=null,c.startNewOrder(null)},c.startNewOrder=function(f){var h=e.getStore().id,j=e.getLoggedInCSR().id,l=c.customerSearchDataModel.customerPhoneNumber;l||(l=""),i.startNewOrder(f,h,j,l).then(function(c){g.deactivateSpinner(),c&&(b.debug("New Order Response : "+a.toJson(c)),k(),a.element("#customerSearchModal").modal("hide"),d.path("/basket"))},function(a){g.deactivateSpinner(),b.error("An error occured while starting new Order."+a)})},c.searchAgain=function(){k()}}]),a.module("pointOfSaleApplication").directive("showFocus",["$timeout",function(a){return function(b,c,d){b.$watch(d.showFocus,function(b){a(function(){b&&c.focus()})},!0)}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("dashboardController",["$scope","$log","dataStorageService",function(b,c,d){b.init=function(){c.debug("dashboardController: init"),b.basketId=d.getBasketId(),b.storeId=d.getStoreId(),b.loggedInCSR=d.getLoggedInCSR(),b.skuBarcodeSearchPostData={basketId:b.basketId||null,csrId:b.loggedInCSR.id||null,storeId:b.storeId||null},c.debug("basketId: "+b.basketId)},b.scanSuccessHandler=function(){var b=a.element(".ml-ppos-dashboard-saved-bag-widget-content").find("div:first").scope();b&&b.initializeSavedBasketsDataModel()},b.init()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("emailSignupController",["$log","$scope","$translate","ancillaryService","globalValidationService",function(b,c,d,e,f){c.emailSignupDataModel={hasValidationErrors:!1,validationErrors:[],email:"",firstName:"",lastName:""},c.initializeEmailSignupDataModel=function(){c.emailSignupDataModel.hasValidationErrors=!1,c.emailSignupDataModel.validationErrors=[],c.emailSignupDataModel.email="",c.emailSignupDataModel.firstName="",c.emailSignupDataModel.lastName=""},c.emailSignup=function(){c.emailSignupDataModel.hasValidationErrors=!1,c.emailSignupDataModel.validationErrors=[];var d=c.validateEmailSignupFields();if(d){var f={email:c.emailSignupDataModel.email,firstName:c.emailSignupDataModel.firstName,lastName:c.emailSignupDataModel.lastName};e.emailSignup(f).then(function(b){b&&(c.initializeEmailSignupDataModel(),a.element("#emailSignupSuccessModal").modal("show"))},function(d){if(b.error(d),"422"===d.data.responseCode){c.emailSignupDataModel.hasValidationErrors=!0;var e=d.data.errorMessage;for(var f in e)if(e.hasOwnProperty(f))for(var g=e[f],h=0;h<g.length;h++)c.emailSignupDataModel.validationErrors.push(f+" - "+g[h]);a.element("#emailSignupErrorModal").modal("show")}})}else c.emailSignupDataModel.hasValidationErrors=!0,a.element("#emailSignupErrorModal").modal("show")},c.validateEmailSignupFields=function(){var b=!1;return a.element("#emailId").hasClass("ng-invalid-email")?(b=!0,d("msg.ppos.invalidEmail").then(function(a){c.emailSignupDataModel.validationErrors.push(a)})):c.emailSignupDataModel.email?f.isEmailValid(c.emailSignupDataModel.email)||(b=!0,d("msg.ppos.invalidEmail").then(function(a){c.emailSignupDataModel.validationErrors.push(a)})):c.emailSignupDataModel.email||(b=!0,d("lbl.ppos.email").then(function(a){d("msg.ppos.isRequiredField",{fieldName:a}).then(function(a){c.emailSignupDataModel.validationErrors.push(a)})})),c.emailSignupDataModel.firstName||(b=!0,d("lbl.ppos.firstName").then(function(a){d("msg.ppos.isRequiredField",{fieldName:a}).then(function(a){c.emailSignupDataModel.validationErrors.push(a)})})),c.emailSignupDataModel.lastName||(b=!0,d("lbl.ppos.lastName").then(function(a){d("msg.ppos.isRequiredField",{fieldName:a}).then(function(a){c.emailSignupDataModel.validationErrors.push(a)})})),b?(c.emailSignupDataModel.hasValidationErrors=!0,!1):!0},c.initializeEmailSignupDataModel()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("homeController",["$scope","$location","dataStorageService",function(a,b,c){a.homePageDataModel={storeName:"",storeCode:""},a.initializeHomePageDataModel=function(){a.homePageDataModel.storeName=c.getStoreName(),a.homePageDataModel.storeCode=c.getStoreCode()},a.changeStore=function(){b.path("/provisioning/").search({action:"changeStore"})},a.initializeHomePageDataModel()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("inStorePickupOrderShipmentsController",["$log","$scope","$location","dataStorageService","orderService","csrService","receiptService","appService",function(b,c,d,e,f,g,h,i){c.inStorePickupOrderShipmentsDataModel={},c.groupBySkuDataModel={},c.currentSortParam="",c.noteMaxLength=1e3,c.activeCSRs=[],c.inStorePickupHeaderDataModel={pickupNewOrderShipmentsState:0,pickupInProcessOrderShipmentsState:0,pickupReadyOrderShipmentsState:0,pickupDoneOrderShipmentsState:0},c.initializeInStorePickupOrderShipmentsDataModel=function(d){i.activateSpinner(),d?c.currentSortParam=d:c.currentSortParam="orderDate",c.initializeInStorePickupHeaderDataModel(),c.initializeActiveCSRs(),"itemSKUNumber"===c.currentSortParam?f.groupBySku(e.getStoreId()).then(function(a){a&&(c.groupBySkuDataModel=a.data),i.deactivateSpinner()},function(a){b.error(a),i.deactivateSpinner()}):f.getInStorePickupOrderShipments(e.getStoreId(),d).then(function(b){b&&(c.inStorePickupOrderShipmentsDataModel=b.data,c.inStorePickupOrderShipmentsDataModel.PickupInProcess&&a.forEach(c.inStorePickupOrderShipmentsDataModel.PickupInProcess,function(a){a.canMoveToPickupReady=c.canMoveToPickupReady(a)}),c.inStorePickupOrderShipmentsDataModel.PickupReady&&a.forEach(c.inStorePickupOrderShipmentsDataModel.PickupReady,function(a){a.noteTextToAdd=""})),i.deactivateSpinner()},function(a){b.error(a),i.deactivateSpinner()})},c.initializeInStorePickupHeaderDataModel=function(){var a=d.path();"/pickupNewOrderShipments"===a?(c.inStorePickupHeaderDataModel.pickupNewOrderShipmentsState=1,c.inStorePickupHeaderDataModel.pickupInProcessOrderShipmentsState=0,c.inStorePickupHeaderDataModel.pickupReadyOrderShipmentsState=0,c.inStorePickupHeaderDataModel.pickupDoneOrderShipmentsState=0):"/pickupInProcessOrderShipments"===a?(c.inStorePickupHeaderDataModel.pickupNewOrderShipmentsState=0,c.inStorePickupHeaderDataModel.pickupInProcessOrderShipmentsState=1,c.inStorePickupHeaderDataModel.pickupReadyOrderShipmentsState=0,c.inStorePickupHeaderDataModel.pickupDoneOrderShipmentsState=0):"/pickupReadyOrderShipments"===a?(c.inStorePickupHeaderDataModel.pickupNewOrderShipmentsState=0,c.inStorePickupHeaderDataModel.pickupInProcessOrderShipmentsState=0,c.inStorePickupHeaderDataModel.pickupReadyOrderShipmentsState=1,c.inStorePickupHeaderDataModel.pickupDoneOrderShipmentsState=0):"/pickupDoneOrderShipments"===a?(c.inStorePickupHeaderDataModel.pickupNewOrderShipmentsState=0,c.inStorePickupHeaderDataModel.pickupInProcessOrderShipmentsState=0,c.inStorePickupHeaderDataModel.pickupReadyOrderShipmentsState=0,c.inStorePickupHeaderDataModel.pickupDoneOrderShipmentsState=1):"/inStorePickupOrderShipments"===a&&(c.inStorePickupHeaderDataModel.pickupNewOrderShipmentsState=0,c.inStorePickupHeaderDataModel.pickupInProcessOrderShipmentsState=0,c.inStorePickupHeaderDataModel.pickupReadyOrderShipmentsState=0,c.inStorePickupHeaderDataModel.pickupDoneOrderShipmentsState=0)},c.initializeActiveCSRs=function(){g.getActiveCSRs().then(function(b){if(b){var d=b.data;c.activeCSRs=[];var f=e.getLoggedInCSR();("Store Manager"===f.typePPOS||"Admin"===f.typePPOS)&&d&&a.forEach(d,function(b){b.permissions&&a.forEach(b.permissions,function(a){"INSTORE_PICKUP"===a.code&&c.activeCSRs.push(b)})})}},function(a){b.error(a)})},c.viewOrderDetail=function(a){d.url("/orderDetail?orderId="+a)},c.toggleIcon=function(b){var c=a.element("#arrow_"+b);c.hasClass("ml-ppos-arrow-down")?(c.addClass("ml-ppos-arrow-up"),c.removeClass("ml-ppos-arrow-down"),document.getElementById("orderShipmentDetail_"+b).style.display="block"):(c.addClass("ml-ppos-arrow-down"),c.removeClass("ml-ppos-arrow-up"),document.getElementById("orderShipmentDetail_"+b).style.display="none")},c.sortInStorePickupOrderShipmentsDataModel=function(b){c.initializeInStorePickupOrderShipmentsDataModel(b),a.element("#lstSortByMenu").hasClass("open")&&a.element("#lstSortByMenu").removeClass("open")},c.canMoveToPickupReady=function(a){var b=!1,c=e.getLoggedInCSR();return a&&(a.CSR.id===c.id||"Store Manager"===c.typePPOS||"Admin"===c.typePPOS)&&(b=!0),b},c.associateCSRtoShipment=function(a,d,e){f.associateCSRtoShipment(a,d,e).then(function(a){a&&c.initializeInStorePickupOrderShipmentsDataModel()},function(a){b.error(a)})},c.moveToPickupInProcessState=function(a,d){f.moveToPickupInProcessState(a,d,e.getStoreId()).then(function(b){if(b){var f=e.getLoggedInCSR();c.associateCSRtoShipment(f.id,a,d)}},function(a){b.error(a)})},c.moveToPickupReadyState=function(a,d){f.moveToPickupReadyState(a,d,e.getStoreId()).then(function(d){d&&h.emailPickupReady(a,e.getStoreId(),e.getLoggedInCSR().id).then(function(a){a&&c.initializeInStorePickupOrderShipmentsDataModel()},function(a){b.error(a),c.initializeInStorePickupOrderShipmentsDataModel()})},function(a){b.error(a)})},c.addShipmentNoteForPickup=function(a,d,g,h){var i={noteType:"ORDER_SHIPMENT_NOTE",csrID:e.getLoggedInCSR().id,customerID:g,orderID:a,orderShipmentID:d,processName:"InStorePickup",subProcessName:"PickupReady",note:h};f.addShipmentNoteForPickup(a,d,i).then(function(a){a&&c.initializeInStorePickupOrderShipmentsDataModel()},function(a){b.error(a)})},c.toggleChevron=function(b){a.element(b.target).prev(".panel-heading").find("i.ml-ppos-mini-white-icon, i.ml-ppos-mini-grey-icon").toggleClass("ml-ppos-arrow-up ml-ppos-arrow-down"),a.element(b.target).prev(".panel-heading").toggleClass("")},a.element("#accordion").on("hidden.bs.collapse",c.toggleChevron),a.element("#accordion").on("shown.bs.collapse",c.toggleChevron),c.initializeInStorePickupOrderShipmentsDataModel()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("loginController",["$scope","$location","$log","$q","dataStorageService","securityService","csrService","configService","storeService","redirectBridgeService","starPrinter","appService",function(b,c,d,e,f,g,h,i,j,k,l,m){function n(c){return c.loginId?c.password?!0:(b.showLoginFailureMessage=!0,b.loginFailureMessage="err.ppos.login.password.required",a.element("#password").focus(),!1):(b.showLoginFailureMessage=!0,b.loginFailureMessage="err.ppos.login.username.required",a.element("#loginId").focus(),!1)}function o(){b.userCredentials={loginId:null,password:null},b.showLoginFailureMessage=!1}b.userCredentials={loginId:null,password:null},b.showLoginFailureMessage=!1,b.loginFailureMessage=null,b.login=function(e){var p=n(e);if(p){m.activateSpinner();var q=g.getToken(e);q.then(function(g){f.setAccessToken(g.data.access_token),f.setRefreshToken(g.data.refresh_token),f.setLoggedIn("true"),h.getCSRByEmail(e.loginId).then(function(e){f.setLoggedInCSR(e.data),i.init().then(function(){var e=f.getStoreCode();j.getStoreByCode(e).then(function(a){var c=a.data,d=i.getConfig("app.ppos.remote_asset_url");f.setStore(c),f.setRemoteAssetUrl(d),l.uploadVendorImage(f.getRemoteAssetUrl()+"/images/","app-logo-print.png"),b.$emit("login"),f.setScreenLocked("false"),b.$emit("screenUnlocked"),d&&0!==d.length||o(),k.goTo("/dashboard")},function(b){d.error("Error finding store by code : "+e),d.error(a.toJson(b)),f.setUrlBase(""),f.setStoreCode(""),m.deactivateSpinner(),c.path("/provisioning")})},function(b){d.error("Error loading configurations and resources"),d.error(a.toJson(b))})},function(b){d.error("Error finding CSR by email : "+e.loginId),d.error(a.toJson(b))})},function(e){m.deactivateSpinner(),e.data&&e.data.responseCode?"422"===e.data.responseCode&&(d.error("Error while login - Invalid username/password"),b.showLoginFailureMessage=!0,b.loginFailureMessage="err.ppos.login.invalidUsernamePassword",b.userCredentials={loginId:null,password:null},a.element("#loginId").focus()):(f.setUrlBase(""),f.setStoreCode(""),c.path("/provisioning"))})}},a.element("#loginId").focus()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("logoutController",["$scope","$location","dataStorageService","securityService","redirectBridgeService",function(a,b,c,d,e){a.logout=function(){var b=d.terminateToken();b.then(function(b){b&&(c.setLoggedIn("false"),c.setLoggedInCSR(null),c.setScreenLocked("false"),c.setAccessToken(""),c.setRefreshToken(""),c.setCustomerId(""),c.setBasketId(""),c.setLoggedInUsersPosSettings(""),c.setProperties("resources",null),a.$emit("logout"),e.goTo("/home"))},function(a){console.log(a)})}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("managementController",["$scope","dataStorageService","csrService","$location",function(a,b,c,d){a.init=function(){var d=b.getLoggedInCSR();c.getCSRByEmail(d.email).then(function(b){for(var c=b.data.permissions,d=0;d<c.length;d++)if("ADD_EDIT_CSR"===c[d].code){a.managementDataModel.isUserCanAddEmp=!0,a.managementDataModel.isUserCanListEmp=!0;break}},function(a){console.log("ErrorResult - An error occurred while fetching CSR : "+a)}),a.managementDataModel.isUserCanDoPosSettings=!0},a.goToCsrAddScreen=function(){d.path("/csrAdd")},a.goToPposSettingsScreen=function(){d.path("/posSettings")},a.goToCsrListScreen=function(){d.path("/csrList")},a.managementDataModel={isUserCanSearchEmp:!1,isUserCanAddEmp:!1,isUserCanListEmp:!1,isUserCanDoPosSettings:!1,isUserCanDoPaymentSettings:!1,isUserCanViewSaleSettlement:!1,isUserCanViewOrderReturn:!1,isUserCanViewOrderTransaction:!1,isUserCanViewShipmentStatus:!1,isUserCanViewEmpActivity:!1},a.init()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("orderConfirmationModalController",["$scope","$location","dataStorageService","orderService",function(b,c,d,e){b.orderConfirmationDataModel={deviceName:"",printSelected:!1,emailSelected:!1,showMessage:!1},b.$on("order-confirm",function(a,c){b.showConfirmModal(c)}),b.showConfirmModal=function(c){b.orderConfirmationDataModel.printSelected=c.printSelected,b.orderConfirmationDataModel.deviceName=c.deviceName,b.orderConfirmationDataModel.emailSelected=c.emailSelected,b.orderConfirmationDataModel.emailSelected||b.orderConfirmationDataModel.printSelected||(b.orderConfirmationDataModel.showMessage=!0),b.orderConfirmationDataModel.email=c.email,e.getOrderById(c.orderId).then(function(c){b.orderConfirmationDataModel.orderid=c.data.code,a.element("#orderConfirmationtModal").modal("show"),d.removeItem("customerId")})},b.close=function(){a.element("#orderConfirmationtModal").modal("hide"),c.path("/dashboard"),a.element(a.element(".modal-backdrop")[0].remove())}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("orderDetailController",["$log","$scope","$routeParams","orderService","dataStorageService",function(b,c,d,e,f){c.orderDetailDataModel={},c.orderShipmentDataModel=[],c.orderPickupDataModel=[],c.thisStore=f.getStore(),c.initializeOrderDetailDataModel=function(){e.getOrderById(d.orderId).then(function(a){c.orderDetailDataModel=a.data;for(var b,d=0,e=0,f=0;f<a.data.shipments.length;f++)b=a.data.shipments[f],b.isPickupFromStore===!0?(c.orderPickupDataModel[d]=b,c.orderPickupDataModel[d].status&&("PickupInProcess"===c.orderPickupDataModel[d].status?c.orderPickupDataModel[d].status="Pickup In Process":"PickupReady"===c.orderPickupDataModel[d].status&&(c.orderPickupDataModel[d].status="Pickup Ready")),d++):b.isPickupFromStore===!1&&(c.orderShipmentDataModel[e]=b,e++)},function(a){b.error(a)})},c.toggleChevron=function(b){a.element(b.target).prev(".panel-heading").find("i.ml-ppos-mini-white-icon, i.ml-ppos-mini-grey-icon").toggleClass("ml-ppos-arrow-up ml-ppos-arrow-down"),a.element(b.target).prev(".panel-heading").toggleClass("")},a.element("#accordion").on("hidden.bs.collapse",c.toggleChevron),a.element("#accordion").on("shown.bs.collapse",c.toggleChevron),a.element("#accordion1").on("hidden.bs.collapse",c.toggleChevron),a.element("#accordion1").on("shown.bs.collapse",c.toggleChevron),c.initializeOrderDetailDataModel()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("orderSearchModalController",["$log","$scope","$location","$translate","orderService","appService",function(b,c,d,e,f,g){c.orderSearchDataModel={orderCode:null,showOrderSearchError:!1,orderSearchErrorMessage:null},c.clearOrderSearchData=function(){c.orderSearchDataModel.orderCode=null,c.orderSearchDataModel.showOrderSearchError=!1,c.orderSearchDataModel.orderSearchErrorMessage=null},c.closeOrderSearchModal=function(){c.clearOrderSearchData()},c.searchOrderByCode=function(){c.orderSearchDataModel.orderCode?(g.activateSpinner(),f.getOrderByCode(c.orderSearchDataModel.orderCode).then(function(b){g.deactivateSpinner(),a.element("#orderSearchModal").modal("hide"),d.url("/orderDetail?orderId="+b.data[0].id)},function(b){g.deactivateSpinner(),("404"===b.data.responseCode||"400"===b.data.responseCode)&&(c.orderSearchDataModel.showOrderSearchError=!0,e("msg.ppos.orderNotFound",{orderCode:c.orderSearchDataModel.orderCode}).then(function(a){c.orderSearchDataModel.orderSearchErrorMessage=a}),a.element("#orderCode").focus())})):(c.orderSearchDataModel.showOrderSearchError=!0,e("msg.ppos.orderNumberRequired",{minLength:3}).then(function(a){c.orderSearchDataModel.orderSearchErrorMessage=a}),a.element("#orderCode").focus())}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("posSettingsController",["$scope","settingsService","$log","$location","dataStorageService","$translate","nearByStoresService",function(b,c,d,e,f,g,h){b.posSettingsModel={timeoutArray:[],radiusArray:[],userSetTimeout:"",userSetRadius:"",storeLocation:"",showMessage:!1,message:""},b.init=function(){b.posSettingsModel.radiusArray=h.getRadiusArray(),b.posSettingsModel.timeoutArray=c.getTimeoutArray();var a=f.getStore();b.posSettingsModel.storeLocation=a.name+", "+a.street1+", "+a.city+", "+a.state+"  "+a.zipCode;var d=f.getLoggedInUsersPosSettings();if(null===d||""===d){b.posSettingsModel.userSetTimeout=b.posSettingsModel.timeoutArray[0],b.posSettingsModel.userSetRadius=b.posSettingsModel.radiusArray[0];var e={userSetRadius:b.posSettingsModel.userSetRadius,userSetTimeout:b.posSettingsModel.userSetTimeout};f.setLoggedInUsersPosSettings(e)}else b.posSettingsModel.userSetTimeout=d.userSetTimeout,b.posSettingsModel.userSetRadius=d.userSetRadius},b.goToManagementScreen=function(){e.path("/management")},b.showMessage=function(a){g(a).then(function(a){b.posSettingsModel.showMessage=!0,b.posSettingsModel.message=a})},b.saveChanges=function(c){b.posSettingsModel.showMessage=!1,b.posSettingsModel.message="";var d={userSetRadius:c.userSetRadius,userSetTimeout:c.userSetTimeout};f.setLoggedInUsersPosSettings(d),b.showMessage("msg.ppos.posSettingsSaved"),a.element("#divMsgIconContainer").hasClass("ml-icon-error")&&(a.element("#divMsgIconContainer").removeClass("ml-icon-error"),a.element("#divMsgIconContainer").addClass("ml-icon-success"))},b.init()}])}(window.angular),function(a,b){"use strict";a.module("pointOfSaleApplication").controller("paymentController",["$log","$scope","$location","$timeout","paymentService","dataStorageService","basketService","starPrinter","appService",function(c,d,e,f,g,h,i,j,k){d.paymentService=g,d.selection="PAYMENT_SELECTION",d.model={id:null,total:null,paymentTypes:null,payments:{},creditCard:{},cash:{},signature:{},lastSection:"",orderInProgress:!1,enableCashDrawer:!0,authData:null},d.showPaymentModal=function(b,e){k.activateSpinner(),d.model.checkoutInProgress=!1,"true"===sessionStorage.showShippingModal?f(function(){a.element("#hiddenOpener").trigger("click")},0):(c.debug("paymentController: showPaymentModal"),h.removeItem("paymentChange"),d.selection="PAYMENT_SELECTION",d.$broadcast("resetPaymentDisplay",null),d.orderPlaced=!1,d.model.signature.penColor="rgb(255,255,255)",d.clearSignature(),g.getPayments().then(function(f){var g=f;d.model.id=b,d.model.total=e,d.model.paymentTypes=g,d.model.payments={},d.model.displayBalance=e,d.model.placeOrder=!1,d.model.data={},d.model.authData=null,i.getBasketById(h.getBasketId()).then(function(b){d.model.total=b.data.total,d.model.displayBalance=b.data.total,k.deactivateSpinner(),a.element("#paymentModal").modal("show")},function(a){c.error(a),k.deactivateSpinner()})},function(a){c.error(a),k.deactivateSpinner()}))},d.showDefaultLayout=function(){var a=!0;return("SIGNATURE"===d.selection||"CREDIT_CARD_SWIPE"===d.selection)&&(a=!1),a},d.select=function(a){c.debug("paymentController: select: "+a),d.model.lastSection=d.selection+"",d.selection=a,d.model.placeOrder=!1},d.cancel=function(){c.debug("paymentController: cancel"),d.model.placeOrder=d.model.data.placeOrder,d.clearSignature(),d.$broadcast("resetPaymentDisplay",d.selection),d.selection="PAYMENT_SELECTION"},d.addPayment=function(){c.debug("paymentController: addPayment"),g.addPayment(d.model.id,{payments:b.toArray(d.model.payments)}).then(function(a){a&&(d.model.data=a.data,d.model.displayBalance=d.model.data.displayBalance,d.model.placeOrder=d.model.data.placeOrder,d.model.placeOrder?(d.model.enableCashDrawer&&"CASH"===d.selection&&d.model.payments.CASH&&j.openCashDrawer(),d.model.data.change&&h.setPaymentChange(d.model.data.change),k.activateSpinner(),d.basketCheckout()):d.selection="PAYMENT_SELECTION")},function(a){c.error(a.data),c.error(a.data.errorMessage)})},d.apply=function(){c.debug("paymentController: apply"),d.$broadcast("processPayment",d.selection)},d.removePayment=function(a){c.debug("paymentController: removePayment"),delete d.model.payments[a],d.$broadcast("resetPaymentDisplay",a),d.selection="PAYMENT_SELECTION",d.addPayment()},d.basketCheckout=function(){if(d.model.checkoutInProgress!==!0){d.model.checkoutInProgress=!0,c.debug("paymentController: basketCheckout");var e=h.getStore();g.basketCheckout(e.id,d.model.id,{payments:b.toArray(d.model.payments)}).then(function(b){b&&(d.orderPlaced=!0,a.element("#paymentModal").modal("hide"),h.removeItem("basketId"),h.setFinalizedOrderId(d.parseOrderId(b.data)),k.deactivateSpinner(),d.$emit("order")),d.model.checkoutInProgress=!1},function(a){d.model.checkoutInProgress=!1,k.deactivateSpinner(),c.error(a.data),c.error(a.data.errorMessage)})}},d.parseOrderId=function(a){return c.debug("paymentController: parseOrderId"),a.substr(a.lastIndexOf("/")+1)},d.captureSignature=function(){c.debug("paymentController: captureSignature"),d.clearSignature(),d.selection="SIGNATURE"},d.clearSignature=function(){c.debug("paymentController: clearSignature"),d.model.signature.clear()},d.acceptSignature=function(){c.debug("paymentController: acceptSignature");var a=!d.model.signature.isEmpty();a&&d.$broadcast("processPayment",d.model.lastSection)},d.cancelSignature=function(){d.releaseAuthorization(),d.cancel()},d.releaseAuthorization=function(){c.debug("paymentController: releaseAuthorization"),d.model.authData&&d.model.authData.authRequestIDs&&d.model.authData.authRequestIDs.length&&g.releaseAuthorization(d.model.id,d.model.authData).then(function(){
c.debug("paymentController: releaseAuthorization: Success"),d.model.authData=null},function(a){c.error("paymentController: releaseAuthorization: Failed"),c.error(a)})},a.element("#paymentModal").on("hidden.bs.modal",function(){d.orderPlaced===!1&&d.releaseAuthorization()})}])}(window.angular,window._),function(a,b){"use strict";a.module("pointOfSaleApplication").controller("productDetailController",["$scope","$location","$route","$log","$routeParams","productCatalogService","dataStorageService","basketService","configService","newOrderService",function(c,d,e,f,g,h,i,j,k,l){function m(){c.model.product={},c.model.addToBasketItem={productID:null,skuID:null,qty:null},c.model.priceSkuMsg="",c.model.stockQty="",c.model.stockAvailable="",c.model.stockUnavailable="",c.model.fromProductSearch="",c.model.crossSells=[]}function n(a){var b=a[0];c.model.priceSkuMsg="",1===a.length&&(c.model.priceSkuMsg=c.model.product.prices.sku[b].displayPrice.price)}function o(a){c.model.stockQty="",c.model.stockAvailable="",c.model.stockUnavailable="";var b=a[0];if(1===a.length){var d=c.model.product.stock[b];d&&(c.model.stockAvailable=d.available,c.model.stockQty=d.quantity),c.model.stockUnavailable=!c.model.stockAvailable}}c.model={product:{},addToBasketItem:{productID:null,skuID:null,qty:null},priceSkuMsg:"",stockQty:"",stockAvailable:"",stockUnavailable:"",fromProductSearch:"",crossSells:[]},c.backToProductSearchResult=function(){d.path("/productSearchResult")},c.$on("quantityChanged",function(a,b){f.debug("quantity : "+b),c.model.initialized&&c.enableDisableStoresButton()}),c.$on("productOptionChanged",function(){var a=c.getSelectedSku();null!==a?(n([a]),o([a])):(c.model.stockQty="",c.model.stockAvailable="",c.model.stockUnavailable="",c.model.priceSkuMsg=""),c.enableDisableStoresButton(),c.enableDisableAddToCartButton()}),c.enableDisableStoresButton=function(){if(c.model.product.optionsWithAssociatedSkuIDs.length){var a=c.getSelectedSku();a?c.model.disableStoresButton=!1:c.model.disableStoresButton=!0}else c.model.disableStoresButton=!1;0===c.model.addToBasketItem.qty&&(c.model.disableStoresButton=!0)},c.enableDisableAddToCartButton=function(){if(c.model.product.optionsWithAssociatedSkuIDs.length){var a=c.getSelectedSku();a&&c.model.stockAvailable?c.model.disableAddToCartButton=!1:c.model.disableAddToCartButton=!0}else c.model.stockAvailable?c.model.disableAddToCartButton=!1:c.model.disableAddToCartButton=!0},c.init=function(a,b){if(a){m();var d=i.getStoreId();c.model.fromProductSearch=b,c.model.showShortDescription=k.getConfig("app.ppos.ProductDetail.show_short_description"),c.model.showLongDescription=k.getConfig("app.ppos.ProductDetail.show_long_description"),c.model.showName=k.getConfig("app.ppos.ProductDetail.show_name"),h.getProductCrossSells(a,d).then(function(a){f.debug(a),c.model.crossSells=a.data},function(a){f.error(a)}),h.getProductViewData(a,d).then(function(a){f.debug(a),c.model.product=a.data,1===c.model.product.skus.length&&(n([c.model.product.skus[0].id]),o([c.model.product.skus[0].id])),c.model.initialized=!0,c.enableDisableStoresButton(),c.enableDisableAddToCartButton(),c.model.addToBasketItem={storeID:null,productID:c.model.product.id,thumb:c.model.product.image.thumb,skuID:null,qty:1}},function(a){f.error(a)})}},c.addItemToBasket=function(){if(c.model.addToBasketItem.storeID=i.getStoreId(),c.model.addToBasketItem.skuID=c.getSelectedSku(),null!==c.model.addToBasketItem.skuID&&c.model.stockAvailable&&c.model.addToBasketItem.qty>0)if(i.getCustomerId()||i.getBasketId()){var b=i.getBasketId();j.addItemToBasket(b,c.model.addToBasketItem).then(function(a){a&&d.path("/basket")},function(a){f.error("An error occurred while adding item to the Basket."+a)})}else{var e="",g=i.getStore().id,h=i.getLoggedInCSR().id,k="";l.startNewOrder(e,g,h,k).then(function(b){if(b){f.debug("New Order Response : "+a.toJson(b));var e=i.getBasketId();j.addItemToBasket(e,c.model.addToBasketItem).then(function(a){a&&d.path("/basket")},function(a){f.error("An error occurred while adding item to the Basket."+a)})}},function(a){f.error("An error occured while starting new Order."+a)})}},c.getSelectedSku=function(){var a=null,d=[],e=b.filter(c.model.product.optionsWithAssociatedSkuIDs,function(a){return null!==a.selectedOption});if(0===c.model.product.optionsWithAssociatedSkuIDs.length)return c.model.product.skus[0].id;if(e.length===c.model.product.optionsWithAssociatedSkuIDs.length)for(var f=0;f<e.length;f++){var g=e[f].selectedOption.skuIDs;d=0===f?g:b.intersection(d,g)}return 1===d.length&&(a=d[0]),a},c.init(g.productId,g.fromProductSearch)}])}(window.angular,window._),function(a){"use strict";a.module("pointOfSaleApplication").controller("productSearchModalController",["$log","$scope","$location","$translate","productSearchService","appService",function(b,c,d,e,f,g){c.productSearchDataModel={productSearchKeyword:null,searchTerm:null,showProductSearchError:!1,productSearchErrorMessage:null},c.clearProductSearchData=function(){c.productSearchDataModel.productSearchKeyword=null,c.productSearchDataModel.searchTerm=null,c.productSearchDataModel.showProductSearchError=!1,c.productSearchDataModel.productSearchErrorMessage=null},c.closeProductSearchModal=function(){c.clearProductSearchData()},c.searchProduct=function(){var h=f.validateProductSearchKeywordRequired(c.productSearchDataModel.productSearchKeyword);if(h){g.activateSpinner();var i=0,j=6,k=1,l={productSearchKeyword:c.productSearchDataModel.productSearchKeyword,offSet:i,productsPerPage:j,pageNumber:k},m=f.searchProduct(l);m.then(function(b){var e=b;g.deactivateSpinner(),1===e.searchResult.searchResultSize?(c.clearProductSearchData(),a.element("#productSearchModal").modal("hide"),c.productId=e.searchResult.productInfo[0].id,a.element("#productDetailModal").modal("show")):e.searchResult.searchResultSize>1&&(f.setProductSearchResult(e),c.clearProductSearchData(),a.element("#productSearchModal").modal("hide"),d.path("/productSearchResult"))},function(d){var f=d;g.deactivateSpinner(),"404"===f.searchResult.responseCode?(c.productSearchDataModel.searchTerm=c.productSearchDataModel.productSearchKeyword,c.productSearchDataModel.showProductSearchError=!0,e("msg.ppos.searchNoResults",{searchTerm:c.productSearchDataModel.searchTerm}).then(function(a){c.productSearchDataModel.productSearchErrorMessage=a}),a.element("#productSearchKeyword").focus()):b.error("An error occured during product search : "+a.toJson(d))})}else c.productSearchDataModel.showProductSearchError=!0,e("msg.ppos.shortSearchTerm",{minLength:3}).then(function(a){c.productSearchDataModel.productSearchErrorMessage=a}),a.element("#productSearchKeyword").focus()}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("productSearchResultController",["$log","$scope","productSearchService","productCatalogService",function(b,c,d,e){c.productSearchKeyword=null,c.productsPerPage=6,c.productSearchConfigModel=d.getProductSearchConfigModel(),c.productSearchResultDataModel={searchTerm:null,showKeywordRequiredErrorMessage:!1,showProductNotFoundErrorMessage:!1,showSorting:!1,productSearchKeyword:null,searchResult:null,pagingModel:null,sortOptions:null,defaultSortOption:null,currentSortOrder:null,currentSortParam:null,currentSortOptionConfig:null},c.searchProduct=function(a,b,e,f,g){c.productSearchKeyword=a;var h=d.validateProductSearchKeywordRequired(a);if(h){var i={productSearchKeyword:a,offSet:b,productsPerPage:c.productsPerPage,pageNumber:e,currentSortOrder:f,currentSortParam:g},j=d.searchProduct(i);j.then(function(a){var b=a;d.setProductSearchResult(b),c.initializeProductSearchResultDataModel(b)},function(a){c.productSearchResultDataModel=a,(null===c.productSearchResultDataModel.searchResult.data||"404"===c.productSearchResultDataModel.searchResult.responseCode)&&(c.productSearchResultDataModel.searchTerm=c.productSearchKeyword,c.productSearchResultDataModel.showKeywordRequiredErrorMessage=!1,c.productSearchResultDataModel.showProductNotFoundErrorMessage=!0,c.productSearchResultDataModel.showSorting=!1)})}else c.productSearchResultDataModel.showKeywordRequiredErrorMessage=!0,c.productSearchResultDataModel.showProductNotFoundErrorMessage=!1,c.productSearchResultDataModel.showSorting=!1,c.productSearchResultDataModel.pagingModel=null,c.productSearchResultDataModel.searchResult.productInfo=[]},c.initializeProductSearchResultDataModel=function(d){c.productSearchKeyword="",c.productSearchResultDataModel.productSearchKeyword=d.productSearchKeyword,c.productSearchResultDataModel.searchResult=d.searchResult,c.productSearchResultDataModel.pagingModel=d.pagingModel,c.productSearchResultDataModel.sortOptions=d.sortOptions,c.productSearchResultDataModel.defaultSortOption=d.defaultSortOption,c.productSearchResultDataModel.currentSortOrder=d.currentSortOrder,c.productSearchResultDataModel.currentSortParam=d.currentSortParam,c.productSearchResultDataModel.currentSortOptionConfig=d.currentSortOptionConfig,c.productSearchResultDataModel.searchTerm=null,c.productSearchResultDataModel.showKeywordRequiredErrorMessage=!1,c.productSearchResultDataModel.showProductNotFoundErrorMessage=!1,c.productSearchResultDataModel.searchResult.searchResultSize>1?c.productSearchResultDataModel.showSorting=!0:c.productSearchResultDataModel.showSorting=!1;for(var f="",g=d.searchResult.productInfo,h=0;h<g.length;h++)f+=g[h].id,h<=g.length-2&&(f+=",");f&&e.getPriceInfoForProduct(f,!1).then(function(b){a.forEach(g,function(a){var c=b.data[a.id],d=e.getPriceMessages(c,a.wasIs,a.onSale);a.priceInfo=d})},function(a){b.error(a)})},c.initializeProductSearchResultDataModel(d.getProductSearchResult())}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("provisioningController",["$scope","$location","$routeParams","dataStorageService",function(b,c,d,e){function f(c){return c.urlBase?c.storeCode?!0:(b.showProvisioningFailureMessage=!0,b.provisioningFailureMessage="err.ppos.provisioning.storeCode.required",a.element("#storeCode").focus(),!1):(b.showProvisioningFailureMessage=!0,b.provisioningFailureMessage="err.ppos.provisioning.urlBase.required",a.element("#urlBase").focus(),!1)}b.showProvisioningFailureMessage=!1,b.provisioningFailureMessage=null,b.provisioningDetails={urlBase:"",storeCode:""},b.initializeProvisioningDetails=function(){"changeStore"===d.action?(b.provisioningDetails.urlBase=e.getUrlBase(),b.provisioningDetails.storeCode=e.getStoreCode(),a.element("#storeCode").focus()):e.getUrlBase()&&e.getStoreCode()?c.url("/home"):a.element("#urlBase").focus()},b.provisionApplication=function(a){var b=f(a);b&&(e.setUrlBase(a.urlBase),e.setStoreCode(a.storeCode),c.url("/home"))},b.initializeProvisioningDetails()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("receiptModalController",["$scope","$location","dataStorageService","starPrinter","receiptService","accountService","globalValidationService","$translate",function(b,c,d,e,f,g,h,i){b.receiptDataModel={deviceName:"",hasValidationErrors:!1,hasEmailValidationErrors:!1,validationErrors:[],printSelected:!1,emailSelected:!1},b.email=void 0,b.obj=void 0,i("lbl.ppos.noDevice").then(function(a){b.noDevice=a}),b.$on("order",function(){b.showReceiptModal()}),b.update=function(){b.obj={orderId:d.getFinalizedOrderId(),printSelected:b.receiptDataModel.printSelected,deviceName:b.receiptDataModel.deviceName,emailSelected:b.receiptDataModel.emailSelected,email:b.email}},b.showReceiptModal=function(){b.receiptDataModel.paymentChange=d.getPaymentChange(),b.receiptDataModel.deviceName=d.getStarMicronicsPrinterName(),d.isPrinterConnected()||(b.receiptDataModel.hasValidationErrors=!0,i("lbl.ppos.noDevice").then(function(a){b.receiptDataModel.validationErrors.push(a)}),b.buttonClicked=!0),g.getCustomerById(d.getCustomerId()).then(function(a){null!=a.data.email&&(b.email=a.data.email,d.setOrderContactEmail=b.email)},function(a){console.log(a)}),d.removeItem("customerId"),b.buttonClicked=!1,b.receiptDataModel.orderid=d.getFinalizedOrderId(),console.log("OrderId: "+b.receiptDataModel.orderid),a.element("#receiptModal").modal("show")},b.cancel=function(){b.receiptDataModel.emailSelected=!1,b.receiptDataModel.printSelected=!1,b.update(),b.obj.showMessage=!0,a.element("#receiptModal").modal("hide"),b.$emit("order-confirm",b.obj),a.element("#orderConfirmationModal").modal("show")},b.processReceipt=function(){b.receiptDataModel.hasEmailValidationErrors=!1,b.receiptDataModel.validationErrors=[],b.validateEmail();var c=!b.receiptDataModel.hasEmailValidationErrors;if(b.receiptDataModel.emailSelected===!0){if(c===!1)return;b.update(),b.buttonClicked=!0,console.log("Calling email receipt service: order:"+d.getFinalizedOrderId()),f.emailOrderReceipt(d.getFinalizedOrderId(),d.getStoreId(),d.getLoggedInCSR().id,b.email).then(function(c){a.element("#receiptModal").modal("hide"),a.element("#orderConfirmationModal").modal("show"),b.update(),b.showMessage=!1,b.$emit("order-confirm",b.obj),console.log(c)})}b.receiptDataModel.printSelected===!0&&(b.buttonClicked=!0,console.log("Calling print receipt service: order:"+d.getFinalizedOrderId()),f.printOrderReceipt(d.getFinalizedOrderId(),d.getStoreId(),d.getLoggedInCSR().id).then(function(c){b.assembleTestPage=[];var f=b.scrubText(c.data);b.assembleTestPage=f.split(","),window.temp=b.assembleTestPage,e.getDeviceName().then(function(c){"NoDevice"===c?(d.setPrinterConnected(!1),i("lbl.ppos.noDevice").then(function(a){d.setStarMicronicsPrinterName(a),d.setPrinterConnected(!1),b.receiptDataModel.printSelected=!1,b.receiptDataModel.deviceName=a,b.receiptDataModel.validationErrors.push(a),b.receiptDataModel.hasValidationErrors=!0})):(e.printTestPage(b.assembleTestPage).then(),b.update(),b.showMessage=!1,a.element("#receiptModal").modal("hide"),a.element("#orderConfirmationModal").modal("show"),b.$emit("order-confirm",b.obj))})}))},b.scrubText=function(a){for(var b="",c=a.length,d=0;c>d;d++){var e=(128&a.charCodeAt(d))>>7;1!==e&&(b+=a.charAt(d))}return b},b.validateEmail=function(){a.element("#receiptModalEmail").hasClass("ng-invalid-email")?(b.receiptDataModel.hasEmailValidationErrors=!0,i("msg.ppos.invalidEmail").then(function(a){b.receiptDataModel.validationErrors.push(a)})):b.email?h.isEmailValid(b.email)||(b.receiptDataModel.hasEmailValidationErrors=!0,i("msg.ppos.invalidEmail").then(function(a){b.receiptDataModel.validationErrors.push(a)})):(void 0===b.email||""===b.email)&&(b.receiptDataModel.hasEmailValidationErrors=!0,i("lbl.ppos.email").then(function(a){i("msg.ppos.isRequiredField",{fieldName:a}).then(function(a){b.receiptDataModel.validationErrors.push(a)})}))}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("savedBasketsController",["$log","$scope","$location","configService","dataStorageService","basketService",function(a,b,c,d,e,f){b.savedBasketsDataModel={baskets:[]},b.initializeSavedBasketsDataModel=function(){var c=d.getConfig("app.ppos.savedCarts.hourRange");f.getBasketsForCSRByDateRange(e.getLoggedInCSR().id,c).then(function(a){a&&(b.savedBasketsDataModel.baskets=a.data)},function(c){a.error(c),b.savedBasketsDataModel.baskets=[]})},b.openSavedBasket=function(a,b){e.setCustomerId(a),e.setBasketId(b),c.path("/basket")},b.deleteSavedBasket=function(c){f.deleteBasket(c).then(function(a){a&&(c===e.getBasketId()&&(e.setCustomerId(""),e.setBasketId("")),b.initializeSavedBasketsDataModel())},function(c){a.error(c),b.initializeSavedBasketsDataModel()})},b.initializeSavedBasketsDataModel()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("shippingAddressAndMethodModalController",["$scope","dataStorageService","accountService","$log","$translate","appService","globalValidationService","basketService","shippingService","$timeout","$q",function(b,c,d,e,f,g,h,i,j,k,l){function m(a){return a.firstName?a.lastName?a.streetAddress?a.city?a.selectedState&&"-1"!==a.selectedState?a.zipCode?h.isValidPostalCode(a.zipCode,a.selectedCountry)?a.selectedCountry&&"-1"!==a.selectedCountry?a.phoneNumber?h.isValidPhoneNumber(a.phoneNumber)?void 0!==a.email&&a.email&&h.isEmailValid(a.email)?a.selectedShippingMethod?!0:(b.showMessageAndFocus("msg.ppos.noShippingMethod"),!1):(b.showMessageAndFocus("msg.ppos.invalidEmail"),!1):(b.showMessageAndFocus("msg.ppos.invalidPhoneNumber"),!1):(b.createEmptyFieldMsgAndDisplay("lbl.ppos.phoneNumber"),!1):(b.createEmptyFieldMsgAndDisplay("lbl.ppos.country"),!1):(b.showMessageAndFocus("msg.ppos.invalidzipCode"),!1):(b.createEmptyFieldMsgAndDisplay("lbl.ppos.zipCode"),!1):(b.createEmptyFieldMsgAndDisplay("lbl.ppos.state"),!1):(b.createEmptyFieldMsgAndDisplay("lbl.ppos.city"),!1):(b.createEmptyFieldMsgAndDisplay("lbl.ppos.streetAddress"),!1):(b.createEmptyFieldMsgAndDisplay("lbl.ppos.lastName"),!1):(b.createEmptyFieldMsgAndDisplay("lbl.ppos.firstName"),!1)}function n(a){var b={phone1:a.phoneNumber.replace(/\D/g,""),email:a.email,person:{firstName:a.firstName,lastName:a.lastName},address:{street1:a.streetAddress,street2:a.optionalAddress,city:a.city,postalCode:a.zipCode,state:a.selectedState,country:a.selectedCountry}};return b}b.shipping={customerObj:null,contactObj:null,firstName:null,lastName:null,streetAddress:null,optionalAddress:null,zipCode:null,city:null,states:[],selectedState:null,countries:[],selectedCountry:null,phoneNumber:null,email:null,shippingMethods:[],selectedShippingMethod:null,showMessage:!1,operationMessage:null},b.init=function(){b.clearModalData();var a=l.defer();return j.getCountries().then(function(f){var g;g={id:"-1",description:"Select a Country"},b.shipping.countries.push(g);for(var h=0;h<f.data.length;h++)g={id:f.data[h].code,description:f.data[h].code+"-"+f.data[h].name},b.shipping.countries.push(g);c.getCustomerId()&&d.getCustomerById(c.getCustomerId()).then(function(c){b.shipping.customerObj=c.data,c.data.primaryContact.id&&d.getContactById(c.data.primaryContact.id).then(function(c){b.shipping.contactObj=c.data,b.shipping.customerObj.guest===!1?(b.shipping.firstName=c.data.person.firstName,b.shipping.lastName=c.data.person.lastName,b.shipping.streetAddress=c.data.address.street1,b.shipping.optionalAddress=c.data.address.street2,b.shipping.zipCode=c.data.address.postalCode,b.shipping.city=c.data.address.city,null===c.data.address.state?b.shipping.selectedState="NA/NA":b.shipping.selectedState=c.data.address.state,b.shipping.selectedCountry=c.data.address.country,b.shipping.phoneNumber=c.data.phone1,b.shipping.email=b.shipping.customerObj.email):(null===c.data.address.state?b.shipping.selectedState="NA/NA":b.shipping.selectedState=c.data.address.state,b.shipping.selectedCountry=c.data.address.country,b.shipping.phoneNumber=c.data.phone1);var d={id:"-1",description:"Select a State/Province"};b.shipping.states.push(d),b.populateStates("US").then(function(c){e.info("Got US state list with size : "+c.length),b.populateStates("CA").then(function(c){e.info("Got CA state list with size : "+c.length);var d={id:"NA/NA",description:"NA-International"};b.shipping.states.push(d),b.populateShippingMethods().then(function(b){a.resolve(b)},function(b){e.error("Error in getting ship methods : "+b),a.reject(b)})},function(b){e.error("Error in getting CA states "+b),a.reject(b)})},function(b){e.error("Error in getting US states "+b),a.reject(b)})},function(b){e.error("Error in getting contact :"+b),a.reject(b)})},function(b){e.error("Error in getting customer "+b),a.reject(b)})},function(b){e.error("Error in getting countries : "+b),a.reject(b)}),a.promise},b.populateShippingMethods=function(a){b.shipping.shippingMethods=[];var d=null,f=null;if("selCountry"===a?(d=b.shipping.selectedCountry,"US"===d?b.shipping.selectedState="US/AL":"CA"===d?b.shipping.selectedState="CA/AB":"-1"===d?b.shipping.selectedState="-1":b.shipping.selectedState="NA/NA"):"selState"===a&&(f=b.shipping.selectedState,5===f.length?"US"===f.substring(0,2)?b.shipping.selectedCountry="US":"CA"===f.substring(0,2)?b.shipping.selectedCountry="CA":b.shipping.selectedCountry="-1":b.shipping.selectedCountry="-1"),d=b.shipping.selectedCountry,f=b.shipping.selectedState,null!==f&&5===f.length&&(f=b.shipping.selectedState.substring(3)),!d||!f||"-1"===f||"-1"===d)return b.shipping.selectedShippingMethod=null,b.showMessageAndFocus("msg.ppos.noShippingMethod"),!1;var g=l.defer(),h=c.getBasketId(),k=[];return i.getBasketById(h).then(function(a){for(var c,i,l=0;l<a.data.shipments.length;l++){c=a.data.shipments[l];for(var m=0;m<c.items.length;m++)i=c.items[m],i.isPickupFromStore===!1&&-1===k.indexOf(c.id)&&k.push(c.id)}j.getShippingMethods(h,k[0],d,f).then(function(a){var c=null,d=null,e=0;if(a.data.length>0){b.shipping.shippingMethods=[],d=a.data[0].shippingMethodItem.id,e=Number(a.data[0].discountedShipMethodCost.replace(/[^0-9\.]+/g,""));for(var f=0;f<a.data.length;f++)a.data[f].shippingMethodItem.active===!0&&(Number(a.data[f].discountedShipMethodCost.replace(/[^0-9\.]+/g,""))<e&&(d=a.data[f].shippingMethodItem.id,e=Number(a.data[f].discountedShipMethodCost.replace(/[^0-9\.]+/g,""))),c={id:a.data[f].shippingMethodItem.id,name:a.data[f].shippingMethodItem.name,cost:a.data[f].discountedShipMethodCost,description:a.data[f].shippingMethodItem.description},b.shipping.shippingMethods.push(c));b.shipping.selectedShippingMethod=d,b.shipping.showMessage=!1,b.shipping.operationMessage=null}else b.shipping.selectedShippingMethod=null,b.showMessageAndFocus("msg.ppos.noShippingMethod");g.resolve(a.data)},function(a){b.shipping.selectedShippingMethod=null,b.showMessageAndFocus("msg.ppos.noShippingMethod"),e.error("No shipping method found"+a),g.reject(a)})},function(a){b.shipping.selectedShippingMethod=null,b.showMessageAndFocus("msg.ppos.noShippingMethod"),e.error("Cannot get basket : "+a),g.reject(a)}),g.promise},b.populateStates=function(a){var c,d=l.defer();return("US"===a||"CA"===a)&&j.getStates(a).then(function(a){for(var e=0;e<a.data.length;e++)c={id:a.data[e].stateCode,description:a.data[e].stateCode.substring(3)+"-"+a.data[e].name},b.shipping.states.push(c);d.resolve(a.data)},function(a){d.reject(a),e.error(a)}),d.promise},b.showShippingAddressAndMethodModal=function(){b.init().then(function(b){e.info("Data loaded with shipping method = "+b.length),sessionStorage.showShippingModal=!0,a.element("#shippingAddressAndMethodModal").modal("show"),g.deactivateSpinner()},function(a){e.error("Cannot load data "+a),g.deactivateSpinner()})},b.closeShippingAddressAndMethodModal=function(){sessionStorage.showShippingModal=!0,b.clearModalData(),a.element("#shippingAddressAndMethodModal").modal("hide")},b.cancelShippingAddressAndMethodModal=function(){sessionStorage.showShippingModal=!0,b.clearModalData(),a.element("#shippingAddressAndMethodModal").modal("hide")},b.setOnlineItemShipToContact=function(a,b,c){var d={basketItemID:b.id,productID:b.product.id,skuID:b.skuID,qty:b.qty,storeID:null,shipToContactID:c};return d},b.saveShippingAddressAndMethod=function(f){if(m(f)){g.activateSpinner();var h,l=c.getBasketId();h=n(f),d.createContact(b.shipping.customerObj.id,h).then(function(d){var h=d.data.substring(d.data.lastIndexOf("/")+1),m=[];l&&i.getBasketById(l).then(function(d){a.forEach(d.data.shipments,function(c){a.forEach(c.items,function(a){a.isPickupFromStore===!1&&m.push(b.setOnlineItemShipToContact(l,a,h))})});var n={basketItems:m};i.updateBasketItems(l,n).then(function(d){console.log(d);var h=[];i.getBasketById(l).then(function(d){for(var i,l,m=0;m<d.data.shipments.length;m++){i=d.data.shipments[m];for(var n=0;n<i.items.length;n++)l=i.items[n],l.isPickupFromStore===!1&&-1===h.indexOf(i.id)&&h.push(i.id)}a.forEach(h,function(d){j.updateShippingMethod(c.getBasketId(),d,f.selectedShippingMethod).then(function(c){e.info(c),b.$emit("reloadBasket"),k(function(){a.element("#shippingAddressAndMethodModal").modal("hide"),sessionStorage.showShippingModal=!1,a.element("#btnOpenPymtModal").trigger("click"),g.deactivateSpinner()},0)},function(a){e.error(a),g.deactivateSpinner()})})},function(a){e.error(a),g.deactivateSpinner()})},function(a){e.error(a),g.deactivateSpinner()})},function(a){e.error(a),g.deactivateSpinner()})},function(a){g.deactivateSpinner();var c=a.data.errorMessage,d="",f="";if("422"===a.data.responseCode||"409"===a.data.responseCode){for(var h in c)""!==c[h]&&(f=c[h].toString().trim(),d+=f.lastIndexOf(".")===f.length-1?f+" ":f+". ");b.showMessageAndFocus(d)}else b.showMessageAndFocus("msg.ppos.contactNotsaved");e.error(a)})}},b.clearModalData=function(){b.shipping.firstName=null,b.shipping.lastName=null,b.shipping.streetAddress=null,b.shipping.optionalAddress=null,b.shipping.zipCode=null,b.shipping.city=null,b.shipping.states=[],b.shipping.countries=[],b.shipping.selectedState="-1",b.shipping.selectedCountry="-1",b.shipping.phoneNumber=null,b.shipping.shippingMethods=[],b.shipping.email=null,b.shipping.selectedShippingMethod=null,b.shipping.showMessage=!1,b.shipping.operationMessage=null},b.showMessageAndFocus=function(c){f(c).then(function(c){b.shipping.showMessage=!0,b.shipping.operationMessage=c,a.element("#btnCloseModal").focus()})},b.createEmptyFieldMsgAndDisplay=function(c){f(c).then(function(c){f("msg.ppos.isRequiredField",{fieldName:c}).then(function(c){b.shipping.showMessage=!0,b.shipping.operationMessage=c,a.element("#btnCloseModal").focus()})})}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").controller("unlockScreenController",["$log","$scope","$location","dataStorageService",function(a,b,c,d){b.unlockScreenDataModel={loggedInCSR:null,pinEntered:"",pinButtons:[],showPinDoesNotMatchErrorMessage:!1},b.initializeUnlockScreenDataModel=function(){b.unlockScreenDataModel.loggedInCSR=d.getLoggedInCSR(),b.unlockScreenDataModel.pinEntered="",b.unlockScreenDataModel.pinButtons=[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"},{label:"5",value:"5"},{label:"6",value:"6"},{label:"7",value:"7"},{label:"8",value:"8"},{label:"9",value:"9"},{label:"0",value:"0"},{label:"Delete",value:"Delete"}]},b.selectPin=function(a){"Delete"===a?b.deletePin():"Delete"!==a&&(b.unlockScreenDataModel.pinEntered.length<6&&(b.unlockScreenDataModel.pinEntered=b.unlockScreenDataModel.pinEntered+a),6===b.unlockScreenDataModel.pinEntered.length&&b.unlockScreen())},b.unlockScreen=function(){b.unlockScreenDataModel.pinEntered===d.getLoggedInCSR().pin?(d.setScreenLocked("false"),b.$emit("screenUnlocked"),c.path("/dashboard")):(b.unlockScreenDataModel.pinEntered="",b.unlockScreenDataModel.showPinDoesNotMatchErrorMessage=!0)},b.deletePin=function(){b.unlockScreenDataModel.pinEntered.length&&(b.unlockScreenDataModel.pinEntered=b.unlockScreenDataModel.pinEntered.substr(0,b.unlockScreenDataModel.pinEntered.length-1))},b.initializeUnlockScreenDataModel()}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("accountService",["dataService",function(a){return{createGuestCustomer:function(b){var c="/api/account/customers";return a.postData(c,b)},createCustomer:function(b){var c="/api/account/customers";return a.postData(c,b)},createContact:function(b,c){var d="/api/account/customers/"+b+"/contacts";return a.postData(d,c)},updateCustomer:function(b,c){var d="/api/account/customers/"+b;return a.putData(d,c)},getCustomerById:function(b){var c="/api/account/customers/"+b;return a.getData(c)},getContactById:function(b){var c="/api/account/contacts/"+b;return a.getData(c)},updateContact:function(b,c,d){var e="/api/account/customers/"+b+"/contacts/"+c;return a.putData(e,d)},getSecurityQuestions:function(){var b="/api/account/hints";return a.getData(b)}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("ancillaryService",["dataService",function(a){return{emailSignup:function(b){var c="/api/ancillary/emailsignup";return a.postData(c,b)}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("appService",["$rootScope",function(a){return{activateSpinner:function(){a.$broadcast("toggleSpinner",{active:!0})},deactivateSpinner:function(){a.$broadcast("toggleSpinner",{active:!1})}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("basketService",["$q","dataService","configService",function(a,b,c){return{isAutoSaveBag:function(){var a=c.getConfig("app.ppos.basket.autoSaveCart");return a},saveBag:function(a,c){var d="/api/baskets/"+a+"/markAsSaved?csrID="+c;return b.putData(d)},getBasketsForCSRByDateRange:function(a,c){var d="/api/baskets/csrs/"+a+"?hourRange="+c;return b.getData(d)},createBasket:function(a,c){var d="/api/baskets/customers/"+a;return c&&(d=d+"?csrID="+c),b.postData(d)},createGuestBasket:function(a,c,d){var e="/api/baskets/newGuestBasket?phone="+d;return a&&(e=e+"&storeID="+a),c&&(e=e+"&csrID="+c),b.postData(e)},deleteBasket:function(a){var c="/api/baskets/"+a;return b.deleteData(c)},getBasketById:function(a){var c="/api/baskets/"+a;return b.getData(c)},addItemToBasket:function(a,c){var d="/api/baskets/"+a;return b.postData(d,c)},updateBasketItems:function(a,c){var d="/api/baskets/"+a+"/items";return b.putData(d,c)},removeItemFromBasket:function(a,c){var d="/api/baskets/"+a+"/items/"+c;return b.deleteData(d)},addSourceCode:function(a,c){var d={sourceCode:c},e="/api/baskets/"+a+"/sourcecode";return b.postData(e,d)},removeSourceCode:function(a,c){var d="/api/baskets/"+a+"/sourcecode/"+c;return b.deleteData(d)}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("csrService",["dataService","dataStorageService","$location","globalValidationService","csrValidationService",function(b,c,d,e,f){return{getAllCSRs:function(){var a="/api/csrs?application=PPOS&store="+c.getStoreCode();return b.getData(a)},getActiveCSRs:function(){var a="/api/csrs?application=PPOS&status=1&store="+c.getStoreCode();return b.getData(a)},getInActiveCSRs:function(){var a="/api/csrs?application=PPOS&status=0&store="+c.getStoreCode();return b.getData(a)},getCSRById:function(a){var c="/api/csrs/"+a;return b.getData(c)},getCSRByEmail:function(a){var c="/api/csrs/email/"+a+"/";return b.getData(c)},createCSR:function(a){var c="/api/csrs";return b.postData(c,a)},updateCSR:function(a,c){var d="/api/csrs/"+a;return b.putData(d,c)},deleteCSR:function(a){var c="/api/csrs/"+a+"/Application/PPOS";return b.deleteData(c)},getCSRPermissions:function(a){var c="/api/csrs/permissions?typeID="+a;return b.getData(c)},getCSRTypes:function(){var a="/api/csrs/types?application=PPOS&excludedTypeIDs=12";return b.getData(a)},getCSRTypePermission:function(a){var c="/api/csrs/permissions?typeID="+a;return b.getData(c)},updateCSRPassword:function(a,c){var d="/api/csrs/password/"+a;return b.putData(d,c)},goToManagementScreen:function(){d.path("/management")},goToCsrListScreen:function(){d.path("/csrList")},clearContent:function(b,c){a.element("#"+b).val(""),this.clearPIN(b,c)},clearPIN:function(a,b){"pin1"===a&&(b.pin1=""),"pin2"===a&&(b.pin2=""),"pin3"===a&&(b.pin3=""),"pin4"===a&&(b.pin4=""),"pin5"===a&&(b.pin5=""),"pin6"===a&&(b.pin6="")},setStatus:function(a,b){b.activeStatus=a},showHidePermission:function(){var b=a.element("#permissionDivElement");b.hasClass("ml-icon-plus")?(b.addClass("ml-icon-minus"),b.removeClass("ml-icon-plus"),document.getElementById("collapseDiv").style.display="block"):(b.addClass("ml-icon-plus"),b.removeClass("ml-icon-minus"),document.getElementById("collapseDiv").style.display="none")},clearCSR:function(b,c,d){if(d.employeeId=null,d.firstName=null,d.lastName=null,d.email=null,d.password=null,d.confirmPassword=null,d.unlockPosPin="000000",d.activeStatus=!1,d.pin1="0",d.pin2="0",d.pin3="0",d.pin4="0",d.pin5="0",d.pin6="0",d.showCsrOpFailureMessage=!1,d.csrOpFailureMessage=null,a.element("#lblActive").hasClass("active")&&(a.element("#lblActive").toggleClass("active"),a.element("#lblInactive").toggleClass("active")),2===d.roleType.length){var e=this.getStoreAssociateRoleName(d.roleType,b),f=this.getStoreAssociateRoleName(d.roleType,c);d.selectedRole=e,a.element("#lblRoleRadio"+f).hasClass("active")&&(a.element("#lblRoleRadio"+f).toggleClass("active"),
a.element("#lblRoleRadio"+e).toggleClass("active"))}else d.selectedRole="",document.getElementById("roleTypeSelect").selectedIndex="0";this.populateCSRTypeDetails(d.selectedRole)},getStoreAssociateRoleName:function(a,b){var c="";if(a&&a.length>0)for(var d=0;d<a.length;d++)if(a[d].code===b){c=a[d].id;break}return c},moveOnNext:function(b,c,d,g){if(e.isNumber(b)){g.showCsrOpFailureMessage=!1;var h="#"+d;a.element(h).focus()}else a.element("#"+c).val(""),this.clearPIN(c,g),f.showMessageAndFocus("msg.ppos.invalidUnlockPIN",c,g)},populateCSRTypeDetails:function(a){if(""===a)document.getElementById("permissionListDiv").innerHTML="";else{document.getElementById("permissionListDiv").innerHTML="",document.getElementById("permissionListDiv").style.display="none";var b="",c=0;this.getCSRTypePermission(a).then(function(a){document.getElementById("permissionListDiv").style.display="";for(var d=[],e=[],f=[],g=[],h=0;h<a.data.length;h++)"Order Administration"===a.data[h].permissionCategory?d.push(a.data[h].description+"<br />"):"Customer Management"===a.data[h].permissionCategory?f.push(a.data[h].description+"<br />"):"Product Administration"===a.data[h].permissionCategory?e.push(a.data[h].description+"<br />"):"Store Management"===a.data[h].permissionCategory&&g.push(a.data[h].description+"<br />");if(0!==d.length){for(b+='<div class="ml-ppos-add-csr-permission-container"><div class="ml-ppos-add-csr-permission-title">Order Administration</div>',c=0;c<d.length;c++)b+='<div class="ml-ppos-add-csr-permission-items">'+d[c]+"</div>";b+="</div>"}if(0!==e.length){for(b+='<div class="ml-ppos-add-csr-permission-container"><div class="ml-ppos-add-csr-permission-title">Product Administration</div>',c=0;c<e.length;c++)b+='<div class="ml-ppos-add-csr-permission-items">'+e[c]+"</div>";b+="</div>"}if(0!==f.length){for(b+='<div class="ml-ppos-add-csr-permission-container"><div class="ml-ppos-add-csr-permission-title">Customer Management</div>',c=0;c<f.length;c++)b+='<div class="ml-ppos-add-csr-permission-items">'+f[c]+"</div>";b+="</div>"}if(0!==g.length){for(b+='<div class="ml-ppos-add-csr-permission-container"><div class="ml-ppos-add-csr-permission-title">Store Management</div>',c=0;c<g.length;c++)b+='<div class="ml-ppos-add-csr-permission-items">'+g[c]+"</div>";b+="</div>"}document.getElementById("permissionListDiv").innerHTML=b},function(a){console.log("ErrorResult - Error occurred while getting permissions : "+a)})}}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("csrValidationService",["globalValidationService","$translate",function(b,c){return{validateCSR:function(a,c){if(!a.firstName)return this.createEmptyFieldMsgAndDisplay("lbl.ppos.firstName",a),!1;if(!a.lastName)return this.createEmptyFieldMsgAndDisplay("lbl.ppos.lastName",a),!1;if(void 0===a.email||!a.email||!b.isEmailValid(a.email))return this.showMessageAndFocus("msg.ppos.invalidEmail",a),!1;if("add"===c&&!a.password)return this.createEmptyFieldMsgAndDisplay("lbl.ppos.password",a),!1;if("add"===c&&!a.confirmPassword)return this.createEmptyFieldMsgAndDisplay("lbl.ppos.reEnterPassword",a),!1;if("add"===c&&a.password!==a.confirmPassword)return this.showMessageAndFocus("msg.ppos.passwordNotMatch",a),!1;if("add"===c&&!b.isPasswordValid(a.password))return this.showMessageAndFocus("msg.ppos.invalidPassword",a),!1;if("add"===c&&!a.unlockPosPin)return this.createEmptyFieldMsgAndDisplay("lbl.ppos.unlockPosPIN",a),!1;if("add"===c&&6!==a.unlockPosPin.length){if(""===a.pin1)return this.showMessageAndFocus("msg.ppos.invalidUnlockPIN",a),!1;if(""===a.pin2)return this.showMessageAndFocus("msg.ppos.invalidUnlockPIN",a),!1;if(""===a.pin3)return this.showMessageAndFocus("msg.ppos.invalidUnlockPIN",a),!1;if(""===a.pin4)return this.showMessageAndFocus("msg.ppos.invalidUnlockPIN",a),!1;if(""===a.pin5)return this.showMessageAndFocus("msg.ppos.invalidUnlockPIN",a),!1;if(""===a.pin6)return this.showMessageAndFocus("msg.ppos.invalidUnlockPIN",a),!1}else{if("add"===c&&"000000"===a.unlockPosPin)return this.showMessageAndFocus("msg.ppos.invalidUnlockPIN",a),!1;if(!a.selectedRole)return this.showMessageAndFocus("msg.ppos.invalidRole",a),!1}return!0},createEmptyFieldMsgAndDisplay:function(b,d){a.element("#divMsgIconContainer").hasClass("ml-icon-success")&&(a.element("#divMsgIconContainer").removeClass("ml-icon-success"),a.element("#divMsgIconContainer").addClass("ml-icon-error")),c(b).then(function(b){c("msg.ppos.isRequiredField",{fieldName:b}).then(function(b){d.showCsrOpFailureMessage=!0,d.csrOpFailureMessage=b,a.element("#saveButton").focus()})})},showMessageAndFocus:function(b,d){a.element("#divMsgIconContainer").hasClass("ml-icon-success")&&(a.element("#divMsgIconContainer").removeClass("ml-icon-success"),a.element("#divMsgIconContainer").addClass("ml-icon-error")),c(b).then(function(b){d.showCsrOpFailureMessage=!0,d.csrOpFailureMessage=b,a.element("#saveButton").focus()})}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("cardReaderService",["$q","$log","dataService",function(a,b,c){return{activateSDK:function(){b.debug("cardReaderService: activateSDK");var c=a.defer();return window.unimag.isSDKActive()?(b.debug("cardReaderService: activateSDK: already active"),c.resolve({status:"already active"})):window.unimag.activateSDK(function(){b.debug("cardReaderService: activateSDK: activated"),c.resolve({status:"activated"})}),c.promise},scanCard:function(){b.debug("cardReaderService: scanCard");var c=a.defer();return window.unimag.startTaskSwipe(function(a,d,e){b.debug("cardReaderService: scanCard: startTaskSwipe: "+d);var f=window.unimag.TaskNotifEnum;switch(d){case f.StartFailed:c.reject(a+" task failed to start: "+e.StartFailedReason);break;case f.Started:break;case f.Stopped:e.ok||c.reject("swipe failed"),e.data&&c.resolve(e.data)}}),c.promise},readerConnect:function(){b.debug("cardReaderService: readerConnect");var c=a.defer();return window.unimag.isReaderConnected(function(a){b.debug("cardReaderService: readerConnect: connected: "+a),a?(b.debug("cardReaderService: readerConnect: already connected"),c.resolve("Connected")):(b.debug("cardReaderService: readerConnect: connecting"),window.unimag.startTaskConnect(function(a,d,e){b.debug("cardReaderService: readerConnect: startTaskConnect"+d);var f=window.unimag.TaskNotifEnum;switch(d){case f.StartFailed:c.reject(a+" task failed to start: "+e.StartFailedReason);break;case f.Started:break;case f.Stopped:e.ok?c.resolve("Connected"):c.reject("Timed-out")}}))}),c.promise},clearRunningTasks:function(){b.debug("cardReaderService: clearRunningTasks");var c=a.defer();return window.unimag.isSDKActive()?window.unimag.getRunningTask(function(a){b.debug("cardReaderService: clearRunningTasks: task: "+a),a?(window.unimag.stopTask(),c.resolve("tasks cleared")):c.resolve("no task to clear")}):(b.debug("cardReaderService: clearRunningTasks: no running tasks"),c.resolve("no task to clear")),c.promise},authorizeCard:function(a,d){b.debug("cardReaderService: authorizeCard");var e="/api/baskets/"+a+"/payment/authorize";return c.postData(e,d)}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("configService",["$q","$translate","$log","dataStorageService","dataService",function(a,b,c,d,e){function f(a){if(null!==a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function g(a){return d.getProperties(a)}function h(a,b){d.setProperties(a,b)}function i(a){var b={};h(a,b)}function j(a,b){if(null!==b){var c=g(a);for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);h(a,c)}}function k(d,h){var k=a.defer();try{var l=g(d);if((null===l||void 0===l)&&i(d),f(l)){var m="/api/registry/configs/bootstrap?path="+h+"&configType="+d;e.getData(m).then(function(a){a&&(j(d,a.data),d===n&&b.refresh(),k.resolve(g(d)))},function(a){k.reject(a),c.error(a)})}else k.resolve(g(d))}catch(o){k.reject(o),c.error(o)}return k.promise}function l(a,b){var c=g(a);return c[b]}var m="configuration",n="resources";return{init:function(){var b=a.defer(),d=this;return d.initProperties(m,"ppos.bootstrap.properties").then(function(){d.initProperties(n,"ppos.bootstrap.resources").then(function(){b.resolve({success:!0})},function(a){b.reject(a),c.error(a)})},function(a){b.reject(a),c.error(a)}),b.promise},getConfig:function(a){try{return l(m,a)}catch(b){return c.error(b),a}},initProperties:function(a,b){return k(a,b)},setProperties:function(a,b){return h(a,b)},reset:function(a){return i(a)}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("customerSearchService",["dataService",function(a){return{searchCustomerByPhoneNumber:function(b){var c="/api/account/customers?q="+b+"&query_fields=phone";return a.getData(c)},searchCustomerByEmail:function(b){var c="/api/account/customers?q="+b+"&query_fields=email";return a.getData(c)}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("dataService",["$http","$q","dataStorageService",function(a,b,c){var d={getData:function(d){var e=c.getUrlBase(),f=c.getAccessToken(),g=b.defer();return a({method:"GET",url:e+d,headers:{Accept:"application/json",Authorization:"Bearer "+f},cache:!1}).success(function(a){g.resolve(a)}).error(function(a,b,c,d){g.reject({data:a,status:b,headers:c,config:d})}),g.promise},postData:function(d,e){var f=c.getUrlBase(),g=c.getAccessToken(),h=b.defer();return a({method:"POST",url:f+d,headers:{Accept:"application/json",Authorization:"Bearer "+g},data:e,cache:!1}).success(function(a){h.resolve(a)}).error(function(a,b,c,d){h.reject({data:a,status:b,headers:c,config:d})}),h.promise},putData:function(d,e){var f=c.getUrlBase(),g=c.getAccessToken(),h=b.defer();return a({method:"PUT",url:f+d,headers:{Accept:"application/json",Authorization:"Bearer "+g},data:e,cache:!1}).success(function(a){h.resolve(a)}).error(function(a,b,c,d){h.reject({data:a,status:b,headers:c,config:d})}),h.promise},deleteData:function(d){var e=c.getUrlBase(),f=c.getAccessToken(),g=b.defer();return a({method:"DELETE",url:e+d,headers:{Accept:"application/json",Authorization:"Bearer "+f},cache:!1}).success(function(a){g.resolve(a)}).error(function(a,b,c,d){g.reject({data:a,status:b,headers:c,config:d})}),g.promise}};return d}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("dataStorageService",function(){return{getProperties:function(a){var b=JSON.parse(sessionStorage.getItem(a));return b},setProperties:function(a,b){sessionStorage.setItem(a,JSON.stringify(b))},isLoggedIn:function(){var a=sessionStorage.loggedIn;return"true"===a?!0:!1},setLoggedIn:function(a){sessionStorage.loggedIn=a},getLoggedInCSR:function(){if(sessionStorage.loggedInCSR){var a=JSON.parse(sessionStorage.loggedInCSR);return a}return null},setLoggedInCSR:function(a){var b=JSON.stringify(a);sessionStorage.loggedInCSR=b},isScreenLocked:function(){var a=sessionStorage.screenLocked;return"true"===a?!0:!1},setScreenLocked:function(a){sessionStorage.screenLocked=a},getUrlBase:function(){return localStorage.urlBase},setUrlBase:function(a){localStorage.urlBase=a},getRemoteAssetUrl:function(){return sessionStorage.remoteAssetUrl},setRemoteAssetUrl:function(a){sessionStorage.remoteAssetUrl=a},getStoreCode:function(){return localStorage.storeCode},setStoreCode:function(a){localStorage.storeCode=a},getStoreId:function(){var a=this.getStore();return a?a.id:null},getStoreName:function(){return localStorage.storeName},getStore:function(){if(sessionStorage.store){var a=JSON.parse(sessionStorage.store);return a}return null},setStore:function(a){var b=JSON.stringify(a);sessionStorage.store=b,localStorage.storeName=a.name},getAccessToken:function(){return sessionStorage.access_token},setAccessToken:function(a){sessionStorage.access_token=a},getRefreshToken:function(){return sessionStorage.refresh_token},setRefreshToken:function(a){sessionStorage.refresh_token=a},getCustomerId:function(){return sessionStorage.customerId},setCustomerId:function(a){sessionStorage.customerId=a},getBasketId:function(){return sessionStorage.basketId},getFinalizedOrderId:function(){return sessionStorage.finalizedOrderId},setBasketId:function(a){sessionStorage.basketId=a},setFinalizedOrderId:function(a){sessionStorage.finalizedOrderId=a},getLoggedInUsersPosSettings:function(){var a=null;return sessionStorage.posSettings&&(a=JSON.parse(sessionStorage.posSettings)),a},setLoggedInUsersPosSettings:function(a){var b=JSON.stringify(a);sessionStorage.posSettings=b},removeItem:function(a){sessionStorage.removeItem(a)},getPaymentChange:function(){var a=sessionStorage.paymentChange;return this.removeItem("paymentChange"),a},setPaymentChange:function(a){sessionStorage.paymentChange=a},setStarMicronicsPrinterName:function(a){sessionStorage.starMicronicsPrinterName=a},getStarMicronicsPrinterName:function(){return sessionStorage.starMicronicsPrinterName},isPrinterConnected:function(){var a=sessionStorage.isPrinterConnected;return"true"===a?!0:!1},setPrinterConnected:function(a){sessionStorage.isPrinterConnected=a}}})}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("geoService",["$log","$q",function(a,b){return{getUserGeoLocation:function(){var a=$.Deferred();return navigator.geolocation&&navigator.geolocation.getCurrentPosition(a.resolve,a.reject),a.promise()},getGeoLocationByAddress:function(c){var d=b.defer(),e=new google.maps.Geocoder;return e.geocode({address:c},function(b,e){if(e===google.maps.GeocoderStatus.ZERO_RESULTS)a.debug("Zero Result found for address : "+c),d.reject(e);else if(e===google.maps.GeocoderStatus.OK&&b.length>=1){var f=b[0];a.debug("Formatted Address : "+f.formatted_address),d.resolve(f.geometry.location)}}),d.promise}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("globalValidationService",function(){return{isEmailValid:function(a){return a.match(/(\w+[\w|\.|-]*\w+)(@\w+[\w|\.|-]*\w+\.\w{2,4})/)?!0:!1},isPasswordValid:function(a){return a.length<7||a.length>50?!1:a.match(/(([0-9]+[a-zA-Z]+)|([a-zA-Z]+[0-9]+))([a-zA-Z0-9]*)/)?!0:!1},isNumber:function(a){return null!=a&&a.match(/^[0-9]+$/)?!0:!1},isValidPhoneNumber:function(a){var b=a.replace(/\D/g,"");if(b.length<10||b.length>20)return!1;var c=new RegExp(/^[- +()]*[0-9][- +()0-9]*$/);return c.test(a)},isValidPostalCode:function(a,b){if(a.length<5||a.length>15)return!1;var c=new RegExp(/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i),d=new RegExp("^\\d{5}(-{0,1}\\d{4})?$");return"US"!==b&&"CA"!==b?!0:"US"===b?d.test(a):"CA"===b?c.test(a):void 0}}})}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").factory("googleMapsInitializer",["$window","$q",function(a,b){function c(){var a="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&callback=googleMapsAPIInitialized";return a}function d(){var a=document.createElement("script");a.type="text/javascript",a.src=c(),document.body.appendChild(a)}var e=b.defer();return a.googleMapsAPIInitialized=e.resolve,d(),{mapsInitialized:e.promise}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("nearByStoresService",["$log","$q","storeService","configService","dataStorageService",function(b,c,d,e,f){return{getRadiusArray:function(){var b=e.getConfig("app.ppos.nearByStores.storeRadiusList"),c=[];if(b){var d=b.split(",");d&&a.forEach(d,function(a){a&&c.push(a)})}return c},getDefaultRadius:function(){var a=null,b=f.getLoggedInUsersPosSettings();if(null===b||""===b){var c=this.getRadiusArray();c&&c.length>0&&(a=c[0])}else a=b.userSetRadius;return a},searchNearByStores:function(e){var f=c.defer(),g=[];return e&&d.getNearByStores(e.skuId,e.latitude,e.longitude,e.distance).then(function(b){var c=b.data;c&&a.forEach(c,function(a){var b=a.store,c={address:{name:b.details.name,street1:b.details.street1,street2:b.details.street2,street3:b.details.street3,city:b.details.city,state:b.details.state,zipCode:b.details.zipCode,phone:b.details.phone},id:b.details.id,pickupEnabled:b.details.pickupEnabled,hours:b.details.hours,distance:b.distance,availableQty:a.availableQty};g.push(c)}),f.resolve(g)},function(a){b.error(a),f.reject(g)}),f.promise}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("newOrderService",["$q","dataStorageService","basketService",function(a,b,c){function d(a){var b=a.lastIndexOf("/"),c=a.substring(b+1,a.length);return c}return{startNewOrder:function(e,f,g,h){c.isAutoSaveBag()||(g=null);var i=a.defer();return e?c.createBasket(e,g).then(function(a){var c=a.data,f=d(c);b.setCustomerId(e),b.setBasketId(f);var g={customerId:e,basketId:f};i.resolve(g)},function(a){console.log("An error occurred while creating Basket : "+a);var b={customerId:"",basketId:""};i.reject(b)}):c.createGuestBasket(f,g,h).then(function(a){var c=a.data,d=c.customerId;b.setCustomerId(d);var e=c.basketId;b.setBasketId(e);var f={customerId:d,basketId:e};i.resolve(f)},function(a){console.log("An error occurred while creating guest Customer and Basket : "+a);var b={customerId:"",basketId:""};i.reject(b)}),i.promise}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("orderService",["dataService",function(a){return{getOrderById:function(b){var c="/api/orders/"+b+"?includeDiscounts=true";return a.getData(c)},getOrderByCode:function(b){var c="/api/orders/search?q="+b;return a.getData(c)},getInStorePickupOrderShipments:function(b,c){var d="/api/pickupinstores/shipments/stores/"+b;return c&&(d=d+"?sortParam="+c),a.getData(d)},groupBySku:function(b){var c="/api/pickupinstores/skus/stores/"+b;return a.getData(c)},associateCSRtoShipment:function(b,c,d){var e="/api/csrs/"+b+"/orders/"+c+"/shipments/"+d;return a.putData(e)},moveToPickupInProcessState:function(b,c,d){var e="/api/pickupinstores/status/orders/"+b+"/shipments/"+c+"/stores/"+d+"?status=PICK_UP_IN_PROCESS";return a.putData(e)},moveToPickupReadyState:function(b,c,d){var e="/api/pickupinstores/status/orders/"+b+"/shipments/"+c+"/stores/"+d+"?status=PICK_UP_READY";return a.putData(e)},moveToPickupDoneState:function(b,c,d){var e="/api/pickupinstores/status/orders/"+b+"/shipments/"+c+"/stores/"+d+"?status=SHIPPED";return a.putData(e)},addShipmentNoteForPickup:function(b,c,d){var e="/api/pickupinstores/notes/orders/"+b+"/shipments/"+c;return a.postData(e,d)}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("paginationService",[function(){function a(a,b){return b>=a?!1:!0}function b(a,b){var c=Math.ceil(a/b);return c}function c(a,c,d){var e=b(a,c);if(d>=e)return 1;var f=Math.floor(e/d);return e%d>0&&++f,f}function d(a,b){var c=1;return c=a%b===0?a/b:Math.ceil(a/b)}function e(a,b){var c=d(a,b),e=c*b-b+1;return e}function f(a,c,e,f){var g=b(c,e),h=d(a,f);if(a===g)return a;if(h*f>g)return g;var i=h*f;return i}function g(a,b){var c=d(a,b);return c>1?!0:!1}function h(a,b,e,f){var g=d(a,f),h=c(b,e,f);return h>g?!0:!1}var i={getPagingModel:function(c){var d={currentPage:0,numberOfRecords:0,recordsPerPage:0,pagesPerPageGroup:0,showPagination:!1,numberOfPages:0,previousPageGroup:{hasPreviousPageGroup:!1,previousPageGroupPageNumber:0,previousPageGroupPageNumberOffSet:0},nextPageGroup:{hasNextPageGroup:!1,nextPageGroupPageNumber:0,nextPageGroupPageNumberOffSet:0},pages:[]};if(d.currentPage=c.currentPage,d.numberOfRecords=c.numberOfRecords,d.recordsPerPage=c.recordsPerPage,d.pagesPerPageGroup=c.pagesPerPageGroup,d.showPagination=a(c.numberOfRecords,c.recordsPerPage),d.showPagination){d.numberOfPages=b(c.numberOfRecords,c.recordsPerPage);for(var i=e(c.currentPage,c.pagesPerPageGroup),j=f(c.currentPage,c.numberOfRecords,c.recordsPerPage,c.pagesPerPageGroup),k=i;j>=k;k++){var l=c.recordsPerPage*(k-1);d.pages.push({pageNumber:k,offSet:l})}var m=g(c.currentPage,c.pagesPerPageGroup);if(m){var n=i-1,o=c.recordsPerPage*(n-1);d.previousPageGroup={hasPreviousPageGroup:m,previousPageGroupPageNumber:n,previousPageGroupPageNumberOffSet:o}}var p=h(c.currentPage,c.numberOfRecords,c.recordsPerPage,c.pagesPerPageGroup);if(p){var q=j+1,r=c.recordsPerPage*(q-1);d.nextPageGroup={hasNextPageGroup:p,nextPageGroupPageNumber:q,nextPageGroupPageNumberOffSet:r}}}return d}};return i}])}(window.angular),function(a,b){"use strict";a.module("pointOfSaleApplication").service("paymentService",["$q","$log","dataService","configService",function(a,c,d,e){return{getPayments:function(){c.debug("paymentService: getPayments");var b="/api/payments",f=a.defer();return d.getData(b).then(function(a){var b,c,d,g=[];for(b=e.getConfig("app.ppos.checkout.available_payment_types"),b&&b.length>0&&(b=b.split(",")),c=0;c<b.length;c++){var h=b[c];for(d=0;d<a.data.length;d++){var i=a.data[d];h===i.code&&(i.name=i.name.toLowerCase(),i.active=!0,g.push(i))}}f.resolve(g)},function(a){c.error("paymentService: getPayments: Failed"),c.error(a),f.reject(a)}),f.promise},addPayment:function(a,b){c.debug("paymentService: addPayment");var e="/api/baskets/"+a+"/payment";return d.postData(e,b)},getCreditCardTypes:function(){c.debug("paymentService: getCreditCardTypes");var a="/api/payments/creditCards";return d.getData(a)},releaseAuthorization:function(a,b){c.debug("paymentService: releaseAuthorization");var e="/api/baskets/"+a+"/payment/releaseAuthorization";return d.postData(e,b)},getCreditCardOptions:function(){c.debug("paymentService: getCreditCardOptions");var a={number:"",type:"",types:[],cvv:"",postalCode:"",expiryMonth:{options:[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],selectedOption:""},expiryYear:{options:[{label:"2015",value:"2015"},{label:"2016",value:"2016"},{label:"2017",value:"2017"},{label:"2018",value:"2018"},{label:"2019",value:"2019"},{label:"2020",value:"2020"},{label:"2021",value:"2021"},{label:"2022",value:"2022"},{label:"2023",value:"2023"}],selectedOption:""}};return a},getCashButtons:function(){c.debug("paymentService: getCashButtons");var a=[{label:"1",value:"1",ordinal:1},{label:"2",value:"2",ordinal:2},{label:"3",value:"3",ordinal:3},{label:"4",value:"4",ordinal:4},{label:"5",value:"5",ordinal:5},{label:"6",value:"6",ordinal:6},{label:"7",value:"7",ordinal:7},{label:"8",value:"8",ordinal:8},{label:"9",value:"9",ordinal:9},{label:"0",value:"0",ordinal:10},{label:"00",value:"00",ordinal:11},{label:"Delete",value:"Delete",ordinal:12}];return a=b.sortByOrder(a,["ordinal"])},basketCheckout:function(a,b,e){c.debug("paymentService: basketCheckout");var f="/api/baskets/"+b+"/checkout?storeId="+a;return d.postData(f,e)}}}])}(window.angular,window._),function(a){"use strict";a.module("pointOfSaleApplication").service("productCatalogService",["$q","$log","dataService",function(a,b,c){return{getProductById:function(a){var b="/api/products/"+a;return c.getData(b)},getProductDetailsById:function(d){var e="/api/products/"+d,f=a.defer();return b.debug("productCatalogService: getProductDetailsById: "+d),c.getData(e).then(function(a){f.resolve(a)},function(a){f.reject(a),b.error(a)}),f.promise},getProductCrossSells:function(d,e){var f="/api/products/"+d+"/stores/"+e+"/crosssells",g=a.defer();return b.debug("productCatalogService: getProductCrossSells: "+d),c.getData(f).then(function(a){g.resolve(a)},function(a){g.reject(a),b.error(a)}),g.promise},getProductViewData:function(a,b){var d="/api/view/products/"+a+"/stores/"+b;return c.getData(d)},getPriceMessages:function(a,b,c){function d(a){return a.minPrice===a.maxPrice}function e(a){return a.minPrice}function f(a){return a.minPrice+" - "+a.maxPrice}function g(a){return a.minSalePrice===a.maxSalePrice}function h(a){return a.minSalePrice}function i(a){return a.minSalePrice+" - "+a.maxSalePrice}var j="",k="",l="";a&&(b?g(a)?(k=e(a),l=h(a)):(k=f(a),l=i(a)):j=c?g(a)?h(a):i(a):d(a)?e(a):f(a));var m={priceMsg:j,priceWasMsg:k,priceNowMsg:l};return m},getPriceInfoForProduct:function(a,b){var d="/api/prices/products/?productIDs="+a+"&includeSkuPriceInfo="+b;return c.getData(d)},getInventory:function(a,b){var d;return d=b?"/api/inventory/skus/"+a+"?storeID="+b:"/api/inventory/skus/"+a,c.getData(d)}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("productSearchService",["$log","$q","dataService","productCatalogService","paginationService","configService",function(b,c,d,e,f,g){return{getProductSearchConfigModel:function(){var a=g.getConfig("app.ppos.productSearch.sort_options"),b=g.getConfig("app.ppos.productSearch.show_name"),c=g.getConfig("app.ppos.productSearch.show_short_description"),d=g.getConfig("app.ppos.productSearch.show_code"),e=g.getConfig("app.ppos.productSearch.show_prices"),f={sortOptions:a,showName:b,showShortDescription:c,showCode:d,showPrices:e};return f},validateProductSearchKeywordRequired:function(a){return a?a.length<3?!1:!0:!1},getSortOptions:function(){var b=this.getProductSearchConfigModel(),c=b.sortOptions,d=[];if(c){var e=c.split(",");e&&a.forEach(e,function(a){if(a){var b=a,c="",e="",f=a.search("Ascend");if(-1!==f?e="asc":(f=a.search("Descend"),-1!==f&&(e="desc")),-1!==f){c=a.substring(0,f);var g={sortOptionConfig:b,sortOptionParam:c,sortOptionOrder:e};d.push(g)}}})}return d},getDefaultSortOption:function(){var a=null,b=this.getSortOptions();return b&&b.length>0&&(a=b[0]),a},searchProduct:function(a){var b=this.getSortOptions(),e=this.getDefaultSortOption(),g=a.currentSortOrder||e.sortOptionOrder,h=a.currentSortParam||e.sortOptionParam,i="";if(b)for(var j=0;j<b.length;j++)b[j].sortOptionParam===h&&b[j].sortOptionOrder===g&&(i=b[j].sortOptionConfig);var k=5,l="/api/products?q="+encodeURIComponent(a.productSearchKeyword)+"&families=none&offset="+a.offSet+"&pagesize="+a.productsPerPage+"&sortOrder="+g+"&sortParam="+h,m=c.defer();return d.getData(l).then(function(c){if(c){var d={currentPage:a.pageNumber,numberOfRecords:c.data.searchResultSize,recordsPerPage:a.productsPerPage,pagesPerPageGroup:k},j=f.getPagingModel(d),l={productSearchKeyword:a.productSearchKeyword,searchResult:c.data,pagingModel:j,sortOptions:b,defaultSortOption:e,currentSortOrder:g,currentSortParam:h,currentSortOptionConfig:i};m.resolve(l)}},function(b){var c={productSearchKeyword:a.productSearchKeyword,searchResult:b.data,pagingModel:null,sortOptions:null,defaultSortOption:null};m.reject(c)}),m.promise},getProductSearchResult:function(){var a=JSON.parse(sessionStorage.getItem("productSearchResultCache"));return a},setProductSearchResult:function(a){var b=JSON.stringify(a);sessionStorage.setItem("productSearchResultCache",b)}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("receiptService",["dataService",function(a){return{printOrderReceipt:function(b,c,d){var e="/api/orders/"+b+"/notification?templateID=PrintReceiptPPOS&sendEmail=false&storeID="+c+"&csrID="+d;return console.log(e),a.getData(e)},emailOrderReceipt:function(b,c,d,e){var f=e||null,g="/api/orders/"+b+"/notification?templateID=EmailConfirmPPOS&storeID="+c+"&csrID="+d+"&emailOverride="+f;return a.getData(g)},emailPickupReady:function(b,c,d,e){var f=e||null,g="/api/orders/"+b+"/notification?templateID=EmailPickupReadyPPOS&storeID="+c+"&csrID="+d+"&emailOverride="+f;return a.getData(g)},emailPickupDone:function(b,c,d,e){var f=e||null,g="/api/orders/"+b+"/notification?templateID=EmailPickupDonePPOS&storeID="+c+"&csrID="+d+"&emailOverride="+f;return a.getData(g)},printPickupDone:function(b,c,d){var e="/api/orders/"+b+"/notification?templateID=PrintPickupDonePPOS&sendEmail=false&storeID="+c+"&csrID="+d;return a.getData(e)}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("redirectBridgeService",["$log","$location","dataStorageService","appService",function(a,b,c,d){return{goTo:function(e){a.debug("redirectBridgeService: goTo: location: "+e);var f,g=c.getRemoteAssetUrl();if(g&&g.length>0){switch(e){case"/home":case"/provisioning":f="index.html";break;default:f="app.html"}window.location=f+"#"+e}else d.deactivateSpinner(),b.path(e)}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("scanBarcodeService",["$q","$log","dataService",function(a,b,c){return{getDeviceStatus:function(){b.debug("scanBarcodeService: getDeviceStatus");var c=a.defer();return window.mlSocketMobile.getDeviceStatus(function(a){c.resolve(a)}),c.promise},getScannedValue:function(){b.debug("scanBarcodeService: getScannedValue");var c=a.defer();return window.mlSocketMobile.getScannedValue(function(a){c.resolve(a)}),c.promise},sendBarcode:function(a,d){return b.debug("scanBarcodeService: sendBarcode"),c.postData(a,d)}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("securityService",["$http","$q","dataStorageService",function(b,c,d){return{hasPermission:function(b,c){var d=!1;return a.forEach(b.permissions,function(a){a.code===c&&(d=!0)}),d},authorize:function(a,b){for(var c=!0,d=0;d<b.length;d++){var e=this.hasPermission(a,b[d]);if(!e){c=!1;break}}return c},getToken:function(a){var e=d.getUrlBase(),f=a.loginId,g=a.password,h=d.getStoreCode(),i="/login/token",j=c.defer();return b({method:"POST",url:e+i,headers:{Accept:"application/json"},data:{userName:f,password:g,storeCode:h},cache:!1}).success(function(a){j.resolve(a)}).error(function(a,b,c,d){j.reject({data:a,status:b,headers:c,config:d})}),j.promise},refreshToken:function(){var a=d.getUrlBase(),e=d.getRefreshToken(),f="/login/refresh",g=c.defer();return b({method:"POST",url:a+f,headers:{Accept:"application/json"},data:{refreshToken:e},cache:!1}).success(function(a){g.resolve(a)}).error(function(a,b){var c="An error occurred with status - "+b+" during refresh token.";g.reject(c)}),g.promise},terminateToken:function(){var a=d.getUrlBase(),e=d.getAccessToken(),f=d.getRefreshToken(),g="/login/terminate",h=c.defer();return b({method:"POST",url:a+g,headers:{Accept:"application/json"},data:{accessToken:e,refreshToken:f},cache:!1}).success(function(a){h.resolve(a)}).error(function(a,b){var c="An error occurred with status - "+b+" during terminate token.";h.reject(c)}),h.promise}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("settingsService",["configService",function(b){return{getTimeoutArray:function(){var c=b.getConfig("app.ppos.posSettings.timeoutList"),d=[];if(c){var e=c.split(",");e&&a.forEach(e,function(a){a&&d.push(a)})}return d}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("shippingService",["dataService",function(a){return{getStates:function(b){var c="/api/shippings/states?countryCode="+b;return a.getData(c)},getCountries:function(){var b="/api/shippings/countries";return a.getData(b)},getShippingMethods:function(b,c,d,e){var f="/api/shippings/shippingMethods/basket/"+b+"/shipments/"+c+"?countryCode="+d+"&stateCode="+e;return a.getData(f)},updateShippingMethod:function(b,c,d){var e="/api/shippings/basket/"+b+"/shipments/"+c+"?shippingMethodID="+d;return a.putData(e,"")}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("starPrinter",["$q",function(a){return{getPort:function(){var b=a.defer();return ppos.devices.mlStarMicronics.getPort(function(a){b.resolve(a)}),b.promise},getFirmwareVersion:function(){var b=a.defer();return ppos.devices.mlStarMicronics.getFirmwareVersion(function(a){b.resolve(a)}),b.promise},getModelName:function(){var b=a.defer();return ppos.devices.mlStarMicronics.getModelName(function(a){b.resolve(a)}),b.promise},getDeviceName:function(){var b=a.defer();return ppos.devices.mlStarMicronics.getDeviceName(function(a){b.resolve(a)},function(a){b.reject(a)}),b.promise},printBarCode:function(){var b=a.defer();return ppos.devices.mlStarMicronics.printBarCode(function(a){b.resolve(a)}),b.promise},uploadVendorImage:function(b,c){var d=a.defer(),e=new window.FileTransfer,f=encodeURI(b+c),g=window.cordova.file.dataDirectory+c,h=encodeURI(g);
return e.download(f,h,function(){var a="file:///",b="/private/"+g.substring(a.length);ppos.devices.mlStarMicronics.setUploadImageLocations(g,b,function(a){d.resolve(a)})},function(){d.reject("Download Failed")},!0,{}),d.promise},printTestPage:function(b){var c=a.defer();return ppos.devices.mlStarMicronics.printTestPage(b,function(a){c.resolve(a)}),c.promise},openCashDrawer:function(){var b=a.defer();return ppos.devices.mlStarMicronics.openCashDrawer(function(a){b.resolve(a)}),b.promise}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").service("storeService",["dataService",function(a){return{getStoreByCode:function(b){var c="/api/stores/code/"+b;return a.getData(c)},getNearByStores:function(b,c,d,e){var f="/api/stores/nearby/skus/"+b+"?latitude="+c+"&longitude="+d+"&distance="+e;return a.getData(f)}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").directive("addCouponCodeModal",function(){return{restrict:"E",templateUrl:"views/basket/AddCouponCodeModal.html",controller:"addCouponCodeModalController",link:function(){a.element("#addCouponCodeModal").on("shown.bs.modal",function(){a.element("#couponCode").focus()})}}})}(window.angular),window.angular=window.angular||{},function(a){"use strict";a.module("pointOfSaleApplication").directive("mlAppSpinner",["$log","$timeout","$translate",function(a,b,c){return{restrict:"E",templateUrl:"views/common/AppSpinner.html",scope:{},link:function(d){d.closeBtnTxt="Close",d.requestTimedOut="Request timed out. Please try again.",d.init=function(){d.displaySpinner=!1,d.timer=null,d.timerLimit=3e4,d.timerLimitExceeded=!1},d.$on("toggleSpinner",function(c,e){a.debug("mlAppSpinner: toggleSpinner: "+e),e.active===!0?(d.cancelTimer(),d.timer=b(d.timedOut,d.timerLimit),d.displaySpinner=!0):(b.cancel(d.timer),d.init())}),d.timedOut=function(){d.timerLimitExceeded=!0},d.close=function(){d.timerLimitExceeded&&(d.cancelTimer(),d.init())},d.setMessages=function(){c("btn.ppos.close").then(function(a){"btn.ppos.close"!==a&&(d.closeBtnTxt=a)}),c("msg.ppos.requestTimedOut").then(function(a){"msg.ppos.requestTimedOut"!==a&&(d.requestTimedOut=a)})},d.cancelTimer=function(){d.timer&&(b.cancel(d.timer),d.timer=null),d.timerLimitExceeded=!1},d.$on("$destroy",function(){d.cancelTimer()}),d.init(),d.setMessages()}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").directive("csrDeleteConfirmationModal",function(){var a={};return a.restrict="E",a.templateUrl="views/csr/CSRDeleteConfirmationModal.html",a})}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").directive("customerProfileInformationModal",["$timeout",function(b){return{restrict:"E",controller:"customerProfileInformationController",templateUrl:"views/customer/CustomerProfileInformationModal.html",link:function(c){a.element("#customerProfileInformation").on("shown.bs.modal",function(){a.element("#phoneNumber").focus()}),a.element("#customerProfileInformation").on("hidden.bs.modal",function(){b(c.closeProfileInformationModal,0)})}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").directive("customerSearchModal",function(){var a={};return a.restrict="E",a.templateUrl="views/search/CustomerSearchModal.html",a})}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").directive("inStorePickupCustomerVerificationModal",["$log","$location","$translate","orderService","dataStorageService","securityService","receiptService","starPrinter","globalValidationService",function(b,c,d,e,f,g,h,i,j){return{restrict:"E",templateUrl:"views/instorepickup/InStorePickupCustomerVerificationModal.html",scope:{orderDetailDataModel:"="},link:function(k){k.$watch("orderDetailDataModel",function(a){a&&k.init()}),k.init=function(){k.orderId=k.orderDetailDataModel.id,k.orderNumber=k.orderDetailDataModel.code,k.pickupShipment=k.getPickupShipment(),k.processInStorePickup=k.canProcessInStorePickup(),k.paymentTypeCreditCard=k.isPaymentTypeCreditCard(),k.creditCardType=k.getCreditCardType(),k.creditCardLastFourDigits=k.getCreditCardLastFourDigits(),k.billingContactFirstName=k.getBillingContactFirstName(),k.billingContactLastName=k.getBillingContactLastName(),k.pickupContactFirstName=k.getPickupContactFirstName(),k.pickupContactLastName=k.getPickupContactLastName(),k.pickupCustomerEmail=k.getPickupCustomerEmail(),k.billingContactFirstName!==k.pickupContactFirstName||k.billingContactLastName!==k.pickupContactLastName?k.cardVerificationRequired=!1:k.cardVerificationRequired=!0,k.hasValidationErrors=!1,k.validationErrors=[],k.pickupDone=!1},k.reset=function(){b.debug("In Store Pickup Customer Verification - reset()"),k.orderId="",k.orderNumber="",k.pickupShipment=null,k.processInStorePickup=!1,k.paymentTypeCreditCard=!1,k.creditCardType="",k.creditCardLastFourDigits="",k.billingContactFirstName="",k.billingContactLastName="",k.pickupContactFirstName="",k.pickupContactLastName="",k.pickupCustomerEmail="",k.cardVerificationRequired=!1,k.creditCardVerified=!1,k.customerVerified=!1,k.receiptTypePrinter=!1,k.receiptTypeEmail=!1,k.showStep1=!0,k.showStep2=!1,k.showStep3=!1,k.hasValidationErrors=!1,k.validationErrors=[],k.pickupDone=!1},k.isPaymentTypeCreditCard=function(){var b=!1,c=k.orderDetailDataModel.payments;return c&&a.forEach(c,function(a){"CREDIT CARD"===a.paymentType&&(b=!0)}),b},k.getCreditCardPayment=function(){var b=null,c=k.orderDetailDataModel.payments;return c&&a.forEach(c,function(a){"CREDIT CARD"===a.paymentType&&(b=a)}),b},k.getCreditCardType=function(){return k.isPaymentTypeCreditCard()?k.getCreditCardPayment().cardType:""},k.getCreditCardLastFourDigits=function(){return k.isPaymentTypeCreditCard()?k.getCreditCardPayment().maskedNumber:""},k.getPickupShipment=function(){var b=null;return a.forEach(k.orderDetailDataModel.shipments,function(c){a.forEach(c.items,function(a){f.getStoreId()===a.storeID&&(b=c)})}),b},k.canProcessInStorePickup=function(){var a=!1;return k.pickupShipment&&"Pickup Ready"===k.pickupShipment.status&&g.authorize(f.getLoggedInCSR(),["INSTORE_PICKUP"])&&(a=!0),a},k.getBillingContactFirstName=function(){return k.orderDetailDataModel.billToInfo?k.orderDetailDataModel.billToInfo.firstName:""},k.getBillingContactLastName=function(){return k.orderDetailDataModel.billToInfo?k.orderDetailDataModel.billToInfo.lastName:""},k.getPickupContactFirstName=function(){return k.pickupShipment?k.pickupShipment.shipmentInfo.person.firstName:""},k.getPickupContactLastName=function(){return k.pickupShipment?k.pickupShipment.shipmentInfo.person.lastName:""},k.getPickupCustomerEmail=function(){var a="";return k.pickupShipment&&k.pickupShipment.shipmentInfo&&(a=k.pickupShipment.shipmentInfo.email),!a&&k.orderDetailDataModel.customer?k.orderDetailDataModel.customer.email:a},k.processStep1=function(){k.isPaymentTypeCreditCard()&&k.cardVerificationRequired?k.creditCardVerified&&k.customerVerified&&(k.showStep1=!1,k.showStep2=!0,k.showStep3=!1,k.signature.isEmpty()||k.clearSignature()):k.customerVerified&&(k.showStep1=!1,k.showStep2=!0,k.showStep3=!1,k.signature.isEmpty()||k.clearSignature())},k.processStep2=function(c,g){var h=!k.signature.isEmpty();h&&(k.clearSignature(),e.moveToPickupDoneState(c,g,f.getStoreId()).then(function(b){b&&(k.showStep1=!1,k.showStep2=!1,k.showStep3=!0,k.pickupDone=!0,a.element("#pickupCustomerEmail").focus())},function(a){b.error(a)})),f.isPrinterConnected()?(k.printerAvailable=!0,k.deviceName=f.getStarMicronicsPrinterName()):(k.printerAvailable=!1,d("lbl.ppos.noDevice").then(function(a){k.deviceName=a}))},k.processStep3=function(){k.hasValidationErrors=!1,k.validationErrors=[],a.element("#pickupCustomerEmail").hasClass("ng-invalid-email")?(k.hasValidationErrors=!0,d("msg.ppos.invalidEmail").then(function(b){k.validationErrors.push(b),a.element("#pickupCustomerEmail").focus()})):j.isEmailValid(k.pickupCustomerEmail)?(k.receiptTypeEmail&&h.emailPickupDone(k.orderId,f.getStoreId(),f.getLoggedInCSR().id,k.pickupCustomerEmail).then(function(a){},function(a){b.error(a)}),k.receiptTypePrinter&&h.printPickupDone(k.orderId,f.getStoreId(),f.getLoggedInCSR().id).then(function(a){a&&(k.assembleTestPage=[],k.assembleTestPage=a.data.split(","),window.temp=k.assembleTestPage,i.printTestPage(k.assembleTestPage))},function(a){b.error(a)}),(k.receiptTypePrinter||k.receiptTypeEmail)&&(k.showStep1=!1,k.showStep2=!1,k.showStep3=!1,a.element("#inStorePickupCustomerVerificationModal").modal("hide"))):(k.hasValidationErrors=!0,d("msg.ppos.invalidEmail").then(function(b){k.validationErrors.push(b),a.element("#pickupCustomerEmail").focus()}))},k.cancelStep1=function(){k.reset(),k.init(),a.element("#inStorePickupCustomerVerificationModal").modal("hide")},k.cancelStep2=function(){k.clearSignature(),k.showStep1=!0,k.showStep2=!1,k.showStep3=!1},k.clearSignature=function(){k.signature.clear()},k.noReceipt=function(){k.receiptTypePrinter=!1,k.receiptTypeEmail=!1,k.showStep1=!1,k.showStep2=!1,k.showStep3=!1,a.element("#inStorePickupCustomerVerificationModal").modal("hide")},k.closeInStorePickupCustomerVerificationModal=function(){k.showStep3?(k.receiptTypePrinter=!1,k.receiptTypeEmail=!1,k.showStep1=!1,k.showStep2=!1,k.showStep3=!1,a.element("#inStorePickupCustomerVerificationModal").modal("hide")):(k.reset(),k.init(),a.element("#inStorePickupCustomerVerificationModal").modal("hide"))},k.showInStorePickupCustomerVerificationModal=function(){k.reset(),k.init(),a.element("#inStorePickupCustomerVerificationModal").modal("show")},a.element("#inStorePickupCustomerVerificationModal").on("hidden.bs.modal",function(){k.pickupDone&&(k.receiptTypeEmail&&!k.pickupCustomerEmail&&(k.receiptTypeEmail=!1,k.$apply()),a.element("#inStorePickupConfirmationModal").modal("show"))}),k.inStorePickupConfirmationDone=function(){a.element("#inStorePickupConfirmationModal").modal("hide")},k.closeInStorePickupConfirmationModal=function(){a.element("#inStorePickupConfirmationModal").modal("hide")},k.safeApply=function(a){var b=k.$root.$$phase;"$apply"===b?a():(c.path("/dashboard"),k.$apply())},a.element("#inStorePickupConfirmationModal").on("hidden.bs.modal",function(){k.reset(),k.safeApply(function(){c.path("/dashboard")})}),k.reset()}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").directive("nearByStoresModal",["$log","$location","dataStorageService","productCatalogService","nearByStoresService","appService","googleMapsInitializer","geoService","basketService","newOrderService",function(b,c,d,e,f,g,h,i,j,k){return{restrict:"E",templateUrl:"views/common/NearByStoresModal.html",link:function(l){l.nearByStoresDataModel={radiusArray:[],defaultRadius:"",selectedRadius:"",product:null,selectedSku:"",requestedQuantity:"",nearByStoresSearchKeyword:"",online:{availableQty:""},stores:[]},l.showNearByStoresModal=function(b,c,d){a.element("#productDetailModal").modal("hide"),a.element("#nearByStoresModal").modal("show"),l.initNearByStoresDataModel(b,c,d)},l.closeNearByStoresModal=function(){a.element("#nearByStoresModal").modal("hide")},l.cancelNearByStoresModal=function(){},l.initNearByStoresDataModel=function(c,d,g){l.nearByStoresDataModel={radiusArray:f.getRadiusArray(),defaultRadius:f.getDefaultRadius(),selectedRadius:f.getDefaultRadius(),product:null,selectedSku:"",requestedQuantity:"",nearByStoresSearchKeyword:"",online:{availableQty:""},stores:[]};var h=null,i=null;e.getProductById(c).then(function(c){h=c.data;var f=c.data.skus;f&&a.forEach(f,function(a){a.id===d&&(i=a,l.nearByStoresDataModel.product=h,l.nearByStoresDataModel.selectedSku=i,l.nearByStoresDataModel.requestedQuantity=g,e.getInventory(i.id,null).then(function(a){var b=a.data.qtyAvailable;l.nearByStoresDataModel.online={availableQty:b,showStockAvailabilityMessage:!1}},function(a){b.error(a)}),l.searchNearByStores(!0))})},function(a){b.error(a)})},l.searchNearByStores=function(a){a&&(l.nearByStoresDataModel.selectedRadius=f.getDefaultRadius()),h.mapsInitialized.then(function(){var a=d.getStore(),c=a.zipCode;l.nearByStoresDataModel.nearByStoresSearchKeyword?c=l.nearByStoresDataModel.nearByStoresSearchKeyword:l.nearByStoresDataModel.nearByStoresSearchKeyword=c;var e=i.getGeoLocationByAddress(c);e.then(function(a){var c={skuId:l.nearByStoresDataModel.selectedSku.id,latitude:a.lat(),longitude:a.lng(),distance:l.nearByStoresDataModel.selectedRadius},d=f.searchNearByStores(c);d.then(function(a){l.nearByStoresDataModel.stores=a;for(var b=0;b<l.nearByStoresDataModel.stores.length;b++)l.nearByStoresDataModel.stores[b].showStockAvailabilityMessage=!1},function(a){b.error(a),l.nearByStoresDataModel.stores=[]})},function(a){b.error(a),l.nearByStoresDataModel.stores=[]})},function(){})},l.addItemToBasketFromWebStore=function(){if(l.nearByStoresDataModel.requestedQuantity>l.nearByStoresDataModel.online.availableQty){l.nearByStoresDataModel.online.showStockAvailabilityMessage=!0;for(var c=0;c<l.nearByStoresDataModel.stores.length;c++)l.nearByStoresDataModel.stores[c].showStockAvailabilityMessage=!1}else if(g.activateSpinner(),d.getCustomerId()||d.getBasketId()){var e={productID:l.nearByStoresDataModel.product.id,skuID:l.nearByStoresDataModel.selectedSku.id,qty:l.nearByStoresDataModel.requestedQuantity,storeID:null};l.addItemToBasketFromNearByStoresModal(d.getBasketId(),e)}else{var f="",h=d.getStore().id,i=d.getLoggedInCSR().id,j="";k.startNewOrder(f,h,i,j).then(function(c){if(c){b.debug("New Order Response : "+a.toJson(c));var e={productID:l.nearByStoresDataModel.product.id,skuID:l.nearByStoresDataModel.selectedSku.id,qty:l.nearByStoresDataModel.requestedQuantity,storeID:null};l.addItemToBasketFromNearByStoresModal(d.getBasketId(),e)}},function(a){b.error("An error occured while starting new Order."+a)})}},l.addItemToBasketFromPhysicalStore=function(c){var e=c.id;if(l.nearByStoresDataModel.requestedQuantity>c.availableQty){for(var f=0;f<l.nearByStoresDataModel.stores.length;f++)l.nearByStoresDataModel.stores[f].id===c.id?l.nearByStoresDataModel.stores[f].showStockAvailabilityMessage=!0:l.nearByStoresDataModel.stores[f].showStockAvailabilityMessage=!1;l.nearByStoresDataModel.online.showStockAvailabilityMessage=!1}else if(g.activateSpinner(),d.getCustomerId()||d.getBasketId()){var h={productID:l.nearByStoresDataModel.product.id,skuID:l.nearByStoresDataModel.selectedSku.id,qty:l.nearByStoresDataModel.requestedQuantity,storeID:e};l.addItemToBasketFromNearByStoresModal(d.getBasketId(),h)}else{var i="",j=d.getLoggedInCSR().id,m="";k.startNewOrder(i,e,j,m).then(function(c){if(c){b.debug("New Order Response : "+a.toJson(c));var f={productID:l.nearByStoresDataModel.product.id,skuID:l.nearByStoresDataModel.selectedSku.id,qty:l.nearByStoresDataModel.requestedQuantity,storeID:e};l.addItemToBasketFromNearByStoresModal(d.getBasketId(),f)}},function(a){b.error("An error occured while starting new Order."+a)})}},l.addItemToBasketFromNearByStoresModal=function(d,e){j.addItemToBasket(d,e).then(function(b){if(g.deactivateSpinner(),b){a.element("#nearByStoresModal").modal("hide");var e=c.path();"/basket"===e?l.initializeBasketDetailDataModel(d):c.path("/basket")}},function(e){b.error("An error occurred while adding item to the Basket."+e),g.deactivateSpinner(),a.element("#nearByStoresModal").modal("hide");var f=c.path();"/basket"===f?l.initializeBasketDetailDataModel(d):c.path("/basket")})},l.continueStockAvailability=function(a){a?(l.nearByStoresDataModel.requestedQuantity=a.availableQty,l.addItemToBasketFromPhysicalStore(a)):(l.nearByStoresDataModel.requestedQuantity=l.nearByStoresDataModel.online.availableQty,l.addItemToBasketFromWebStore())},l.cancelStockAvailability=function(){for(var a=0;a<l.nearByStoresDataModel.stores.length;a++)l.nearByStoresDataModel.stores[a].showStockAvailabilityMessage=!1;l.nearByStoresDataModel.online.showStockAvailabilityMessage=!1}}}}])}(window.angular),window.angular=window.angular||{},function(a){"use strict";a.module("pointOfSaleApplication").directive("mlNumericSpinner",function(){return{restrict:"E",transclude:!0,templateUrl:"views/common/NumericSpinner.html",scope:{mappedValue:"=",maxLength:"@"},link:function(a){a.incrementValue=function(b){var c,d;b.preventDefault(),b.stopPropagation(),c=a.mappedValue/1,d=(parseInt(c)+1).toString().length,a.isNumeric(c)&&d<=a.maxLength?c=parseInt(c)+1:(!a.isNumeric(c)||isNaN(c))&&(c=0),a.mappedValue=c},a.decrementValue=function(b){var c;b.preventDefault(),b.stopPropagation(),c=a.mappedValue/1,c=a.isNumeric(c)&&c>0?parseInt(c)-1:0,a.mappedValue=c},a.isNumeric=function(a){var b=new RegExp("^\\d*$");return b.test(a)&&!isNaN(a)},a.isButtonDisabled=function(b){var c=a.mappedValue/1,d=!1;switch(""===c&&(c=0),b){case"increment":a.isNumeric(c)&&(parseInt(c)+1).toString().length>a.maxLength&&(d=!0);break;case"decrement":0===parseInt(c)&&(d=!0)}return d},a.handleBlur=function(){var b=a.mappedValue;null!=b&&0!==b.length&&0!==(b+"").replace(/\s/g,"").length&&a.isNumeric(b)?a.mappedValue=b/1:a.mappedValue=0},a.$watch("mappedValue",function(b){a.isNumeric(b)||(a.mappedValue=0),a.$emit("quantityChanged",a.mappedValue)})}}})}(window.angular),window.angular=window.angular||{},function(a){"use strict";a.module("pointOfSaleApplication").directive("orderConfirmationModal",function(){return{restrict:"E",templateUrl:"views/basket/OrderConfirmationModal.html",controller:"orderConfirmationModalController",link:function(a,b){b.find(".modal:first").on("hidden.bs.modal",function(){a.$emit("redirectTo",{path:"/dashboard"})})}}})}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").directive("orderSearchModal",["$timeout",function(b){return{restrict:"E",templateUrl:"views/search/OrderSearchModal.html",controller:"orderSearchModalController",link:function(c,d){a.element("#orderSearchModal").on("shown.bs.modal",function(){a.element("#orderCode").focus()}),d.find(".modal:first").on("hidden.bs.modal",function(){b(c.closeOrderSearchModal,0)})}}}])}(window.angular),window.angular=window.angular||{},function(a,b){"use strict";a.module("pointOfSaleApplication").directive("mlPaymentCash",function(){return{restrict:"E",templateUrl:"views/basket/PaymentCash.html",scope:{mlPaymentModel:"=",paymentService:"=",mlParentSubmit:"&"},link:function(a){a.init=function(){a.selectionType="CASH",a.mlPaymentModel.cash={amount:"0",amountDisplay:a.formatAmount("0"),buttons:a.paymentService.getCashButtons()}},a.selectCashKey=function(b){if("Delete"===b){var c=a.mlPaymentModel.cash.amount;c.length>1&&(a.mlPaymentModel.cash.amount=c.substr(0,c.length-1))}else a.mlPaymentModel.cash.amount=a.mlPaymentModel.cash.amount+b;a.mlPaymentModel.cash.amountDisplay=a.formatAmount(a.mlPaymentModel.cash.amount)},a.formatAmount=function(a){var b=parseInt(a)/100;return b.toFixed(2)},a.clearCash=function(){a.mlPaymentModel.cash.amount="0",a.mlPaymentModel.cash.amountDisplay=a.formatAmount("0")},a.applyPayment=function(){if(parseInt(a.mlPaymentModel.cash.amount)>0){var c="CASH",d=b.result(b.find(a.mlPaymentModel.paymentTypes,"code",c),"name"),e={name:d,paymentType:d,paymentAmount:a.mlPaymentModel.cash.amountDisplay,code:c};a.mlPaymentModel.payments[c]=e,a.mlParentSubmit()}},a.submitForm=function(){a.applyPayment()},a.$on("processPayment",function(b,c){c===a.selectionType&&a.submitForm()}),a.$on("resetPaymentDisplay",function(b,c){c!==a.selectionType&&c||a.clearCash()}),a.init()}}})}(window.angular,window._),window.angular=window.angular||{},function(a,b){"use strict";a.module("pointOfSaleApplication").directive("mlPaymentCreditCardManual",function(){return{restrict:"E",templateUrl:"views/basket/PaymentCreditCardManual.html",scope:{mlPaymentModel:"=",paymentService:"=",mlParentSubmit:"&"},link:function(a){a.init=function(){a.selectionType="CREDIT_CARD_ENTRY",a.formSubmitted=!1,a.mlPaymentModel.creditCard=a.paymentService.getCreditCardOptions(),a.paymentService.getCreditCardTypes().then(function(b){a.mlPaymentModel.creditCard.types=b.data},function(a){console.log(a.data),console.log(a.data.errorMessage)})},a.$watch("mlPaymentModel.creditCard.number",function(b){a.ccTypeMatch(b)}),a.ccTypeMatch=function(b){var c,d,e,f="";if(a.mlPaymentModel.creditCard.types){for(e=0;e<a.mlPaymentModel.creditCard.types.length;e++)if(c=a.mlPaymentModel.creditCard.types[e],d=new RegExp(c.pattern),d.test(b)){f=c.value;break}a.mlPaymentModel.creditCard.type=f}},a.applyPayment=function(){var c="CARDPRESENT",d=b.result(b.find(a.mlPaymentModel.paymentTypes,"code",c),"name"),e={paymentType:d,creditCardNumber:a.mlPaymentModel.creditCard.number,creditCardExpiryMonth:a.mlPaymentModel.creditCard.expiryMonth.selectedOption,creditCardExpiryYear:a.mlPaymentModel.creditCard.expiryYear.selectedOption,creditCardType:a.mlPaymentModel.creditCard.type,cvv2:a.mlPaymentModel.creditCard.cvv,postalCode:a.mlPaymentModel.creditCard.postalCode,code:c,name:d};a.mlPaymentModel.payments[c]=e,a.mlParentSubmit()},a.submitForm=function(){a.formSubmitted=!0,a.paymentManualCreditCard.$valid?a.applyPayment():console.log("The form is NOT valid.")},a.$on("processPayment",function(b,c){c===a.selectionType&&a.submitForm()}),a.init()}}})}(window.angular,window._),window.angular=window.angular||{},function(a,b){"use strict";a.module("pointOfSaleApplication").directive("mlPaymentCreditCardSwipe",["$log","cardReaderService",function(a,c){return{restrict:"E",templateUrl:"views/basket/PaymentCreditCardSwipe.html",scope:{mlPaymentModel:"=",paymentService:"=",mlParentSubmit:"&",mlViewSelection:"=",mlChangeSelection:"&"},link:function(d){function e(a){for(var b=[],c=a,d=0;d<c.length;d++)if(c[d]==="	".charCodeAt(0))b[d]="\\t";else if(c[d]==="\n".charCodeAt(0))b[d]="\\n";else if(c[d]==="\r".charCodeAt(0))b[d]="\\r";else if(c[d]==="\\".charCodeAt(0))b[d]="\\\\";else if(c[d]>=32&&c[d]<=126)b[d]=String.fromCharCode(c[d]);else{var e=c[d].toString(16);b[d]="\\"+(1===e.length?"0":"")+e}return b.join("")}d.init=function(){a.debug("mlPaymentCreditCardSwipe: init"),d.selectionType="CREDIT_CARD_SWIPE",d.sdkIsActive=!1,d.readerIsConnected=!1,d.readerIsAttached=!1,d.isScanInError=!1,d.sdkActivation={},d.authInProgress=!1,d.authFailed=!1,d.authRequestIDs="",d.amountAuthorized="",d.authorizedCardType="",d.maskedCardNumber=""},d.initializeReader=function(){a.debug("mlPaymentCreditCardSwipe: initializeReader"),d.sdkIsActive?d.sdkIsActive&&d.readerIsConnected&&d.scanCard():d.nestedActivateSDK()},d.nestedActivateSDK=function(){a.debug("mlPaymentCreditCardSwipe: nestedActivateSDK");try{c.activateSDK().then(function(){a.debug("mlPaymentCreditCardSwipe: nestedActivateSDK: activateSDK: Success"),d.sdkIsActive=!0,c.readerConnect().then(function(){a.debug("mlPaymentCreditCardSwipe: nestedActivateSDK: readerConnect: Success"),d.readerIsConnected=!0,d.scanCard()},function(b){a.error("mlPaymentCreditCardSwipe: nestedActivateSDK: readerConnect: Failed"),a.error(b),d.readerIsConnected=!1})},function(b){a.error("mlPaymentCreditCardSwipe: nestedActivateSDK: activateSDK: Failed"),a.error(b),d.sdkIsActive=!1})}catch(b){a.error("mlPaymentCreditCardSwipe: nestedActivateSDK: Failed to activate/connect the card reader."),a.error(b)}},d.scanCard=function(){return a.debug("mlPaymentCreditCardSwipe: scanCard"),d.isScanInError=!1,d.sdkIsActive&&d.readerIsConnected?void c.scanCard().then(function(b){a.debug("mlPaymentCreditCardSwipe: scanCard: Success");var c=e(b);d.isScanInError=!1,d.authorizeCard(c)},function(b){a.error("mlPaymentCreditCardSwipe: scanCard: Failed "),a.error(b)}):void(d.isScanInError=!0)},d.authorizeCard=function(e){a.debug("mlPaymentCreditCardSwipe: authorizeCard"),d.authInProgress=!0,c.authorizeCard(d.mlPaymentModel.id,{trackData:e,payments:b.toArray(d.mlPaymentModel.payments)}).then(function(b){b.data.success?(a.debug("mlPaymentCreditCardSwipe: authorizeCard: Success"),d.authInProgress=!1,d.authFailed=!1,d.amountAuthorized=b.data.amountAuthorized,d.authRequestIDs=b.data.requestIDs,d.authorizedCardType=b.data.cardType,d.maskedCardNumber=b.data.maskedCreditCardNumber,d.mlChangeSelection({selection:"SIGNATURE"}),d.mlPaymentModel.authData={creditCardType:d.authorizedCardType,authRequestIDs:d.authRequestIDs}):(a.error("mlPaymentCreditCardSwipe: authorizeCard: Failed"),a.error(b.data.error),d.authInProgress=!1,d.authFailed=!0,d.scanCard())},function(b){a.error("mlPaymentCreditCardSwipe: authorizeCard: Failed"),a.error(b),d.authInProgress=!1,d.authFailed=!0,d.scanCard()})},d.applyPayment=function(){a.debug("mlPaymentCreditCardSwipe: applyPayment");var c="CARDPRESENT",e=b.result(b.find(d.mlPaymentModel.paymentTypes,"code",c),"name"),f={paymentType:e,paymentAmount:d.amountAuthorized,signatureVerified:!0,authRequestIDs:d.authRequestIDs,creditCardType:d.authorizedCardType,maskedCreditCardNumber:d.maskedCardNumber};d.mlPaymentModel.payments[c]=f,d.mlParentSubmit()},d.$watch("mlViewSelection",function(a){a===d.selectionType&&c.clearRunningTasks().then(function(){d.init(),d.initializeReader()})}),d.$on("processPayment",function(a,b){b===d.selectionType&&d.applyPayment()}),d.init()}}}])}(window.angular,window._),function(a){"use strict";a.module("pointOfSaleApplication").directive("paymentModal",function(){var a={};return a.restrict="E",a.templateUrl="views/basket/PaymentModal.html",a})}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").directive("productDetailModal",["$log","$location","dataStorageService","basketService","newOrderService",function(b,c,d,e,f){return{restrict:"E",templateUrl:"views/product/ProductDetailModal.html",controller:"productDetailController",link:function(g){a.element("#productDetailModal").on("show.bs.modal",function(){g.productId&&(g.model.initialized=!1,g.init(g.productId))}),g.closeProductDetailModal=function(){a.element("#productDetailModal").modal("hide")},g.cancelProductDetailModal=function(){a.element("#productDetailModal").modal("hide")},g.addItemToBasketAndReloadBasket=function(){if(g.model.addToBasketItem.storeID=d.getStoreId(),g.model.addToBasketItem.skuID=g.getSelectedSku(),null!==g.model.addToBasketItem.skuID&&g.model.stockAvailable&&g.model.addToBasketItem.qty>0)if(d.getCustomerId()||d.getBasketId()){var h=d.getBasketId();e.addItemToBasket(h,g.model.addToBasketItem).then(function(a){if(a){var b=c.path();"/basket"===b?g.$emit("reloadBasket"):c.path("/basket")}},function(a){b.error("An error occurred while adding item to the Basket."+a)})}else{var i="",j=d.getStore().id,k=d.getLoggedInCSR().id,l="";f.startNewOrder(i,j,k,l).then(function(f){if(f){b.debug("New Order Response : "+a.toJson(f));var h=d.getBasketId();e.addItemToBasket(h,g.model.addToBasketItem).then(function(a){a&&c.path("/basket")},function(a){b.error("An error occurred while adding item to the Basket."+a)})}},function(a){b.error("An error occured while starting new Order."+a)})}}}}}])}(window.angular),window.angular=window.angular||{},function(a,b){"use strict";a.module("pointOfSaleApplication").directive("mlProductOptions",function(){return{restrict:"A",templateUrl:"views/product/ProductOptions.html",scope:{options:"="},link:function(a){a.selectedSkus=null,a.activeOptionType=null,a.$watch("options",function(){a.selectedSkus=null,a.activeOptionType=null}),a.selectOption=function(c,d){var e;c.selectedOption=d,a.activeOptionType=c,e=a.isOptionSelectable(c,d),e?null===a.selectedSkus||a.firstOptionSelect()?a.selectedSkus=d.skuIDs:a.selectedSkus=b.intersection(a.selectedSkus,d.skuIDs):a.selectedSkus=d.skuIDs,a.selectedSkus&&a.$emit("productOptionChanged",{selectedSkus:a.selectedSkus})},a.firstOptionSelect=function(){var c,d;return c=a.options.length>1,d=b.filter(a.options,function(a){return null!==a.selectedOption}).length,c&&1>=d},a.isOptionSelectable=function(c,d){var e=!0;return null!=a.activeOptionType&&null!==a.selectedSkus&&(c!==a.activeOptionType?e=b.intersection(a.selectedSkus,d.skuIDs).length>0:c===a.activeOptionType&&(e=a.firstOptionSelect()?!0:b.intersection(a.selectedSkus,d.skuIDs).length>0)),e}}}})}(window.angular,window._),function(a){"use strict";a.module("pointOfSaleApplication").directive("productSearchModal",["$timeout",function(b){return{restrict:"E",templateUrl:"views/search/ProductSearchModal.html",controller:"productSearchModalController",link:function(c,d){a.element("#productSearchModal").on("shown.bs.modal",function(){a.element("#productSearchKeyword").focus()}),d.find(".modal:first").on("hidden.bs.modal",function(){b(c.closeProductSearchModal,0)})}}}])}(window.angular),window.angular=window.angular||{},function(a){"use strict";a.module("pointOfSaleApplication").directive("receiptModal",function(){return{restrict:"E",templateUrl:"views/basket/ReceiptModal.html",controller:"receiptModalController",link:function(b,c){b.manageSelection=function(a){return"print"===a&&b.receiptDataModel.deviceName!==b.noDevice?void(b.receiptDataModel.printSelected=!b.receiptDataModel.printSelected):void("email"===a&&(b.receiptDataModel.emailSelected=!b.receiptDataModel.emailSelected,b.buttonClicked=!1))},c.find(".modal:first").on("hidden.bs.modal",function(){b.update(),b.$emit("order-confirm",b.obj),a.element("#orderConfirmationModal").modal("show")})}}})}(window.angular),window.angular=window.angular||{},function(a){"use strict";a.module("pointOfSaleApplication").directive("mlBarcodeSearch",["$location","$log","$timeout","scanBarcodeService","dataStorageService",function(a,b,c,d,e){return{restrict:"E",templateUrl:"views/common/ScanBarcode.html",scope:{modalTitle:"@",serviceUrl:"@",servicePostData:"=",forwardUrl:"@",displayAsModal:"@",createBasket:"@",scanCallback:"&",scanSuccessCallback:"&",continueBtnResource:"@",cancelBtnResource:"@",multiAddMsgResource:"@",multiAddCountResource:"@"},link:function(f,g){f.init=function(){b.debug("mlBarcodeSearch: init"),f.deviceStatus="",f.deviceConnected=!1,f.scanningValue="",f.scannedValue="",f.stopPolling=!1,f.searchInProgress=!1,f.searchError=!1,f.canContinue=!1,f.itemFoundCount=0,f.servicePostData=f.servicePostData||{},f.createBasket&&(f.servicePostData.basketId=e.getBasketId()||null,f.servicePostData.storeId=e.getStoreId()||null,e.getLoggedInCSR()&&e.getLoggedInCSR().id?f.servicePostData.csrId=e.getLoggedInCSR().id:f.servicePostData.csrId=null),f.pollForConnection()},f.$watch("deviceConnected",function(a){a===!0&&f.pollForScannedValue()}),f.$watch("scanningValue",function(a,c){a&&"no value"!==a.toLowerCase()&&"no value available"!==a.toLowerCase()&&c&&!f.searchInProgress&&(b.debug("mlBarcodeSearch: watch: scanningValue: newValue: "+a),b.debug("mlBarcodeSearch: watch: scanningValue: lastValue: "+c),f.scannedValue=a,f.sendBarcode())}),f.sendBarcode=function(){if(!f.searchInProgress){var c=f.serviceUrl.replace(/UPC_CODE/g,f.scannedValue);b.debug("mlBarcodeSearch: sendBarcode: serviceUrl: "+c),b.debug("mlBarcodeSearch: sendBarcode: scannedValue: "+f.scannedValue),f.searchError=!1,f.searchInProgress=!0,f.scanCallback&&f.scanCallback({code:f.scannedValue}),d.sendBarcode(c,f.servicePostData).then(function(c){b.debug("mlBarcodeSearch: sendBarcode: Success"),f.searchInProgress=!1,f.canContinue=!0,f.itemFoundCount++,c.data.basketId&&(f.servicePostData.basketId=c.data.basketId),f.continueBtnResource||f.hideScanDialog(),"true"===f.createBasket&&(e.setBasketId(c.data.basketId),e.setCustomerId(c.data.customerId)),f.scanSuccessCallback&&f.scanSuccessCallback(),f.forwardUrl&&!f.continueBtnResource&&a.path(f.forwardUrl)},function(a){b.error("mlBarcodeSearch: sendBarcode: Failed"),b.error(a),f.searchInProgress=!1,f.searchError=!0})}},f.pollForConnection=function(){f.deviceConnected||f.stopPolling||c(f.getDeviceStatus,500)},f.pollForScannedValue=function(){f.deviceConnected&&!f.stopPolling&&c(f.getScannedValue,500)},f.getDeviceStatus=function(){try{d.getDeviceStatus().then(function(a){b.debug("mlBarcodeSearch: getDeviceStatus: Success"),f.deviceStatus=a,a&&"connected"===a.toLowerCase()?f.deviceConnected=!0:f.pollForConnection()},function(a){b.error("mlBarcodeSearch: getDeviceStatus: Failed"),b.error(a),f.deviceStatus="Error"})}catch(a){b.error("mlBarcodeSearch: getDeviceStatus: Failed"),b.error(a)}},f.getScannedValue=function(){d.getScannedValue().then(function(a){b.debug("mlBarcodeSearch: getScannedValue: Success"),
f.scanningValue=a,f.pollForScannedValue()},function(a){b.error("mlBarcodeSearch: getScannedValue: Failed"),b.error(a),f.scannedValue="Error"})},f.showScanDialog=function(){f.init(),g.find(".modal:first").modal("show")},f.hideScanDialog=function(){f.stopPolling=!0,g.find(".modal:first").modal("hide")},f["continue"]=function(){f.canContinue&&(f.hideScanDialog(),f.forwardUrl&&a.path(f.forwardUrl))},g.find(".modal:first").on("hidden.bs.modal",function(){f.stopPolling=!0})}}}])}(window.angular),window.angular=window.angular||{},function(a){"use strict";a.module("pointOfSaleApplication").directive("mlBarcodeSearchBody",[function(){return{restrict:"E",templateUrl:"views/common/ScanBarcodeBody.html",link:function(){}}}])}(window.angular),function(a){"use strict";a.module("pointOfSaleApplication").directive("shippingAddressAndMethodModal",function(){return{restrict:"E",templateUrl:"views/basket/ShippingAddressAndMethodModal.html",controller:"shippingAddressAndMethodModalController",link:function(){a.element("#shippingAddressAndMethodModal").on("shown.bs.modal",function(){})}}})}(window.angular),function(a){"use strict";a.module("ngIOS9UIWebViewPatch",["ng"]).config(["$provide",function(a){a.decorator("$browser",["$delegate","$window",function(a,b){function c(a){return/(iPhone|iPad|iPod).* OS 9_\d/.test(a)&&!/Version\/9\./.test(a)}function d(a){function b(){c=null}var c=null,d=a.url;return a.url=function(){return arguments.length?(c=arguments[0],d.apply(a,arguments)):c||d.apply(a,arguments)},window.addEventListener("popstate",b,!1),window.addEventListener("hashchange",b,!1),a}return c(b.navigator.userAgent)?d(a):a}])}])}(window.angular),angular.module("pointOfSaleApplication").run(["$templateCache",function(a){"use strict";a.put("views/basket/AddCouponCodeModal.html",'<div class="ml-ppos-modal-container ml-ppos-product-search-wrapper">\n	<div class="modal" id="addCouponCodeModal" tabindex="-1" role="dialog" aria-hidden="true">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-ng-click="closeAddCouponCodeModal()" aria-label="Close"><span aria-hidden="true"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\n					<h4 class="modal-title">Add Coupon / Promotion</h4>\n				</div>\n	  \n				<form novalidate data-ng-submit="addCouponCode()">\n					<div class="modal-body">\n						<div data-ng-show="addCouponCodeDataModel.showAddCouponCodeError" class="ml-ppos-error-container">\n							<div class="ml-icon-error"></div>\n							<div class="ml-ppos-error-message">\n								{{ addCouponCodeDataModel.addCouponCodeErrorMessage }}\n							</div>\n						</div>\n\n						<div class="ml-ppos-product-search-head">Enter Coupon / Promotion</div>\n\n						<div class="ml-ppos-product-search-label-content">\n							<input type="text" name="couponCode" id="couponCode" class="form-control" placeholder="Coupon Code" data-ng-model="addCouponCodeDataModel.couponCode" />\n						</div>\n					</div>\n					\n					<div class="modal-footer ml-ppos-button-product-search">\n						<div><button type="submit" name="addCouponButton" id="addCouponButton" class="ml-ppos-primary-button">Add Coupon</button></div>\n						<div><button type="button" class="ml-ppos-secondary-button" data-ng-click="closeAddCouponCodeModal()" translate="btn.ppos.cancel" translate="btn.ppos.cancel"></button></div>\n					</div>\n				</form>\n			</div>\n		</div>\n	</div>\n</div>\n'),a.put("views/basket/Basket.html",'<div class="ml-ppos-basket-wrapper" data-ng-controller="basketController">\n	<div class="ml-ppos-basket-container">\n		<div class="ml-ppos-basket-detail-container">\n			<div class="ml-ppos-basket-order-number"><span translate="lbl.ppos.basketNumber"></span> {{ basketDetailDataModel.data.id }}</div>\n			<!-- Basket row head -->\n			<div data-ng-controller="shippingAddressAndMethodModalController">\n				<input type="hidden" id="hiddenOpener" data-ng-click="showShippingAddressAndMethodModal(); $event.stopPropagation();">\n				<shipping-address-and-method-modal></shipping-address-and-method-modal>\n			</div>\n			<div class="ml-ppos-basket-head-item-row">\n				<div class="ml-ppos-basket-head-info" translate="hdr.ppos.productDetail"></div>\n				<div class="ml-ppos-basket-head-price" translate="hdr.ppos.price"></div>\n				<!--<div class="ml-ppos-basket-head-adjustment" translate="hdr.ppos.adjustment"></div>-->\n				<div class="ml-ppos-basket-head-quantity" translate="hdr.ppos.qty"></div>\n				<div class="ml-ppos-basket-head-total" translate="hdr.ppos.total"></div>\n				<div class="ml-ppos-basket-head-close-button"></div>\n			</div>\n			<!-- Basket row head End -->\n			<div class="ml-ppos-scroll-container">\n				<div data-ng-repeat="basketShipment in basketDetailDataModel.data.shipments">\n					<div data-ng-repeat="basketItem in basketShipment.items">\n						<!-- Basket item row start -->\n						<div class="ml-ppos-basket-items-row-container">\n							<div class="ml-ppos-basket-items-row">\n								<div class="ml-ppos-basket-item-info">\n									<div class="ml-ppos-basket-item-thumb"><img src="{{basketItem.product.image.thumb}}" data-ng-click="viewProductDetail(basketItem.product.id)" /></div>\n									<div class="ml-ppos-basket-item-thumb-detail">\n										<div>\n											<div data-ng-click="viewProductDetail(basketItem.product.id)">{{ basketItem.product.name }}</div>\n											<div><span translate="lbl.ppos.style"></span> {{ basketItem.skuCode }}</div>\n											<div data-ng-repeat="option in basketItem.options">\n												<div>{{ option.optionType }}: {{ option.name }}</div>\n											</div>\n										</div>\n										<!-- Pickup or ship to section starts-->\n										<div class="ml-ppos-basket-shipment-container">\n											<div data-ng-if="basketItem.store.id != currentStore.id"><!--  show div if item is not from current store -->\n												<div class="ml-ppos-basket-shipment-options">\n													<label>\n														<input type="radio" data-ng-click="setItemAsShipTo(basketDetailDataModel.data.id, basketItem)" name="radioShipToPickup_{{basketItem.id}}" id="radioShipToPickup_{{basketItem.id}}" value="shipTo" data-ng-checked="!basketItem.isPickupFromStore" data-ng-disabled="!basketItem.isAvailableOnline">\n														<div for="radioShipToPickup_{{basketItem.id}}"><i></i>\n															<span data-ng-if="basketItem.isAvailableOnline" translate="lbl.ppos.shipToAvailable"/>\n															<span data-ng-if="!basketItem.isAvailableOnline" translate="lbl.ppos.shipToNotAvailable"/></div>\n													</label>\n												\n													<label>\n														<input type="radio" data-ng-click="setItemAsPickup(basketDetailDataModel.data.id, basketItem)" name="radioShipToPickup_{{basketItem.id}}" id="radioShipToPickup_{{basketItem.id}}" value="pickupInStore" data-ng-checked="basketItem.isPickupFromStore" data-ng-disabled="!basketItem.isAvailableInStore">\n														<div for="radioShipToPickup_{{basketItem.id}}"><i></i>\n														<span data-ng-if="basketItem.isAvailableInStore && basketItem.isPickupFromStore">\n															<span class="ml-ppos-basket-shipment-pickup-store-info" translate="msg.ppos.pickupItemInfo" translate-values="{ storeCity: basketItem.store.city, storeCode: basketItem.store.code }"/>\n														</span>\n														<span data-ng-if="basketItem.isAvailableInStore && !basketItem.isPickupFromStore" translate="lbl.ppos.pickupAvailable"/>\n														<span data-ng-if="!basketItem.isAvailableInStore" translate="lbl.ppos.pickupNotAvailable"/></div> <!-- Change link will be displaed in phase 2 -->\n													</label>\n												</div>\n											</div>\n											<div data-ng-if="basketItem.store.id == currentStore.id">\n												<div>\n													<span translate="lbl.ppos.puchasedStore"/> {{currentStore.name | translate }} ({{basketItem.store.code | translate }})\n												</div>\n											</div>\n										</div>\n										<!-- Pickup or ship to section ends-->\n									</div>\n								</div>\n\n								<div data-ng-switch on="basketItem.freeGift" class="ml-ppos-basket-item-price">\n									<div data-ng-switch-when="true">Free Gift</div>\n									<div data-ng-switch-default>{{ basketItem.regularPrice }}</div>\n								</div>\n\n								<!--<div class="ml-ppos-basket-item-adjustment">\n									<div data-ng-hide="basketItem.discounts.length"><a href=""><span class="ml-ppos-mini-white-icon ml-ppos-plus"></span></a></div>\n									<div data-ng-show="basketItem.discounts.length">-{{ basketItem.discountTotal }}</div>\n								</div>-->\n								\n								<div class="ml-ppos-basket-item-quantity">\n									<div data-ng-switch on="basketItem.freeGift">\n										<div data-ng-switch-when="true" class="ml-ppos-quantity-spinner-wrapper">\n											{{ basketItem.qty }}\n											<input type="hidden" data-ng-value="basketItem.qty" name="qty_{{ basketItem.id }}" id="qty_{{ basketItem.id }}" size="2" maxlength="2" />\n										</div>\n										<div data-ng-switch-default class="ml-ppos-quantity-spinner-wrapper">\n											<ml-numeric-spinner data-mapped-value="basketItem.qty" data-max-length="2"></ml-numeric-spinner>\n										</div>\n									</div>\n\n									<div data-ng-show="!basketItem.freeGift">\n										<div class="ml-ppos-basket-button-update"><a href="javascript:;" data-ng-click="updateBasketItem(basketDetailDataModel.data.id, basketItem.id, basketItem.product.id,  basketItem.skuID, basketItem.qty, basketItem.store)" translate="btn.ppos.update"></a></div>\n									</div>\n								</div>\n\n								<div data-ng-switch on="basketItem.freeGift" class="ml-ppos-basket-item-total">\n									<div data-ng-switch-when="true">Free Gift</div>\n									<div data-ng-switch-default>{{ basketItem.subTotal }}</div>\n								</div>\n\n								<div data-ng-show="!basketItem.freeGift">\n									<div class="ml-ppos-basket-item-close-button"><a href="" data-ng-click="removeItemFromBasket(basketDetailDataModel.data.id, basketItem.id)"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></a></div>\n								</div>\n							</div>\n							<div class="ml-ppos-basket-item-discount" data-ng-repeat="basketItemDiscount in basketItem.discounts">\n								<div class="ml-ppos-basket-item-discount-message">\n									{{ basketItemDiscount.message }}<!--  <span>-{{ basketItemDiscount.amount }}</span> -->\n								</div>\n							</div>\n						</div>\n						<!-- Basket item row End -->\n					</div>\n				</div>\n			</div>\n		</div>\n		<div class="ml-ppos-basket-nav-container">\n			<div class="ml-ppos-basket-header-customer">\n				<div class="ml-ppos-default-header-wrapper">\n					<span>\n						<a href="javascript:;" data-ng-click="customerProfileInformationModal(\'update\');">\n							<div class="ml-ppos-default-header-message">{{ customerInformation }}</div>\n							<div class="ml-ppos-default-header-icon"><span class="ml-ppos-mini-white-icon ml-ppos-plus"></span></div>\n						</a>\n					</span>\n					<customer-profile-information-modal></customer-profile-information-modal>\n				</div>\n			</div>\n			\n			<div class="ml-ppos-basket-sub-head" translate="lbl.ppos.product"></div>\n			<div class="ml-ppos-basket-product-search-row">\n				<div class="ml-ppos-product-scan">\n					<ml-barcode-search data-display-as-modal="true"\n									   data-modal-title="Product Scan"\n									   data-service-url="/api/scan/skus/UPC_CODE"\n									   data-service-post-data="skuBarcodeSearchPostData"\n									   data-scan-success-callback="scanSuccessHandler()"\n									   data-cancel-btn-resource="btn.ppos.close"\n									   data-continue-btn-resource="btn.ppos.done"\n									   data-multi-add-msg-resource="msg.ppos.itemWithCodeAddedToBasket"\n									   data-multi-add-count-resource="msg.ppos.scanAnotherProduct"\n							></ml-barcode-search>\n				</div>\n				<div class="ml-ppos-basket-product-search">\n					<div>\n						<a href="javascript:;" class="ml-ppos-basket-product-search-button" data-toggle="modal" data-target="#productSearchModal"><span class="ml-ppos-grey-icon ml-ppos-search"></span><span translate="btn.ppos.searchProduct"></span></a>\n						<product-search-modal></product-search-modal>\n						<product-detail-modal></product-detail-modal>\n						<near-by-stores-modal></near-by-stores-modal>\n					</div>\n				</div>\n			</div>\n\n			<!-- Don\'t show apply coupon code section, summary section, place order and adjustment if there are no items in the basket. -->\n			<div data-ng-if="basketDetailDataModel.data.shipments.length">\n				<div class="ml-ppos-basket-sub-head" translate="lbl.ppos.couponPromotion"></div>\n				<div class="ml-ppos-basket-product-coupon-row">\n					<!-- <div class="ml-ppos-basket-product-scan">\n						<a href="javascript:;" class="ml-ppos-basket-product-scan-button"><span class="ml-ppos-grey-icon ml-ppos-scan-barcode"></span><span translate="btn.ppos.scanCouponBarcode"></span></a>\n					</div> -->\n					<div class="ml-ppos-basket-product-typein">\n						<div data-ng-controller="addCouponCodeModalController">\n							<a href="javascript:;" class="ml-ppos-basket-product-typein-button" data-toggle="modal" data-target="#addCouponCodeModal"><span translate="btn.ppos.typeIn"></span><span class="ml-ppos-grey-icon ml-ppos-typein"></span></a>\n							<add-coupon-code-modal></add-coupon-code-modal>\n						</div>\n					</div>\n				</div>\n\n				<div class="ml-ppos-basket-coupon-message">\n					<div data-ng-repeat="sourceCode in basketDetailDataModel.data.sourceCodeInfoList" class="ml-ppos-default-header-wrapper" data-ng-if="!sourceCode.discountAmountZero">\n						<div class="ml-ppos-default-header-message"><span translate="msg.ppos.appliedCouponCodeWithAmount" translate-values="{ couponCode : sourceCode.code}"></span>{{ sourceCode.discountAmount }}</div>\n						<div class="ml-ppos-default-header-icon"><a href="" data-ng-click="removeSourceCode(basketDetailDataModel.data.id, sourceCode.code)"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></a></div>\n					</div>\n				</div>\n\n				<div class="ml-ppos-basket-summary-row">\n					<div class="ml-ppos-basket-sub-head" translate="lbl.ppos.summaryOfCharges"></div>\n					<div class="ml-ppos-scroll-container">	\n						<div class="ml-ppos-basket-summary-content">\n							<div class="ml-ppos-basket-summary-label" translate="lbl.ppos.merchandiseSubtotalAmount"></div>\n							<div class="ml-ppos-basket-summary-value">{{ basketDetailDataModel.data.merchandiseTotal }}</div>\n						</div>\n						<div class="ml-ppos-basket-summary-content" data-ng-repeat="basketDiscount in basketDetailDataModel.data.discounts">\n							<div class="ml-ppos-basket-summary-label">{{ basketDiscount.message }}:</div>\n							<div class="ml-ppos-basket-summary-value">-{{ basketDiscount.amount }}</div>\n						</div>\n						<div class="ml-ppos-basket-summary-content">\n							<div class="ml-ppos-basket-summary-label" translate="lbl.ppos.subtotalAmount"></div>\n							<div class="ml-ppos-basket-summary-value">{{ basketDetailDataModel.data.subTotal }}</div>\n						</div>\n						<div class="ml-ppos-basket-summary-content">\n							<div class="ml-ppos-basket-summary-label" translate="lbl.ppos.taxAmount"></div>\n							<div class="ml-ppos-basket-summary-value">{{ basketDetailDataModel.data.taxTotal }}</div>\n						</div>\n						<div class="ml-ppos-basket-summary-content">\n							<div class="ml-ppos-basket-summary-label" translate="lbl.ppos.shippingAmount"></div>\n							<div class="ml-ppos-basket-summary-value">{{ basketDetailDataModel.data.shippingTotal }}</div>\n						</div>\n						<div data-ng-repeat="basketShipment in basketDetailDataModel.data.shipments">\n							<div  class="ml-ppos-basket-summary-content" data-ng-repeat="basketShipmentDiscount in basketShipment.discounts" data-ng-if="!basketShipment.pickupFromStore">\n								<div class="ml-ppos-basket-summary-label" data-ng-if="!basketShipmentDiscount.discountAmountZero">{{ basketShipmentDiscount.message }}:</div>\n								<div class="ml-ppos-basket-summary-value" data-ng-if="!basketShipmentDiscount.discountAmountZero">-{{ basketShipmentDiscount.amount }}</div>\n							</div>\n						</div>\n						<!-- \n						<div class="ml-ppos-basket-summary-content">\n							<div class="ml-ppos-basket-summary-label" translate="lbl.ppos.adjustmentAmount"></div>\n							<div class="ml-ppos-basket-summary-value"></div>\n						</div>-->\n					</div> \n					<div class="ml-ppos-basket-summary-total-content">\n						<div class="ml-ppos-basket-summary-label" translate="lbl.ppos.totalAmount"></div>\n						<div class="ml-ppos-basket-summary-value">{{ basketDetailDataModel.data.total }}</div>\n					</div>\n				</div>\n				<div class="ml-ppos-basket-button-row" data-ng-controller="paymentController">\n					<div class="ml-ppos-basket-button-place-order">\n						<span class="ml-ppos-btn-inner">\n							<span class="ml-ppos-btn-text" translate="btn.ppos.placeOrder"></span>\n							<span class="ml-ppos-btn ml-ppos-mini-grey-icon ml-ppos-arrow-right"></span>\n						</span>\n						<button type="submit" class="ml-ppos-btn-hidden" data-ng-click="showPaymentModal(basketDetailDataModel.data.id, basketDetailDataModel.data.total)" id="btnOpenPymtModal" translate="btn.ppos.placeOrder"></button>\n					</div>\n					<payment-modal></payment-modal>\n				</div>\n\n                <!-- Receipt Start -->\n                <div class="ml-ppos-dashboard-bag-widget-button-wrapper">\n                    <receipt-modal></receipt-modal>\n                </div>\n                <!-- Receipt End -->\n\n                <div class="ml-ppos-dashboard-order-confirm-widget-button-wrapper">\n                    <order-confirmation-modal></order-confirmation-modal>\n                </div>\n\n                <!-- NOTE: PEBL-15818 Item Level adjustment is in phase 2 of PPOS -->\n				<!--<div class="ml-ppos-basket-button-row">\n					<div class="ml-ppos-basket-button-adjustment"><a href="javascript:;" translate="btn.ppos.adjustment"></a></div>\n				</div>-->\n			</div>\n\n			<div class="ml-ppos-basket-button-row" data-ng-if="!basketDetailDataModel.isAutoSaveBag">\n				<div class="ml-ppos-basket-button-save-bag" data-ng-show="!basketDetailDataModel.data.csrID"><a href="javascript:;" data-ng-click="saveBag(basketDetailDataModel.data.id)"><span translate>btn.ppos.saveBag</span> <i class="ml-ppos-mini-white-icon ml-ppos-circle-bag"></i></a></div>\n				<div class="ml-ppos-basket-button-save-bag" data-ng-show="basketDetailDataModel.data.csrID"><a href="javascript:;"><span translate>btn.ppos.saved</span> <i class="ml-ppos-mini-white-icon ml-ppos-circle-bag"></i></a></div>\n			</div>\n\n			<!-- Save Bag Success Message -->\n			<div class="ml-ppos-modal-container ml-ppos-product-search-wrapper">\n				<div class="modal" id="saveBagSuccessModal" tabindex="-1" role="dialog" aria-hidden="true">\n					<div class="modal-dialog">\n						<div class="modal-content">\n\n							<div class="modal-body">\n								<div class="ml-ppos-error-container">\n									<div class="ml-icon-success"></div>\n									<div class="ml-ppos-error-message">\n										<div translate>btn.ppos.shoppingBagSavedMessage</div>\n									</div>\n								</div>\n							</div>\n							\n							<div class="modal-footer ml-ppos-button-product-search">\n								<div><button type="submit" name="saveBagSuccessOkButton" id="saveBagSuccessOkButton" data-dismiss="modal" class="ml-ppos-primary-button" translate="btn.ppos.ok"></button></div>\n							</div>\n\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n'),a.put("views/basket/OrderConfirmationModal.html",'<div class="ml-ppos-modal-container ml-ppos-customer-search-wrapper">\n    <div class="modal" id="orderConfirmationModal" tabindex="-1" role="dialog" aria-hidden="true">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <button type="button" class="close" data-ng-click="close()" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\n                    <h4 class="modal-title"><span translate="lbl.ppos.orderNo"></span>&nbsp;{{orderConfirmationDataModel.orderid}}</h4>\n                </div>\n\n                <form name="receiptForm" novalidate data-ng-submit="">\n                    <div class="modal-body" class="form-control">\n\n                        <div class="ml-ppos-customer-search-head ng-scope" style="text-align:center;border-top:1px solid #8da5d1;padding-top:30px;padding-bottom:30px">\n                            <div data-ng-if="orderConfirmationDataModel.printSelected"><span translate="lbl.ppos.receiptReadyOn"></span>&nbsp;{{orderConfirmationDataModel.deviceName}}</div>\n                               <p/>\n                            <div data-ng-if="orderConfirmationDataModel.emailSelected"><span translate="lbl.ppos.receiptHasBeenSentTo"></span>&nbsp;{{orderConfirmationDataModel.email}}</div>\n\n                            <div data-ng-if="!orderConfirmationDataModel.printSelected && !orderConfirmationDataModel.emailSelected"><span translate="lbl.ppos.orderConfirmationMessage"></span></div>\n\n                           </div>\n                        <div class="modal-footer ml-ppos-button-customer-search" style="border-top:1px solid #8da5d1;">\n                        <button type="button" class="ml-ppos-secondary-button" data-ng-click="close()" data-dismiss="modal"><span translate="btn.ppos.done"></span></button>\n                        </div>\n\n\n                    </div>\n                </form>\n\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("views/basket/PaymentCash.html",'<!-- PaymentCash.html | (c) 2015 MarketLive, Inc. | All Rights Reserved -->\n\n<div>\n    <div class="ml-ppos-payment-cash-entry">{{mlPaymentModel[\'cash\'].amountDisplay}}</div>\n    <div class="ml-ppos-cash-key-pad">\n        <div class="ml-ppos-cash-key-wrapper" ng-repeat="button in mlPaymentModel.cash.buttons track by $index" ng-click="selectCashKey(button.value)">\n            <div class="ml-ppos-cash-key" ng-class="{ \'ml-ppos-cash-key-delete\' : button.label == \'Delete\' }">{{button.label}}</div>\n        </div>\n    </div>\n</div>\n'),a.put("views/basket/PaymentCreditCardManual.html",'<!-- PaymentCreditCardManual.html | (c) 2015 MarketLive, Inc. | All Rights Reserved -->\n\n<div>\n    <form name="paymentManualCreditCard" ng-submit="submitForm()" novalidate>\n        <!-- Credit Card Number -->\n        <div class="ml-ppos-payment-card-number ml-ppos-payment-form-field-delimiter">\n            <label for="creditCardNumber"><span>*</span> <span translate="lbl.ppos.creditCardNumber"></span></label>\n            <input type="text" class="form-control" id="creditCardNumber" name="creditCardNumber"\n                   data-ng-model="mlPaymentModel.creditCard.number" size="16" maxlength="16" required>\n            <input type="hidden" id="creditCardType" name="creditCardType" ng-model="mlPaymentModel.creditCard.type"\n                   required>\n            <!-- Validation Messages -->\n            <div class="ml-ppos-payment-error"\n                 ng-show="paymentManualCreditCard.creditCardNumber.$error.required && formSubmitted"\n                 translate="msg.ppos.fieldRequiredError"></div>\n            <div class="ml-ppos-payment-error"\n                 ng-show="paymentManualCreditCard.creditCardNumber.$valid && paymentManualCreditCard.creditCardType.$error.required && formSubmitted"\n                 translate="msg.ppos.creditCardNotSupportedError"></div>\n        </div>\n\n        <!-- Expiry Month and Year -->\n        <div class="ml-ppos-payment-form-content ml-ppos-payment-form-field-delimiter">\n            <fieldset>\n                <legend><span>*</span> <span translate="lbl.ppos.expirationDate"></span></legend>\n                <!-- Expiry Month -->\n                <div class="ml-ppos-payment-card-month">\n                    <select class="form-control"\n                            id=creditCardExpiryMonth\n                            name="creditCardExpiryMonth"\n                            ng-model="mlPaymentModel.creditCard.expiryMonth.selectedOption"\n                            ng-options="option.value as option.label for option in mlPaymentModel.creditCard.expiryMonth.options"\n                            required>\n                        <option value="" translate="sel.ppos.month"></option>\n                    </select>\n                </div>\n                <!-- Expiry Year -->\n                <div class="ml-ppos-payment-card-year">\n                    <select class="form-control"\n                            name="creditCardExpiryYear"\n                            ng-model="mlPaymentModel.creditCard.expiryYear.selectedOption"\n                            ng-options="option.value as option.label for option in mlPaymentModel.creditCard.expiryYear.options"\n                            required>\n                        <option value="" translate="sel.ppos.year"></option>\n                    </select>\n                </div>\n                <!-- Validation Messages -->\n                <div class="ml-ppos-payment-error"\n                     ng-show="(paymentManualCreditCard.creditCardExpiryMonth.$error.required || paymentManualCreditCard.creditCardExpiryYear.$error.required) && formSubmitted"\n                     translate="msg.ppos.fieldsRequiredError"></div>\n            </fieldset>\n        </div>\n\n        <!-- CVV -->\n        <div class="ml-ppos-payment-card-cvv ml-ppos-payment-form-field-delimiter">\n            <label for="creditCardCVV"><span>*</span> <span translate="lbl.ppos.cardIdentification"></span></label>\n            <input type="text" class="form-control" id="creditCardCVV" name="creditCardCVV"\n                   data-ng-model="mlPaymentModel.creditCard.cvv" maxlength="4" required>\n            <!-- Validation Messages -->\n            <div class="ml-ppos-payment-error"\n                 ng-show="paymentManualCreditCard.creditCardCVV.$error.required && formSubmitted"\n                 translate="msg.ppos.fieldRequiredError"></div>\n        </div>\n\n        <!-- Zip/Postal Code -->\n        <div class="ml-ppos-payment-card-zip ml-ppos-payment-form-field-delimiter">\n            <label for="creditCardPostalCode"><span>*</span> <span translate="lbl.ppos.billingZipCode"></span></label>\n            <input type="text" class="form-control" id="creditCardPostalCode" name="creditCardPostalCode"\n                   data-ng-model="mlPaymentModel.creditCard.postalCode" maxlength="10" required>\n            <!-- Validation Messages -->\n            <div class="ml-ppos-payment-error"\n                 ng-show="paymentManualCreditCard.creditCardPostalCode.$error.required && formSubmitted"\n                 translate="msg.ppos.fieldRequiredError"></div>\n        </div>\n    </form>\n</div>\n'),a.put("views/basket/PaymentCreditCardSwipe.html",'<!-- PaymentCreditCardSwipe.html | (c) 2015 MarketLive, Inc. | All Rights Reserved -->\n\n<div class="ml-ppos-payment-method-credit-scan-content">\n    <!-- Connecting to the Device -->\n    <div data-ng-show="!sdkIsActive || !readerIsConnected">\n        <div class="ml-ppos-error-container">\n            <div class="ml-ppos-error-message">\n                <div translate="msg.ppos.connecting"></div>\n            </div>\n        </div>\n        <div class="ml-ppos-payment-method-credit-scan-icons">\n            <span class="ml-icon-lib ml-icon-circle-o-notch ml-icon-spin"></span><span\n                class="ml-icon-lib ml-icon-credit-card disabled"></span>\n        </div>\n    </div>\n\n    <!-- Device Already Connected -->\n    <div class="ml-scan-section" data-ng-show="sdkIsActive && readerIsConnected">\n        <!-- Ready to Scan -->\n        <div class="ml-scan-section" data-ng-show="!authInProgress && !authFailed">\n            <div class="ml-ppos-error-container">\n                <div class="ml-ppos-error-message">\n                    <div translate="msg.ppos.swipeCard"></div>\n                </div>\n            </div>\n            <div class="ml-ppos-payment-method-credit-scan-icons">\n                <span class="ml-icon-lib ml-icon-long-arrow-down"></span><span\n                    class="ml-icon-lib ml-icon-credit-card ml-ppos-credit-card-icon"></span>\n            </div>\n        </div>\n\n        <!-- Card Auth in Progress -->\n        <div class="ml-scan-section" data-ng-show="authInProgress">\n            <div class="ml-ppos-error-container">\n                <div class="ml-ppos-error-message">\n                    <div translate="msg.ppos.authorizingCard"></div>\n                </div>\n            </div>\n            <div class="ml-ppos-payment-method-credit-scan-icons">\n                <span class="ml-icon-lib ml-icon-circle-o-notch ml-icon-spin"></span><span\n                    class="ml-icon-lib ml-icon-credit-card disabled"></span>\n            </div>\n        </div>\n\n        <!-- Auth Failed -->\n        <div class="ml-scan-section" data-ng-show="!authInProgress && authFailed">\n            <div class="ml-ppos-error-container">\n                <div class="ml-icon-error"></div>\n                <div class="ml-ppos-error-message">\n                    <div translate="msg.ppos.processingCardError"></div>\n                </div>\n            </div>\n            <div class="ml-ppos-payment-method-credit-scan-icons">\n                <span class="ml-icon-lib ml-icon-long-arrow-down error"></span><span\n                    class="ml-icon-lib ml-icon-credit-card ml-ppos-credit-card-icon"></span>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("views/basket/PaymentModal.html",'<!-- PaymentModal.html | (c) 2015 MarketLive, Inc. | All Rights Reserved -->\n\n<div class="ml-ppos-modal-container">\n    <div class="modal" id="paymentModal" tabindex="-1" role="dialog" aria-hidden="true">\n        <div class="modal-dialog">\n            <div class="modal-content" ng-class="{ \'ml-ppos-signature-content\' : selection == \'SIGNATURE\' }">\n                <!-- Modal Dialog Header -->\n                <div class="modal-header">\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\n                    <h4 class="modal-title ml-ppos-payment-modal-total" ng-show="selection == \'SIGNATURE\'"><span>{{model.total}}</span></h4>\n                    <h4 class="modal-title"><span translate="hdr.ppos.basketNumber"></span>: <span>{{model.id}}</span></h4>\n                </div>\n\n                <!-- Modal Dialog Body -->\n                <div class="modal-body">\n                    <div class="ml-ppos-payment-display" ng-class="{ \'active\' : showDefaultLayout() }">\n                        <div class="ml-ppos-payment-method">\n                            <!-- Payment Type Selection -->\n                            <div class="ml-ppos-payment-selection" ng-class="{ \'active\' : selection == \'PAYMENT_SELECTION\' }">\n                                <div class="ml-ppos-payment-method-label"><span translate="msg.ppos.selectPaymentMethod"></span></div>\n                                <div class="ml-ppos-payment-method-item" ng-repeat="type in model.paymentTypes track by $index" ng-click="select(type.code)">\n                                    <div>{{type.displayName}}</div>\n                                </div>\n                            </div>\n                            <!-- Credit Card Selection Options -->\n                            <div class="ml-ppos-payment-method-credit" ng-class="{ \'active\' : selection == \'CARDPRESENT\' }">\n                                <!-- Scan Option -->\n                                <div class="ml-ppos-scan" data-ng-click="select(\'CREDIT_CARD_SWIPE\')">\n                                    <span class="ml-ppos-scan-button">\n                                        <span class="ml-ppos-grey-icon ml-ppos-scan-barcode"></span>\n                                        <span translate="btn.ppos.scanCreditCard"></span>\n                                    </span>\n                                </div>\n                                <!-- Manual Option -->\n                                <!-- TODO: uncomment, to add the manual credit card entry. -->\n                                <!--<div class="ml-ppos-typein" data-ng-click="select(\'CREDIT_CARD_ENTRY\')">-->\n                                    <!--<span class="ml-ppos-typein-button">-->\n                                        <!--<span class="ml-ppos-grey-icon ml-ppos-typein"></span>-->\n                                        <!--<span translate="btn.ppos.typeIn"></span>-->\n                                    <!--</span>-->\n                                <!--</div>-->\n                            </div>\n                            <!-- Credit Card Manual Entry -->\n                            <div class="ml-ppos-payment-method-credit-enter" ng-class="{ \'active\' : selection == \'CREDIT_CARD_ENTRY\' }">\n                                <ml-payment-credit-card-manual data-ml-payment-model="model" data-ml-parent-submit="addPayment()" data-payment-service="paymentService"></ml-payment-credit-card-manual>\n                            </div>\n                            <!-- Cash -->\n                            <div class="ml-ppos-payment-method-cash" ng-class="{ \'active\' : selection == \'CASH\' }">\n                                <ml-payment-cash data-ml-payment-model="model" data-ml-parent-submit="addPayment()" data-payment-service="paymentService"></ml-payment-cash>\n                            </div>\n                            <!-- Gift Certificates -->\n                            <div class="ml-ppos-payment-method-gift-certificate" ng-class="{ \'active\' : selection == \'GIFTCERT\' }">\n                                <span translate="btn.ppos.enterGiftCertificate"></span>\n                            </div>\n                        </div>\n\n                        <!-- Payment Summary -->\n                        <div class="ml-ppos-payment-summary">\n                            <!-- Total -->\n                            <div class="ml-ppos-summary-content">\n                                <div class="ml-ppos-summary-label"><span translate="lbl.ppos.total"></span>:</div>\n                                <div class="ml-ppos-summary-value">{{model.total}}</div>\n                            </div>\n                            <!-- Payment List -->\n                            <div class="ml-ppos-scroll-container">\n                                <div class="" ng-repeat="payment in model.data.payments track by $index">\n                                    <div class="ml-ppos-summary-content ml-ppos-summary-payments">\n                                        <div class="ml-ppos-summary-label">{{payment.displayName}}:</div>\n                                        <div class="ml-ppos-summary-value">{{payment.displayAmount}}</div>\n\n                                        <div class="ml-ppos-basket-item-close-button">\n                                            <span data-ng-click="removePayment(payment.code)" class="ml-ppos-mini-white-icon ml-ppos-close"></span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="ml-ppos-payment-summary-footer">\n                                <!-- Balance -->\n                                <div class="ml-ppos-summary-content ml-ppos-summary-remaining-balance" ng-class="{ \'active\' : model.displayBalance }">\n                                    <div class="ml-ppos-summary-label"><span translate="lbl.ppos.remainingBalance"></span>:</div>\n                                    <div class="ml-ppos-summary-value">{{model.displayBalance}}</div>\n                                </div>\n                                <div class="ml-ppos-summary-content ml-ppos-summary-total-paid" ng-class="{ \'active\' : model.data.displayTotal }">\n                                    <div class="ml-ppos-summary-label"><span translate="lbl.ppos.totalPaid"></span>:</div>\n                                    <div class="ml-ppos-summary-value">{{model.data.displayTotal}}</div>\n                                </div>\n                                <div class="ml-ppos-summary-content ml-ppos-summary-change-amount" ng-class="{ \'active\' : model.data.change }">\n                                    <div class="ml-ppos-summary-label"><span translate="lbl.ppos.changeAmount"></span>:</div>\n                                    <div class="ml-ppos-summary-value">{{model.data.change}}</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <!-- Credit Card Swipe -->\n                    <div class="ml-ppos-payment-method-credit-scan" ng-class="{ \'active\' : selection == \'CREDIT_CARD_SWIPE\' }">\n                        <ml-payment-credit-card-swipe data-ml-payment-model="model"\n                                                      data-ml-parent-submit="addPayment()"\n                                                      data-ml-change-selection="select(selection)"\n                                                      data-payment-service="paymentService"\n                                                      data-ml-view-selection="selection"></ml-payment-credit-card-swipe>\n                    </div>\n                    <!-- Signature -->\n                    <div class="ml-ppos-signature-wrapper" ng-show="selection == \'SIGNATURE\'">\n                        <div class="ml-ppos-signature-header" ng-show="selection == \'SIGNATURE\'"><span translate="lbl.ppos.creditCardSignatureHeader"></span></div>\n                        <canvas ng-signature-pad="model.signature" width="570px" height="200px" class="ml-ppos-signature"></canvas>\n                        <div class="ml-ppos-signature-agreement" ng-show="selection == \'SIGNATURE\'">\n                            <span translate="lbl.ppos.creditCardSignatureAgreement"></span>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Modal Dialog Footer Buttons -->\n                <div class="modal-footer">\n                    <!--<div ng-show="model.placeOrder"><button type="submit" name="" id="markAsPaid" class="ml-ppos-primary-button" data-ng-click="basketCheckout()" translate="btn.ppos.markAsPaid"></button></div>-->\n                    <div ng-show="!model.placeOrder && showDefaultLayout()"><button type="submit" name="" id="" class="ml-ppos-primary-button" data-ng-click="apply()" translate="btn.ppos.addPayment"></button></div>\n                    <div ng-show="selection == \'SIGNATURE\'"><button type="submit" name="" id="acceptSignature" class="ml-ppos-primary-button" data-ng-click="acceptSignature()" translate="Accept Signature"></button></div>\n\n                    <div ng-show="selection == \'PAYMENT_SELECTION\'"><button type="button" class="ml-ppos-secondary-button" data-dismiss="modal" translate="btn.ppos.cancel"></button></div>\n                    <div ng-hide="selection == \'PAYMENT_SELECTION\' || selection == \'SIGNATURE\'"><button type="button" class="ml-ppos-secondary-button" data-ng-click="cancel()"  translate="btn.ppos.cancel"></button></div>\n                    <div ng-show="selection == \'SIGNATURE\'"><button type="button" class="ml-ppos-secondary-button" data-ng-click="cancelSignature()"  translate="btn.ppos.cancel"></button></div>\n                    <div ng-show="selection == \'SIGNATURE\'" class="ml-ppos-signature-clear-button"><button type="button" class="ml-ppos-secondary-button" data-ng-click="clearSignature()"  translate="btn.ppos.clearSignature"></button></div>\n                </div>\n\n            </div>\n        </div>\n    </div>\n</div>\n'),
a.put("views/basket/ReceiptModal.html",'<div class="ml-ppos-modal-container ml-ppos-customer-search-wrapper">\n    <div class="modal" id="receiptModal" tabindex="-1" role="dialog" aria-hidden="true">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <button type="button" class="close" data-ng-click="cancel()" aria-label="Close"><span aria-hidden="true"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\n                    <h4 class="modal-title"> <span translate="lbl.ppos.receipt"></span></h4>\n                </div>\n\n                    <form name="receiptForm" novalidate data-ng-submit="processReceipt()">\n                        <div class="modal-body" class="form-control">\n\n                          <div data-ng-show="receiptDataModel.paymentChange" class="ml-ppos-payment-change-due"><span translate="lbl.ppos.changeDue"></span>&nbsp; {{receiptDataModel.paymentChange}}</div>\n\n                            <div data-ng-show="receiptDataModel.hasValidationErrors" class="ml-ppos-error-container">\n                                <div class="ml-icon-error"></div>\n                                <div class="ml-ppos-error-message">\n                                    <div data-ng-repeat="validationError in receiptDataModel.validationErrors">{{ validationError }}</div>\n                                </div>\n                            </div>\n\n                            <span id="print" ng-class="receiptDataModel.printSelected == true ?  \'ml-ppos-mini-white-icon ml-ppos-radio ml-ppos-radio-selected\' : \'ml-icon-lib ml-icon-unchecked\' " data-ng-model="receiptDataModel.printSelected" data-ng-click="manageSelection(\'print\')"></span>\n                            <span translate="lbl.ppos.print"></span> {{receiptDataModel.deviceName}}\n\n                            <p/>\n                            <span id="email" ng-class="receiptDataModel.emailSelected == true ?  \'ml-ppos-mini-white-icon ml-ppos-radio ml-ppos-radio-selected\' : \'ml-icon-lib ml-icon-unchecked\' " ng-model="receiptDataModel.emailSelected"  data-ng-click="manageSelection(\'email\')"></span>\n                            <span translate="lbl.ppos.email"></span> <div style="width:400px;display: inline-block"><input id="receiptModalEmail" type="email" data-ng-model="email" class="form-control"></div>\n\n                            <div class="modal-footer ml-ppos-button-customer-search">\n\n                            <div><button type="submit" data-ng-disabled="!receiptDataModel.printSelected && ! receiptDataModel.emailSelected " name="emailReceiptButton" id="emailReceiptButton" class="ml-ppos-primary-button" ng-disabled="buttonClicked"><span translate="lbl.ppos.receipt"></span> </button></div>\n                            <div><button type="button" class="ml-ppos-secondary-button" data-ng-click="cancel()"><span translate="lbl.ppos.noReceipt"></span> </button></div>\n\n                        </div>\n                        </div>\n                    </form>\n           \n               \n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("views/basket/ShippingAddressAndMethodModal.html",'<div class="ml-ppos-modal-container ml-ppos-basket-new-shipping-wrapper">\r\n	<div class="modal" id="shippingAddressAndMethodModal" tabindex="-1" role="dialog" aria-hidden="true">\r\n		<div class="modal-dialog">\r\n			<div class="modal-content">\r\n				<form novalidate id="frmShipAddressMethodModal">\r\n					<div class="modal-header">\r\n						<button type="button" class="close" data-ng-click="closeShippingAddressAndMethodModal()" data-dismiss="modal" aria-label="Close" id="btnCloseModal"><span aria-hidden="true"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\r\n						<h4 class="modal-title"><span translate="hdr.ppos.shipToAddress"/></h4>\r\n						<!-- Error Block Start -->\r\n						<div class="ml-ppos-error-container" data-ng-show="shipping.showMessage">\r\n							<div class="ml-icon-error" id="divMsgIconContainer"></div>\r\n							<div class="ml-ppos-error-message">\r\n								<div>{{ shipping.operationMessage | translate }}</div>\r\n							</div>\r\n						</div>\r\n						<!-- Error Block End -->\r\n					</div>\r\n					<div class="modal-body ml-ppos-basket-new-shipping-container">\r\n						<!-- Address Block -->\r\n						<div class="ml-ppos-basket-new-shipment-address-container">\r\n							<div class="ml-ppos-basket-new-address-row">\r\n								<label><span translate="lbl.ppos.firstName"/></label>\r\n								<div><input type="text" class="form-control" data-ng-model="shipping.firstName" name="txtFirstName" id="txtFirstName" maxlength="40"/></div>\r\n							</div>\r\n							<div class="ml-ppos-basket-new-address-row">\r\n								<label><span translate="lbl.ppos.lastName"/></label>\r\n								<div><input type="text" class="form-control" data-ng-model="shipping.lastName" name="txtLastName" id="txtLastName" required="" maxlength="40"/></div>\r\n							</div>\r\n							<div class="ml-ppos-basket-new-address-row">\r\n								<label><span translate="lbl.ppos.streetAddress"/></label>\r\n								<div><input type="text" class="form-control" data-ng-model="shipping.streetAddress" name="txtStreetAddress" id="txtStreetAddress" required="" maxlength="50"/></div>\r\n							</div>\r\n							<div class="ml-ppos-basket-new-address-row">\r\n								<label><span translate="lbl.ppos.optionalAddress"/></label>\r\n								<div><input type="text" class="form-control" data-ng-model="shipping.optionalAddress" name="txtOptionalAddress" id="txtOptionalAddress" maxlength="50"/></div>\r\n							</div>\r\n							<div class="ml-ppos-basket-new-address-row">\r\n								<label><span translate="lbl.ppos.city"/></label>\r\n								<div><input type="text" class="form-control" data-ng-model="shipping.city" name="txtCity" id="txtCity" required="" maxlength="50"/></div>\r\n							</div>\r\n							<div class="ml-ppos-basket-new-address-row">\r\n								<label><span translate="lbl.ppos.state"/></label>\r\n								<div><select name="selState" class="form-control" id="selState" data-ng-model="shipping.selectedState" data-ng-change="populateShippingMethods(\'selState\')"> \r\n									<option ng-repeat="option in shipping.states" value="{{option.id}}" ng-selected="{{option.id == shipping.selectedState}}">{{ option.description | translate }}</option>\r\n								</select></div>\r\n							</div>\r\n							<div class="ml-ppos-basket-new-address-row">\r\n								<label><span translate="lbl.ppos.zipCode"/></label>\r\n								<div><input type="text" class="form-control" data-ng-model="shipping.zipCode" name="txtZipCode" id="txtZipCode" required="" maxlength="10"/></div>\r\n							</div>\r\n							<div class="ml-ppos-basket-new-address-row">\r\n								<label><span translate="lbl.ppos.country"/></label>\r\n								<div><select name="selCountry" class="form-control" id="selCountry" data-ng-model="shipping.selectedCountry" data-ng-change="populateShippingMethods(\'selCountry\')"> \r\n									<option ng-repeat="option in shipping.countries" value="{{option.id}}" ng-selected="{{option.id == shipping.selectedCountry}}">{{ option.description | translate }}</option>\r\n								</select></div>\r\n							</div>\r\n							<div class="ml-ppos-basket-new-address-row">\r\n								<label><span translate="lbl.ppos.phoneNumber"/></label>\r\n								<div><input type="tel" class="form-control" data-ng-model="shipping.phoneNumber" name="txtPhone" id="txtPhone" required="" maxlength="20"/></div>\r\n							</div>\r\n							<div class="ml-ppos-basket-new-address-row">\r\n								<label><span translate="lbl.ppos.emailAddress"/></label>\r\n								<div><input type="email" class="form-control" data-ng-model="shipping.email" name="txtEmail" id="txtEmail" required="" maxlength="100"/></div>\r\n							</div>\r\n						</div>\r\n						<!-- Address Block -->\r\n\r\n						<!-- shipping method -->\r\n						<div class="ml-ppos-basket-new-shipment-container ml-ppos-toggle-container">\r\n							<div class="ml-ppos-toggle btn-group btn-toggle" data-ng-show="shipping.shippingMethods.length > 0">\r\n								<label class="ml-ppos-toggle-button btn" ng-class="{active : option.id == shipping.selectedShippingMethod}" data-ng-repeat="option in shipping.shippingMethods">\r\n									<input type="radio" data-ng-model="shipping.selectedShippingMethod"  name="radioShippingMethod" id="radioShippingMethod" value="{{option.id}}"/>\r\n									<div>\r\n										<i ng-show="option.id != shipping.selectedShippingMethod">\r\n											<i class="ml-ppos-mini-white-icon ml-ppos-unselect"></i>\r\n										</i>\r\n										<i ng-hide="option.id != shipping.selectedShippingMethod">\r\n											<i class="ml-ppos-mini-grey-icon ml-ppos-select"></i>\r\n										</i>\r\n										<span class="ml-ppos-basket-new-shipment-name">{{ option.name | translate }} - {{ option.cost }}</span>\r\n									</div> <span>{{ option.description | translate }}</span>\r\n								</label>\r\n							</div>\r\n						</div>\r\n						\r\n						<!--<div class="ml-ppos-basket-new-shipment-container ml-ppos-toggle-container" data-ng-show="shipping.shippingMethods.length == 0">\r\n							<div class="ml-ppos-toggle btn-group btn-toggle">\r\n								<span translate="msg.ppos.noShippingMethod"/>\r\n							</div>\r\n						</div>-->\r\n						<!-- shipping method -->\r\n					</div>\r\n					\r\n					<div class="modal-footer ml-ppos-button-product-search">\r\n						<div><button type="submit" name="addShippingAddress" id="addShippingAddress" class="ml-ppos-primary-button" translate="btn.ppos.paymentOptions" data-ng-click="saveShippingAddressAndMethod(shipping)"></button></div>\r\n						<div><button type="button" class="ml-ppos-secondary-button" data-ng-click="cancelShippingAddressAndMethodModal()" data-dismiss="modal" translate="btn.ppos.cancel" name="btnCancelShipToModal" id="btnCancelShipToModal"></button></div>\r\n					</div>\r\n				</form>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Following script tag added for fixing PEBL-15999 -->\r\n<script>\r\n'+"$('#addShippingAddress').on('touchend', function(e){\r\n    e.stopPropagation(); e.preventDefault();\r\n	$('#addShippingAddress').trigger('click');\r\n});\r\n$('#btnCancelShipToModal').on('touchend', function(e){\r\n	e.stopPropagation(); e.preventDefault();\r\n	// following is the hack to hide soft keyboard\r\n	document.activeElement.blur();\r\n	$('input').blur();\r\n	$('select').blur();\r\n	$('#btnCancelShipToModal').trigger('click');\r\n});\r\n</script>"),a.put("views/common/AppSpinner.html",'<!-- AppSpinner.html | (c) 2015 MarketLive, Inc. | All Rights Reserved -->\n\n<div class="ppos-app-spinner" data-ng-show="displaySpinner">\n    <div class="ppos-app-spinner-bg"></div>\n    <div class="ppos-app-spinner-msg-wrapper">\n        <div class="ppos-app-spinner-msg-content">\n            <span data-ng-hide="timerLimitExceeded"\n                  class="ml-icon-lib ml-icon-circle-o-notch ml-icon-spin ppos-app-spinner-icon"></span>\n\n            <div class="timer-limit-exceeded-wrapper" data-ng-show="timerLimitExceeded">\n                <div class="ml-ppos-error-container">\n                    <div class="ml-icon-error"></div>\n                    <div class="ml-ppos-error-message">\n                        <div>{{requestTimedOut}}</div>\n                    </div>\n                    <div class="timer-limit-exceeded-close">\n                        <button class="ml-ppos-primary-button" data-ng-click="close()">{{closeBtnTxt}}</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("views/common/Header.html",'<div class="ml-ppos-header-wrapper">\n\n	<div class="ml-ppos-header-logo"><span class="ml-ppos-header-logo-img" data-ng-click="openDashboardPage();"></span></div>\n\n	<div class="ml-ppos-header-nav" data-ng-show="!applicationModel.isScreenLocked"> \n		<div class="ml-ppos-header-nav-logout ml-ppos-a-href-close-overlay">\n			<a href="javascript:;" data-ng-show="applicationModel.isCSRLoggedIn" data-ng-click="logout();hideOverlay();" data-ng-controller="logoutController"><span class="ml-ppos-mini-white-icon ml-ppos-logout-head"></span></a>\n		</div>\n		<div class="ml-ppos-header-nav-basket ml-ppos-a-href-close-overlay">\n			<a href="javascript:;" data-ng-show="applicationModel.isCSRLoggedIn" data-ng-click="openBasketPage();hideOverlay();"><span class="ml-ppos-mini-white-icon ml-ppos-basket-head"></span></a>\n		</div>\n		<div class="ml-ppos-header-nav-unlock ml-ppos-a-href-close-overlay">\n			<a href="javascript:;" data-ng-show="applicationModel.isCSRLoggedIn" data-ng-click="lockScreen();hideOverlay();"><span class="ml-ppos-mini-white-icon ml-ppos-unlock-head"></span></a>\n		</div>\n		<div class="ml-ppos-header-nav-user">\n			<a href="javascript:;" data-ng-show="applicationModel.isCSRLoggedIn" data-ng-click="toggleOverlay();" id="ml-ppos-header-nav-user-link">{{ applicationModel.csrUserName }}<span class="ml-icon-lib ml-icon-arrow-down"></span></a>\n		</div>\n\n		<!-- Account Drop Down -->\n		<div class="ml-ppos-account-drop-down-container">\n			<div id="ml-ppos-account-overlay" style="display:block" ng-show="applicationModel.toggleValue" data-ng-click="hideOverlay();"></div>\n			<div id="ml-ppos-account-drop-down" style="display:block" ng-show="applicationModel.toggleValue">\n				<ul>\n					<li class="ml-ppos-a-href-close-overlay"><a href="" data-ng-click="openCSRChangePasswordPage();toggleOverlay();"><i class="ml-ppos-mini-white-icon ml-ppos-change-password"></i> <span translate="lbl.ppos.changePassword"/></a></li>\n					<li class="ml-ppos-a-href-close-overlay"><a href="" data-ng-click="openCSRChangePINPage();toggleOverlay();"><i class="ml-ppos-mini-white-icon ml-ppos-unlock"></i> <span translate="lbl.ppos.changePin"/></a></li>\n					<!--<li class="ml-ppos-a-href-close-overlay"><a href=""><i class="ml-ppos-mini-white-icon ml-ppos-appointment"></i> <span translate="lbl.ppos.appointment"/></a></li>\n					<li class="ml-ppos-a-href-close-overlay"><a href=""><i class="ml-ppos-mini-white-icon ml-ppos-todo"></i> <span translate="lbl.ppos.toDoList"/></a></li>\n					<li class="ml-ppos-a-href-close-overlay"><a href=""><i class="ml-ppos-mini-white-icon ml-ppos-profile"></i> <span translate="lbl.ppos.profile"/></a></li>\n					<li class="ml-ppos-a-href-close-overlay"><a href=""><i class="ml-ppos-mini-white-icon ml-ppos-my-sale"></i> <span translate="lbl.ppos.mySales"/></a></li>\n					<li class="ml-ppos-a-href-close-overlay"><a href=""><i class="ml-ppos-mini-white-icon ml-ppos-dashboard"></i> <span translate="lbl.ppos.dashboard"/></a></li>-->\n					<li class="ml-ppos-a-href-close-overlay"><a href="" data-ng-click="openManagementPage();toggleOverlay();"><i class="ml-ppos-mini-white-icon ml-ppos-settings"></i> <span translate="lbl.ppos.settings"/></a></li>\n				</ul>\n			</div>\n		</div>\n		<!-- Account Drop Down End -->\n	</div>\n\n</div>\n\n<!-- No Shopping Bag Message -->\n<div class="ml-ppos-modal-container ml-ppos-product-search-wrapper">\n	<div class="modal" id="noShoppingBagModal" tabindex="-1" role="dialog" aria-hidden="true">\n		<div class="modal-dialog">\n			<div class="modal-content">\n\n				<div class="modal-body">\n					<div class="ml-ppos-error-container">\n						<div class="ml-icon-error"></div>\n						<div class="ml-ppos-error-message">\n							<div translate>btn.ppos.noShoppingBagMessage</div>\n						</div>\n					</div>\n				</div>\n				\n				<div class="modal-footer ml-ppos-button-product-search">\n					<div><button type="submit" name="noShoppingBagOkButton" id="noShoppingBagOkButton" data-dismiss="modal" class="ml-ppos-primary-button" translate="btn.ppos.ok"></button></div>\n				</div>\n\n			</div>\n		</div>\n	</div>\n</div>'),a.put("views/common/NearByStoresModal.html",'<div class="ml-ppos-modal-container ml-ppos-nearby-store-wrapper">\n	<div class="modal" id="nearByStoresModal" tabindex="-1" role="dialog" aria-hidden="true">\n		<div class="modal-dialog">\n			<div class="modal-content">\n\n				<!-- Header -->\n				<div class="modal-header">\n					<button type="button" class="close" data-ng-click="closeNearByStoresModal()" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\n					<h4 class="modal-title" translate="hdr.ppos.availabilityInNearbyStores"></h4>\n				</div>\n	  \n				<!-- Body -->\n				<div class="modal-body">\n					<div class="ml-ppos-store-wrapper">\n						<div class="ml-ppos-store-product-info-container">\n							<div class="ml-ppos-store-product-image"><img src="{{ nearByStoresDataModel.product.image.thumb }}" /></div>\n\n							<div class="ml-ppos-store-product-name">{{ nearByStoresDataModel.product.name }}</div>\n\n							<div class="ml-ppos-store-product-code"># {{ nearByStoresDataModel.selectedSku.code }}</div>\n\n							<div data-ng-if="nearByStoresDataModel.selectedSku.options">\n								<div data-ng-repeat="option in nearByStoresDataModel.selectedSku.options" class="ml-ppos-store-product-options">\n									{{ option.optionType }}: {{ option.name }}\n								</div>\n							</div>\n\n							<div class="ml-ppos-store-product-qty"><span translate="msg.ppos.qty"></span> {{ nearByStoresDataModel.requestedQuantity }}</div>\n						</div>\n						\n						<div class="ml-ppos-store-info-container">\n							<!-- Store Search -->\n							<div class="ml-ppos-store-search-container">\n								<div class="ml-ppos-store-search-box">\n									<div class="ml-ppos-store-search-zip-head" translate="lbl.ppos.cityStateZip"></div>\n									<div class="ml-ppos-store-search-form">\n										<form name="nearByStoresForm" novalidate data-ng-submit="searchNearByStores(true)">\n											<div class="ml-ppos-store-search-input"><input type="text" name="nearByStoresSearchKeyword" id="nearByStoresSearchKeyword" class="form-control" data-ng-model="nearByStoresDataModel.nearByStoresSearchKeyword" /></div>\n											<div class="ml-ppos-store-search-button"><input type="submit" name="findNearByStoresButton" id="findNearByStoresButton" class="ml-ppos-primary-button" value="{{ \'btn.ppos.findStores\' | translate }}" data-ng-disabled="!nearByStoresDataModel.nearByStoresSearchKeyword"/></div>\n										</form>\n									</div>\n								</div>\n\n								<div class="ml-ppos-store-distance ml-ppos-toggle-container">\n									<div class="ml-ppos-store-search-distance-head" translate="lbl.ppos.storesWithinRadius"></div>\n\n									<div class="ml-ppos-toggle btn-group btn-toggle">\n										<label class="ml-ppos-toggle-button btn" ng-class="{active : radius == nearByStoresDataModel.selectedRadius}" data-ng-repeat="radius in nearByStoresDataModel.radiusArray">\n											<input type="radio" name="selectedStoreRadius" id="selectedStoreRadius" value="{{ radius }}" data-ng-model="nearByStoresDataModel.selectedRadius" data-ng-change="searchNearByStores(false)" /> <span translate="lbl.ppos.storeRadius" translate-values="{ storeRadius: radius }"></span>\n										</label>\n									</div>\n								</div>\n\n							</div>\n							\n							<!-- Store Detail -->\n							<div class="ml-ppos-store-detail-container">\n								<div class="ml-ppos-store-detail-row ml-ppos-store-detail-row-head">\n									<div class="ml-ppos-store-detail-row-store" translate="hdr.ppos.store"></div>\n									<div class="ml-ppos-store-detail-row-hours" translate="hdr.ppos.hours"></div>\n									<div class="ml-ppos-store-detail-row-distance" translate="hdr.ppos.distance"></div>\n									<div class="ml-ppos-store-detail-row-availability" translate="hdr.ppos.availability"></div>\n									<div class="ml-ppos-store-detail-row-add-btn"></div>\n								</div>\n								\n								<div class="ml-ppos-store-detail-content-scroll ml-ppos-scroll-container">\n									<div class="ml-ppos-store-detail-row">\n										<div class="ml-ppos-store-detail-row-store" translate="lbl.ppos.online"></div>\n										\n										<div data-ng-show="!nearByStoresDataModel.online.showStockAvailabilityMessage"  class="ml-ppos-store-detail-row-stock">\n											<div class="ml-ppos-store-detail-row-hours"></div>\n											<div class="ml-ppos-store-detail-row-distance"></div>\n											<div class="ml-ppos-store-detail-row-availability">\n												<span data-ng-if="nearByStoresDataModel.online.availableQty > 0"><span translate="msg.ppos.inStock"></span> <br> {{ nearByStoresDataModel.online.availableQty }}</span>\n												<span data-ng-if="nearByStoresDataModel.online.availableQty == 0" translate="msg.ppos.unavailable"></span>\n											</div>\n											<div class="ml-ppos-store-detail-row-add-btn"><a href="" data-ng-click="addItemToBasketFromWebStore()" data-ng-if="nearByStoresDataModel.online.availableQty > 0"><span class="ml-ppos-mini-white-icon ml-ppos-plus"></span></a></div>\n										</div>\n\n										<div data-ng-show="nearByStoresDataModel.online.showStockAvailabilityMessage" class="ml-ppos-store-stock-error">\n											<div class="ml-ppos-store-search-container">\n												<div class="ml-ppos-error-container">\n													<div class="ml-icon-error"></div>\n													<div class="ml-ppos-error-message">\n														<div translate="msg.ppos.stockAvailability.100" translate-values="{ requestedQuantity : nearByStoresDataModel.requestedQuantity, availableQuantity : nearByStoresDataModel.online.availableQty }"></div>\n													</div>\n												</div>\n												<div class="ml-ppos-store-stock-error-cancel-button">\n													<button type="button" name="stockAvailabilityCancelButton" id="stockAvailabilityCancelButton" class="ml-ppos-secondary-button" data-ng-click="cancelStockAvailability()" translate="btn.ppos.cancel"></button>\n												</div>\n												<div>\n													<button type="button" name="stockAvailabilityContinueButton" id="stockAvailabilityContinueButton" class="ml-ppos-primary-button" data-ng-click="continueStockAvailability()" translate="btn.ppos.stockAvailability.continue"></button>\n												</div>\n											</div>\n										</div>\n\n									</div>\n\n									<div data-ng-if="nearByStoresDataModel.stores.length">\n										<div data-ng-repeat="store in nearByStoresDataModel.stores | filter : {pickupEnabled : true}" class="ml-ppos-store-detail-row">\n											<div class="ml-ppos-store-detail-row-store">\n												<div>{{ store.address.name }}</div>\n												<div>{{ store.address.street1 }}</div>\n												<div>{{ store.address.street2 }}</div>\n												<div>{{ store.address.street3 }}</div>\n												<div>\n													{{ store.address.city }},\n													{{ store.address.state }}\n													{{ store.address.zipCode }}\n												</div>\n												<div>{{ store.address.phone }}</div>\n											</div>\n\n											<div data-ng-show="!store.showStockAvailabilityMessage" class="ml-ppos-store-detail-row-stock">\n												<div class="ml-ppos-store-detail-row-hours" translate="{{ store.hours }}"></div>\n												<div class="ml-ppos-store-detail-row-distance" translate="lbl.ppos.storeDistance" translate-values="{ storeDistance: store.distance }"></div>\n												<div class="ml-ppos-store-detail-row-availability">\n													<span data-ng-if="store.availableQty > 0"><span translate="msg.ppos.inStock"></span> <br> {{ store.availableQty }}</span>\n													<span data-ng-if="store.availableQty == 0" translate="msg.ppos.unavailable"></span>\n												</div>\n												<div class="ml-ppos-store-detail-row-add-btn"><a href="" data-ng-click="addItemToBasketFromPhysicalStore(store)" data-ng-if="store.availableQty > 0"><span class="ml-ppos-mini-white-icon ml-ppos-plus"></span></a></div>\n											</div>\n\n											<div data-ng-show="store.showStockAvailabilityMessage" class="ml-ppos-store-stock-error">\n												<div class="ml-ppos-store-search-container">\n													<div class="ml-ppos-error-container">\n														<div class="ml-icon-error"></div>\n														<div class="ml-ppos-error-message">\n															<div translate="msg.ppos.stockAvailability.100" translate-values="{ requestedQuantity : nearByStoresDataModel.requestedQuantity, availableQuantity : store.availableQty }"></div>\n														</div>\n													</div>\n													<div class="ml-ppos-store-stock-error-cancel-button">\n														<button type="button" name="stockAvailabilityCancelButton" id="stockAvailabilityCancelButton" class="ml-ppos-secondary-button" data-ng-click="cancelStockAvailability()" translate="btn.ppos.cancel"></button>\n													</div>\n													<div>\n														<button type="button" name="stockAvailabilityContinueButton" id="stockAvailabilityContinueButton" class="ml-ppos-primary-button" data-ng-click="continueStockAvailability(store)" translate="btn.ppos.stockAvailability.continue"></button>\n													</div>\n												</div>\n											</div>\n\n										</div>\n										<div data-ng-repeat="store in nearByStoresDataModel.stores | filter : {pickupEnabled : false}" class="ml-ppos-store-detail-row">\n											<div class="ml-ppos-store-detail-row-store">\n												<div>{{ store.address.name }}</div>\n												<div>{{ store.address.street1 }}</div>\n												<div>{{ store.address.street2 }}</div>\n												<div>{{ store.address.street3 }}</div>\n												<div>\n													{{ store.address.city }},\n													{{ store.address.state }}\n													{{ store.address.zipCode }}\n												</div>\n												<div>{{ store.address.phone }}</div>\n											</div>\n											<div class="ml-ppos-store-detail-row-hours" translate="{{ store.hours }}"></div>\n											<div class="ml-ppos-store-detail-row-distance" translate="lbl.ppos.storeDistance" translate-values="{ storeDistance: store.distance }"></div>\n											<div class="ml-ppos-store-detail-row-availability" translate="msg.ppos.notEligibleForStorePickup"></div>\n											<div class="ml-ppos-store-detail-row-add-btn"></div>\n										</div>\n									</div>\n									<div data-ng-if="!nearByStoresDataModel.stores.length" class="ml-ppos-error-container">\n										<div class="ml-icon-error"></div>\n										<div class="ml-ppos-error-message">\n											<div translate="msg.ppos.noStoresFound"></div>\n										</div>\n									</div>\n								</div>\n							</div>\n							<!-- Store Detail End -->\n						</div>\n					</div>\n					\n					<!-- Footer -->\n					<!--<div class="modal-footer ml-ppos-button-product-search">\n						 <div><button type="button" class="ml-ppos-secondary-button" data-ng-click="cancelNearByStoresModal()" data-dismiss="modal" translate>btn.ppos.cancel</button></div> \n					</div>-->\n				</div>\n\n			</div>\n		</div>\n	</div>\n</div>\n'),a.put("views/common/NumericSpinner.html",'<div class="ml-numeric-spinner-wrapper">\n    <div class="input-group">\n        <span class="input-group-btn">\n            <button class="btn btn-default" type="button"\n                    ng-click="decrementValue($event)"\n                    ng-disabled="isButtonDisabled(\'decrement\')">\n                <span class="ml-icon-lib ml-icon-minus"></span>\n            </button>\n        </span>\n        <input type="text" size="3" maxlength="{{maxLength}}" class="ml-ppos-quantity-spinner"\n               data-ng-model="mappedValue"\n               data-ng-blur="handleBlur()">\n        <span class="input-group-btn">\n            <button class="btn btn-default" type="button"\n                    ng-click="incrementValue($event)"\n                    ng-disabled="isButtonDisabled(\'increment\')">\n                <span class="ml-icon-lib ml-icon-plus"></span>\n            </button>\n        </span>\n    </div>\n</div>'),a.put("views/common/ScanBarcode.html",'<!-- ScanBarcode.html | (c) 2015 MarketLive, Inc. | All Rights Reserved -->\n\n<div>\n    <!-- Modal Display -->\n    <div data-ng-show="displayAsModal === \'true\'">\n        <a href="javascript:;" class="ml-ppos-product-scan-button" data-ng-click="showScanDialog()"><span\n                class="ml-ppos-grey-icon ml-ppos-scan-barcode"></span><span translate="btn.ppos.scanProductBarcode"></span></a>\n\n        <div class="ml-ppos-modal-container ml-ppos-scan-barcode-wrapper">\n            <div class="modal" tabindex="-1" role="dialog" aria-hidden="true">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <button type="button" class="close" data-dismiss="modal"\n                                    aria-label="Close"><span aria-hidden="true"><span\n                                    class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\n                            <!-- Title -->\n                            <h4 class="modal-title">{{modalTitle}}</h4>\n                        </div>\n\n                        <div class="modal-body">\n                            <ml-barcode-search-body></ml-barcode-search-body>\n                        </div>\n\n                        <!-- Footer Buttons -->\n                        <div class="modal-footer ml-ppos-button-customer-search">\n                            <div>\n                                <button class="ml-ppos-secondary-button"\n                                        data-ng-show="cancelBtnResource"\n                                        data-dismiss="modal"\n                                        translate="{{cancelBtnResource}}">\n                                </button>\n                                <button class="ml-ppos-primary-button"\n                                        data-ng-show="continueBtnResource"\n                                        data-ng-click="continue()"\n                                        data-ng-class="{disabled: !canContinue}"\n                                        translate="{{continueBtnResource}}">\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Inline Display -->\n    <div class="ml-ppos-scan-barcode-wrapper" data-ng-show="displayAsModal === \'false\'">\n        <ml-barcode-search-body></ml-barcode-search-body>\n    </div>\n </div>'),a.put("views/common/ScanBarcodeBody.html",'<!-- ScanBarcodeBody.html | (c) 2015 MarketLive, Inc. | All Rights Reserved -->\n\n<div>\n    <!-- Messages -->\n    <div class="ml-ppos-error-container">\n        <div ng-show="searchError" class="ml-icon-error"></div>\n        <div ng-show="!deviceConnected" class="ml-ppos-error-message">\n            <div translate="msg.ppos.connecting"></div>\n        </div>\n        <div ng-show="deviceConnected && !searchInProgress && !searchError && !canContinue"\n             class="ml-ppos-error-message">\n            <div translate="msg.ppos.readyToScan"></div>\n        </div>\n        <div ng-show="deviceConnected && searchInProgress" class="ml-ppos-error-message">\n            <div translate="msg.ppos.searchingForCode"\n                 translate-values="{ code: scannedValue }"></div>\n        </div>\n        <div ng-show="deviceConnected && !searchInProgress && searchError"\n             class="ml-ppos-error-message">\n            <div translate="msg.ppos.searchingForCodeFailed"\n                 translate-values="{ code: scannedValue }"></div>\n            <div translate="msg.ppos.tryAgain"></div>\n        </div>\n        <div ng-show="deviceConnected && !searchInProgress && canContinue && !searchError && multiAddMsgResource"\n             class="ml-ppos-error-message">\n            <div translate="{{multiAddMsgResource}}"\n                 translate-values="{ code: scannedValue }"></div>\n            <div data-ng-show="multiAddCountResource && itemFoundCount" translate="{{multiAddCountResource}}"\n                 translate-values="{count: itemFoundCount}"></div>\n        </div>\n    </div>\n\n    <!-- Icons -->\n    <div class="ml-ppos-scan-barcode-icons-wrapper">\n        <div class="ml-ppos-scan-barcode-icons"\n             data-ng-class="{ready: deviceConnected && !searchInProgress}">\n            <span class="ml-icon-lib ml-icon-circle-o-notch ml-icon-spin"></span><span\n                class="ml-icon-lib ml-icon-barcode"></span>\n        </div>\n    </div>\n</div>\n'),
a.put("views/csr/CSRAdd.html",'<div class="ml-ppos-account-wrapper">\r\n	<div class="ml-ppos-add-csr-container">\r\n	<form novalidate>\r\n		<div class="ml-ppos-add-csr-head-row">\r\n			<div class="ml-ppos-add-csr-title">\r\n				<a href="" ng-click="goToManagementScreen()"><i class="ml-ppos-mini-white-icon ml-ppos-arrow-left"></i> <span translate="lbl.ppos.management"/></a>\r\n			</div>\r\n			<div class="ml-ppos-add-csr-add-buttons">\r\n				<button type="button" name="cancelButton" class="ml-ppos-secondary-button" id="cancelButton" translate="btn.ppos.cancel" ng-click="cancel()"></button><button type="submit" name="saveButton" class="ml-ppos-primary-button" id="saveButton" translate="btn.ppos.save" data-ng-click="addCSR(csr)"></button>\r\n			</div>\r\n		</div>\r\n\r\n		<!-- Error Block Start -->\r\n		<div class="ml-ppos-error-container" data-ng-show="csr.showCsrOpFailureMessage">\r\n			<div class="ml-icon-error" id="divMsgIconContainer"></div>\r\n			<div class="ml-ppos-error-message">\r\n				<div>{{ csr.csrOpFailureMessage | translate }}</div>\r\n			</div>\r\n		</div>\r\n		<!-- Error Block End -->\r\n		<div class="ml-ppos-add-csr-form">\r\n			<div class="ml-ppos-add-csr-image"></div>\r\n			<div class="ml-ppos-add-csr-content">\r\n				<div class="ml-ppos-add-csr-row">\r\n					<label><span translate="lbl.ppos.employeeId"/></label>\r\n					<div class="ml-ppos-add-csr-input"><input type="text" name="employeeId" id="employeeId" maxlength="40" class="form-control" data-ng-model="csr.employeeId" /></div>\r\n				</div>\r\n\r\n				<div class="ml-ppos-add-csr-row">\r\n					<label><span>*</span> <span translate="lbl.ppos.firstName"/></label>\r\n					<div class="ml-ppos-add-csr-input"><input type="text" name="firstName" id="firstName" maxlength="40" class="form-control" data-ng-model="csr.firstName" /></div>\r\n				</div>\r\n\r\n				<div class="ml-ppos-add-csr-row">\r\n					<label><span>*</span> <span translate="lbl.ppos.lastName"/></label>\r\n					<div class="ml-ppos-add-csr-input"><input type="text" name="lastName" id="lastName" maxlength="40" class="form-control" data-ng-model="csr.lastName" /></div>\r\n				</div>\r\n\r\n				<div class="ml-ppos-add-csr-row">\r\n					<label><span>*</span> <span translate="lbl.ppos.emailAddress"/></label>\r\n					<div class="ml-ppos-add-csr-input"><input type="email" name="email" id="email" maxlength="100" class="form-control" data-ng-model="csr.email" /></div>\r\n				</div>\r\n				\r\n				<div class="ml-ppos-add-csr-row">\r\n					<label><span>*</span> <span translate="lbl.ppos.password"/></label>\r\n					<div class="ml-ppos-add-csr-input"><input type="password" name="password" id="password" maxlength="50" class="form-control" data-ng-model="csr.password" /></div>\r\n				</div>\r\n\r\n				<div class="ml-ppos-add-csr-row">\r\n					<label><span>*</span> <span translate="lbl.ppos.reEnterPassword"/></label>\r\n					<div class="ml-ppos-add-csr-input ml-ppos-add-csr-input-password"><input type="password" name="confirmPassword" id="confirmPassword" maxlength="50" class="form-control" data-ng-model="csr.confirmPassword" /></div>\r\n				</div>\r\n\r\n				<div class="ml-ppos-add-csr-row">\r\n					<label><span>*</span> <span translate="lbl.ppos.unlockPosPIN"/></label>\r\n					<div class="ml-ppos-add-csr-input ml-ppos-add-csr-input-pin">\r\n						<input class="form-control" type="password" maxlength="1" ng-model="csr.pin1" size="1" name="pin1" id="pin1" data-ng-keyup="moveOnNext(csr.pin1,\'pin1\',\'pin2\')" ng-focus="clearContent(\'pin1\')" pattern="[0-9]*"/>\r\n						<input class="form-control" type="password" maxlength="1" ng-model="csr.pin2" size="1" name="pin2" id="pin2" data-ng-keyup="moveOnNext(csr.pin2,\'pin2\',\'pin3\')" ng-focus="clearContent(\'pin2\')" pattern="[0-9]*"/>\r\n						<input class="form-control" type="password" maxlength="1" ng-model="csr.pin3" size="1" name="pin3" id="pin3" data-ng-keyup="moveOnNext(csr.pin3,\'pin3\',\'pin4\')" ng-focus="clearContent(\'pin3\')" pattern="[0-9]*"/>\r\n						<input class="form-control" type="password" maxlength="1" ng-model="csr.pin4" size="1" name="pin4" id="pin4" data-ng-keyup="moveOnNext(csr.pin4,\'pin4\',\'pin5\')" ng-focus="clearContent(\'pin4\')" pattern="[0-9]*"/>\r\n						<input class="form-control" type="password" maxlength="1" ng-model="csr.pin5" size="1" name="pin5" id="pin5" data-ng-keyup="moveOnNext(csr.pin5,\'pin5\',\'pin6\')" ng-focus="clearContent(\'pin5\')" pattern="[0-9]*"/>\r\n						<input class="form-control" type="password" maxlength="1" ng-model="csr.pin6" size="1" name="pin6" id="pin6" data-ng-keyup="moveOnNext(csr.pin6,\'pin6\',\'roleType\')" ng-focus="clearContent(\'pin6\')" pattern="[0-9]*"/>\r\n					</div>\r\n				</div>\r\n				<div class="ml-ppos-add-csr-row ml-ppos-add-input-pin-message">\r\n					<label></label>\r\n					<div class="ml-ppos-add-csr-input"><span translate="msg.ppos.unlockPosPin"/></div>\r\n				</div>\r\n				<div class="ml-ppos-add-csr-row">\r\n					<label><span>*</span> <span translate="lbl.ppos.roleType"/></label>\r\n					<div class="ml-ppos-add-csr-input ml-ppos-toggle-container">\r\n						<div data-ng-show="csr.roleType.length == 2" class="ml-ppos-toggle btn-group btn-toggle">\r\n							<label class="ml-ppos-toggle-button btn" ng-class="{active : option.id == csr.selectedRole}" data-ng-repeat="option in csr.roleType" id="lblRoleRadio{{option.id}}">\r\n								<input type="radio" data-ng-model="csr.selectedRole"  name="roleTypeRadio" id="roleTypeRadio" value="{{option.id}}" data-ng-change="populateCSRTypeDetails(csr.selectedRole)"/> <span>{{ option.code | translate }}</span>\r\n							</label>\r\n						</div>\r\n						<div data-ng-show="csr.roleType.length != 2" class="ml-ppos-edit-csr-role">\r\n							<select name="roleTypeSelect" id="roleTypeSelect" class="form-control-select" data-ng-model="csr.selectedRole" data-ng-change="populateCSRTypeDetails(csr.selectedRole)"> \r\n								<option ng-repeat="option in csr.roleType" value="{{option.id}}">{{ option.code | translate }}</option>\r\n							</select>\r\n						</div>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="ml-ppos-add-csr-row ml-ppos-toggle-container">\r\n					<label><span>*</span> <span translate="lbl.ppos.activeStatus"/></label>\r\n					<div class="ml-ppos-add-csr-input ml-ppos-toggle btn-group btn-toggle" data-toggle="buttons">\r\n						<label id="lblActive" class="ml-ppos-toggle-button btn" ng-class="{active : csr.activeStatus.toString() == \'true\'}" data-ng-click="setStatus(true)">\r\n							<input type="radio" name="activeStatus" id="activeStatus" value="true" data-ng-model="csr.activeStatus" /> <span translate="lbl.ppos.active"/></label>\r\n						<label id="lblInactive" class="ml-ppos-toggle-button btn" ng-class="{active : csr.activeStatus.toString() == \'false\'}" data-ng-click="setStatus(false)">\r\n							<input type="radio" name="activeStatus" id="activeStatus" value="false" data-ng-model="csr.activeStatus"/> <span translate="lbl.ppos.inactive"/>\r\n						</label>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		</form>\r\n			<!-- Permission Block Start -->\r\n			<div class="ml-ppos-add-csr-permission-wrapper">\r\n				<div class="ml-ppos-add-csr-permission-head">\r\n					<button class="btn" type="button" ng-click="showHidePermission();"><i id="permissionDivElement" class="ml-icon-lib ml-icon-plus"></i> <span translate="hdr.ppos.permissions"/></button> \r\n				</div>\r\n				<div class="collapse" id="collapseDiv">\r\n					<div id="permissionListDiv"></div>\r\n				</div>\r\n			</div>\r\n			<!-- Permission Block End -->\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Following script tag added for fixing PEBL-16516 -->\r\n<script>\r\n'+"$('#saveButton').on('touchend', function(e){\r\n    e.stopPropagation(); e.preventDefault();\r\n	$('#saveButton').trigger('click');\r\n});\r\n$('#cancelButton').on('touchend', function(e){\r\n	e.stopPropagation(); e.preventDefault();\r\n	// following is the hack to hide soft keyboard\r\n	document.activeElement.blur();\r\n	$('input').blur();\r\n	$('select').blur();\r\n	$('#cancelButton').trigger('click');\r\n});\r\n</script>"),a.put("views/csr/CSRChangePIN.html",'<div class="ml-ppos-account-wrapper">\r\n	<form novalidate data-ng-submit="changePIN(changePinModel)">\r\n		<div class="ml-ppos-account-change-pin-container">\r\n			<div class="ml-ppos-account-head-container">\r\n				<div class="ml-ppos-account-change-pin-title"><span translate="hdr.ppos.changeAccessPin"/></div>\r\n				<div class="ml-ppos-account-button-container">\r\n					<div class="ml-ppos-account-button-save"><button class="ml-ppos-primary-button" type="submit" name="save" id="save" translate="btn.ppos.save"/></div>\r\n					<div class="ml-ppos-account-button-cancel"><button class="ml-ppos-secondary-button" type="button" name="cancel" id="cancel" ng-click="openDashboardPage()" translate="btn.ppos.cancel"/></div>\r\n				</div>\r\n			</div>\r\n			\r\n			<!-- Error Block -->\r\n			<div class="ml-ppos-error-container" data-ng-show="changePinModel.showMessage">\r\n				<div class="ml-icon-error" id="divMsgIconContainer"></div>\r\n				<div class="ml-ppos-error-message">\r\n					<div>{{ changePinModel.message | translate }}</div>\r\n				</div>\r\n			</div>\r\n			\r\n			<div class="ml-ppos-toggle-container ml-ppos-account-display-pin-wrapper">\r\n				<span class="ml-ppos-account-display-pin-title" translate="lbl.ppos.displayAccessPin" />\r\n				<div class="ml-ppos-toggle btn-group btn-toggle" data-toggle="buttons">\r\n					<label class="ml-ppos-toggle-button btn" ng-class="{active : changePinModel.inputType == \'text\'}" ng-click="showHidePin(\'text\')" ><span translate="sel.ppos.showAccessPin"/>\r\n						<input type="radio" name="showHidePin" id="showPin"/>\r\n					</label>\r\n					<label class="ml-ppos-toggle-button btn" ng-class="{active : changePinModel.inputType == \'password\'}" ng-click="showHidePin(\'masked\')"><span translate="sel.ppos.hideAccessPin"/>\r\n						<input type="radio" name="showHidePin" id="hidePin" >\r\n					</label>\r\n				</div>\r\n			</div>\r\n			\r\n			<div class="ml-ppos-account-form-container">\r\n				<div class="ml-ppos-account-form-row ml-ppos-account-pin-icon">\r\n					<label></label>\r\n					<div class="ml-ppos-add-csr-input"><span translate="msg.ppos.unlockPosPin"/></div>\r\n				</div>\r\n				<div class="ml-ppos-account-form-row">\r\n					<label><span>*</span><span translate="lbl.ppos.currentAccessPin"/></label>\r\n					<div class="ml-ppos-account-form-field"><input class="form-control" type="{{changePinModel.inputType}}" name="currentPin" id="currentPin" data-ng-model="changePinModel.currentPin" maxlength="6" pattern="[0-9]*"/></div>\r\n				</div>\r\n				\r\n				<div class="ml-ppos-account-form-row">\r\n					<label><span>*</span><span translate="lbl.ppos.newAccessPin"/></label>\r\n					<div class="ml-ppos-account-form-field"><input class="form-control" type="{{changePinModel.inputType}}" name="newPin" id="newPin" data-ng-model="changePinModel.newPin" maxlength="6" pattern="[0-9]*"/></div>\r\n				</div>\r\n				\r\n				<div class="ml-ppos-account-form-row">\r\n					<label><span>*</span><span translate="lbl.ppos.confirmAccessPin"/></label>\r\n					<div class="ml-ppos-account-form-field"><input class="form-control" type="{{changePinModel.inputType}}" name="confirmPin" id="confirmPin" data-ng-model="changePinModel.confirmPin" maxlength="6" pattern="[0-9]*"/></div>\r\n				</div>\r\n			</div>\r\n\r\n		</div>\r\n	</form>\r\n</div>'),a.put("views/csr/CSRChangePassword.html",'<div class="ml-ppos-account-wrapper">\n	<form novalidate data-ng-submit="changePassword(changePasswordModel)">\n		<div class="ml-ppos-account-change-password-container">\n			<div class="ml-ppos-account-head-container">\n				<div class="ml-ppos-account-change-password-title"><span translate="lbl.ppos.changePassword"/></div>\n				<div class="ml-ppos-account-button-container">\n					<div class="ml-ppos-account-button-save"><button class="ml-ppos-primary-button" type="submit" name="save" id="save" translate="btn.ppos.save"/></div>\n					<div class="ml-ppos-account-button-cancel"><button class="ml-ppos-secondary-button" type="button" name="cancel" id="cancel" ng-click="openDashboardPage()" translate="btn.ppos.cancel"/></div>\n				</div>\n			</div>\n			\n			<!-- Error Block -->\n			<div class="ml-ppos-error-container" data-ng-show="changePasswordModel.showChangePasswordFailureMessage">\n				<div class="ml-icon-error" id="divMsgIconContainer"></div>\n				<div class="ml-ppos-error-message">\n					<div>{{ changePasswordModel.changePasswordFailureMessage | translate }}</div>\n				</div>\n			</div>\n			\n			<div class="ml-ppos-toggle-container ml-ppos-account-display-password-wrapper">\n				<span class="ml-ppos-account-display-password-title" translate="lbl.ppos.displayPassword"/>\n				<div class="ml-ppos-toggle btn-group btn-toggle" data-toggle="buttons">\n					<label class="ml-ppos-toggle-button btn" ng-class="{active : changePasswordModel.inputType == \'text\'}" ng-click="showHidePassword(\'text\')"><span translate="sel.ppos.showPassword"/>\n						<input type="radio" name="showHidePassword" id="showPassword"/>\n					</label>\n					<label class="ml-ppos-toggle-button btn" ng-class="{active : changePasswordModel.inputType == \'password\'}" ng-click="showHidePassword(\'masked\')"><span  translate="sel.ppos.hidePassowrd"/> \n						<input type="radio" name="showHidePassword" id="hidePassword" >\n					</label>\n				</div>\n			</div>\n\n			<div class="ml-ppos-account-form-container">\n				<div class="ml-ppos-account-form-row">\n					<label><span>*</span> <span translate="lbl.ppos.currentPassword"/></label>\n					<div class="ml-ppos-account-form-field"><input class="form-control" type="{{changePasswordModel.inputType}}" name="password" id="currentPassword" data-ng-model="changePasswordModel.currentPassword" maxlength="50" autocapitalize="off"/></div>\n				</div>\n				\n				<div class="ml-ppos-account-form-row">\n					<label><span>*</span> <span translate="lbl.ppos.newPassword"/></label>\n					<div class="ml-ppos-account-form-field"><input class="form-control" type="{{changePasswordModel.inputType}}" name="newPassword" id="newPassword" data-ng-model="changePasswordModel.newPassword" maxlength="50" autocapitalize="off"/></div>\n				</div>\n				\n				<div class="ml-ppos-account-form-row">\n					<label><span>*</span> <span translate="lbl.ppos.confirmPassword"/></label>\n					<div class="ml-ppos-account-form-field"><input class="form-control" type="{{changePasswordModel.inputType}}" name="confirmPassword" id="confirmPassword" data-ng-model="changePasswordModel.confirmPassword" maxlength="50" autocapitalize="off"/></div>\n				</div> \n			</div>\n\n		</div>\n	</form>\n</div>'),a.put("views/csr/CSRDeleteConfirmationModal.html",'<div class="ml-ppos-modal-container ml-ppos-csr-list-confirm-wrapper">\n    <div class="modal" id="csrDeleteConfirmationModal" tabindex="-1" role="dialog" aria-hidden="true">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h4 class="modal-title"><span translate="hdr.ppos.confirmDelete"/></h4>\n                </div>\n				<div class="ml-ppos-csr-list-confirm-message"><span translate="msg.ppos.csrConfirmDeleteMsg"/> <span>{{csrListDataModel.csrDeleteUser}}</span>\n				</div>\n				<div class="ml-ppos-csr-list-confirm-button-container">\n					<div class="ml-ppos-csr-list-confirm-button-save"><button class="ml-ppos-primary-button" type="button" name="ok" id="ok" ng-click="deleteCsrUser();"  translate="btn.ppos.ok"/></div>\n					<div class="ml-ppos-csr-list-confirm-button-cancel"><button class="ml-ppos-secondary-button" type="button" name="cancel" id="cancel" ng-click="closeDelConfirmModal();" translate="btn.ppos.cancel"/></div>\n				</div>					\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("views/csr/CSREdit.html",'<div class="ml-ppos-account-wrapper">\r\n	<div class="ml-ppos-add-csr-container">\r\n	<form novalidate>\r\n		<div class="ml-ppos-add-csr-head-row">\r\n			<div class="ml-ppos-add-csr-title">\r\n				<a href="" ng-click="goToManagementScreen();"><i class="ml-ppos-mini-white-icon ml-ppos-arrow-left"></i> <span translate="lbl.ppos.management"/></a>\r\n			</div>\r\n			<div class="ml-ppos-add-csr-add-buttons">\r\n				<button type="button" name="cancelButton" class="ml-ppos-secondary-button" id="cancelButton" translate="btn.ppos.cancel" ng-click="goToCsrListScreen();"></button><button type="submit" name="saveButton" class="ml-ppos-primary-button" id="saveButton" translate="btn.ppos.save" data-ng-click="updateCSR(csr)"></button>\r\n			</div>\r\n		</div>\r\n\r\n		<!-- Error Block Start -->\r\n		<div class="ml-ppos-error-container" data-ng-show="csr.showCsrOpFailureMessage">\r\n			<div class="ml-icon-error" id="divMsgIconContainer"></div>\r\n			<div class="ml-ppos-error-message">\r\n				<div>{{ csr.csrOpFailureMessage | translate }}</div>\r\n			</div>\r\n		</div>\r\n		<!-- Error Block End -->\r\n		<div class="ml-ppos-add-csr-form">\r\n			<div class="ml-ppos-add-csr-image"></div>\r\n			<div class="ml-ppos-add-csr-content">\r\n				<div class="ml-ppos-add-csr-row">\r\n					<label><span translate="lbl.ppos.employeeId"/></label>\r\n					<div class="ml-ppos-add-csr-input ml-ppos-edit-csr-disable"><span name="employeeId">{{csr.employeeId}}</span></div>\r\n				</div>\r\n\r\n				<div class="ml-ppos-add-csr-row">\r\n					<label><span>*</span> <span translate="lbl.ppos.firstName"/></label>\r\n					<div class="ml-ppos-add-csr-input"><input type="text" name="firstName" id="firstName" maxlength="40" class="form-control" data-ng-model="csr.firstName" /></div>\r\n				</div>\r\n\r\n				<div class="ml-ppos-add-csr-row">\r\n					<label><span>*</span> <span translate="lbl.ppos.lastName"/></label>\r\n					<div class="ml-ppos-add-csr-input"><input type="text" name="lastName" id="lastName" maxlength="40" class="form-control" data-ng-model="csr.lastName" /></div>\r\n				</div>\r\n\r\n				<div class="ml-ppos-add-csr-row">\r\n					<label><span>*</span> <span translate="lbl.ppos.userID"/></label>\r\n					<div class="ml-ppos-add-csr-input ml-ppos-edit-csr-disable"><span name="email">{{csr.email}}</span></div>\r\n				</div>\r\n				<div class="ml-ppos-add-csr-row ml-ppos-add-input-pin-message">\r\n					<label></label>\r\n					<div class="ml-ppos-add-csr-input"><span translate="User email"/></div>\r\n				</div>\r\n\r\n				\r\n				<div class="ml-ppos-add-csr-row">\r\n					<label><span>*</span> <span translate="lbl.ppos.roleType"/></label>\r\n					<div class="ml-ppos-add-csr-input ml-ppos-toggle-container">\r\n						<div data-ng-show="csr.roleType.length == 2" class="ml-ppos-toggle btn-group btn-toggle">\r\n							<label class="ml-ppos-toggle-button btn" ng-class="{active : option.id == csr.selectedRole}" data-ng-repeat="option in csr.roleType" id="lblRoleRadio{{option.id}}">\r\n								<input type="radio" data-ng-model="csr.selectedRole"  name="roleTypeRadio" id="roleTypeRadio" value="{{option.id}}" data-ng-change="populateCSRTypeDetails(csr.selectedRole)"/> <span>{{ option.code | translate }}</span>\r\n							</label>\r\n						</div>\r\n						<div data-ng-show="csr.roleType.length != 2" class="ml-ppos-edit-csr-role">\r\n							<select name="roleTypeSelect" id="roleTypeSelect" class="form-control-select" data-ng-model="csr.selectedRole" data-ng-change="populateCSRTypeDetails(csr.selectedRole)"> \r\n								<option ng-repeat="option in csr.roleType" ng-selected="{{option.id == csr.selectedRole}}" value="{{option.id}}">{{ option.code | translate }}</option>\r\n							</select>\r\n						</div>\r\n					</div>\r\n				</div>\r\n\r\n				<div class="ml-ppos-add-csr-row ml-ppos-toggle-container">\r\n					<label><span>*</span> <span translate="lbl.ppos.activeStatus"/></label>\r\n					<div class="ml-ppos-add-csr-input ml-ppos-toggle btn-group btn-toggle" data-toggle="buttons">\r\n						<label id="lblActive" class="ml-ppos-toggle-button btn" ng-class="{active : csr.activeStatus.toString() == \'true\'}" data-ng-click="setStatus(true)">\r\n							<input type="radio" name="activeStatus" id="activeStatus" value="true" data-ng-model="csr.activeStatus" /> <span translate="lbl.ppos.active"/></label>\r\n						<label id="lblInactive" class="ml-ppos-toggle-button btn" ng-class="{active : csr.activeStatus.toString() == \'false\'}" data-ng-click="setStatus(false)">\r\n							<input type="radio" name="activeStatus" id="activeStatus" value="false" data-ng-model="csr.activeStatus"/> <span translate="lbl.ppos.inactive"/>\r\n						</label>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		</form>\r\n			<!-- Permission Block Start -->\r\n			<div class="ml-ppos-add-csr-permission-wrapper">\r\n				<div class="ml-ppos-add-csr-permission-head">\r\n					<button class="btn" type="button" data-toggle="collapse" data-target="#collapseDiv" aria-expanded="false" aria-controls="collapse" ng-click="showHidePermission();"><i id="permissionDivElement" class="ml-icon-lib ml-icon-plus"></i> <span translate="hdr.ppos.permissions"/></button>\r\n				</div>\r\n				<div class="collapse" id="collapseDiv">\r\n					<div id="permissionListDiv"></div>\r\n				</div>\r\n			</div>\r\n			<!-- Permission Block End -->\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Following script tag added for fixing PEBL-16516 -->\r\n<script>\r\n'+"$('#saveButton').on('touchend', function(e){\r\n    e.stopPropagation(); e.preventDefault();\r\n	$('#saveButton').trigger('click');\r\n});\r\n$('#cancelButton').on('touchend', function(e){\r\n	e.stopPropagation(); e.preventDefault();\r\n	// following is the hack to hide soft keyboard\r\n	document.activeElement.blur();\r\n	$('input').blur();\r\n	$('select').blur();\r\n	$('#cancelButton').trigger('click');\r\n});\r\n</script>\r\n"),a.put("views/csr/CSRList.html",'<div class="ml-ppos-account-wrapper">\n	<div class="ml-ppos-csr-list-container">\n	\n		<div class="ml-ppos-csr-list-head-row">\n			<div class="ml-ppos-csr-list-title">\n				<a href="" ng-click="goToManagementScreen();"><i class="ml-ppos-mini-white-icon ml-ppos-arrow-left"></i> <span translate="lbl.ppos.management"/></a>\n			</div>\n			<div class="ml-ppos-csr-list-toggle ml-ppos-toggle-container">\n				<div class="ml-ppos-toggle btn-group btn-toggle" data-toggle="buttons">\n					<label class="ml-ppos-toggle-button btn" ng-class="{active : csrListDataModel.csrListType == \'ALL\'}" data-ng-click="getAllCSRs();"><span translate="lbl.ppos.viewAll"/>\n						<input type="radio" name="showCsrUser" id="showAll"/>\n					</label>\n					<label class="ml-ppos-toggle-button btn" ng-class="{active : csrListDataModel.csrListType == \'ACTIVE\'}" data-ng-click="getActiveCSRs();"><span translate="lbl.ppos.activeOnly"/>\n						<input type="radio" name="showCsrUser" id="showActiveOnly" >\n					</label>\n					<label class="ml-ppos-toggle-button btn" ng-class="{active : csrListDataModel.csrListType == \'INACTIVE\'}" data-ng-click="getInActiveCSRs();"><span translate="Inactive Only"/>\n						<input type="radio" name="showCsrUser" id="showInActiveOnly" >\n					</label>\n				</div>\n			</div>\n			<div class="ml-ppos-csr-list-add-button">\n				<a href="javascript:;" name="csrAddNew" id="csrAddNew" ng-click="goToCsrAddScreen();"><span class="ml-ppos-mini-white-icon ml-ppos-plus"></a>\n			</div>\n		</div>\n\n		<div class="ml-ppos-csr-list-item-wrapper">\n			<div class="ml-ppos-csr-list-item-row ml-ppos-csr-list-item-row-head">\n				<div class="ml-ppos-csr-list-item-status"><span translate="lbl.ppos.status"/></div>\n				<div class="ml-ppos-csr-list-item-id"><span translate="lbl.ppos.id"/></div>\n				<div class="ml-ppos-csr-list-item-first-name"><span translate="lbl.ppos.firstName"/></div>\n				<div class="ml-ppos-csr-list-item-last-name"><span translate="lbl.ppos.lastName"/></div>\n				<div class="ml-ppos-csr-list-item-user-name"><span translate="lbl.ppos.userName"/></div>\n				<div class="ml-ppos-csr-list-item-delete"></div>\n				<div class="ml-ppos-csr-list-item-edit"></div>\n			</div>\n			\n			<div class="ml-ppos-csr-list-item-row ml-ppos-csr-list-item-row-head" ng-show="!csrListDataModel.userData.length">\n				<span translate="msg.ppos.noRecordFound"/>\n			</div>\n\n			<div ng-show="showUserRow(\'{{items.typePPOS}}\');" class="ml-ppos-csr-list-item-row" ng-repeat="items in csrListDataModel.userData">\n				<div class="ml-ppos-csr-list-item-status">\n					<div class="ml-ppos-csr-list-item-status-active" data-ng-show="isActive(\'{{items.active}}\', \'showActive\');">Active</div>\n					<div class="ml-ppos-csr-list-item-status-inactive" data-ng-show="isActive(\'{{items.active}}\', \'showInactive\');">Inactive</div>\n				</div>\n				<div class="ml-ppos-csr-list-item-id">{{items.employeeID}}</div> \n				<div class="ml-ppos-csr-list-item-first-name">{{items.firstName}}</div>\n				<div class="ml-ppos-csr-list-item-last-name">{{items.lastName}}</div>\n				<div class="ml-ppos-csr-list-item-user-name">{{items.email}}</div>\n				<div class="ml-ppos-csr-list-item-delete" ><a href="" ng-show="showDelete(\'{{items.active}}\', \'{{items.typePPOS}}\');" ng-click="deleteUser(items.id, items.email);"><span class="ml-ppos-mini-white-icon ml-ppos-close"></a></div>\n				<csr-delete-confirmation-modal></csr-delete-confirmation-modal>\n				<div class="ml-ppos-csr-list-item-edit"><a href="" ng-show="showEdit(\'{{items.typePPOS}}\');" data-ng-click="goToCsrEditScreen(items.id);"><span class="ml-ppos-mini-white-icon ml-ppos-todo"></a></div>\n			</div>\n		</div>\n\n	</div>\n</div>\n\n'),a.put("views/customer/CustomerProfileInformationModal.html",'<div class="ml-ppos-modal-container ml-ppos-customer-profile-wrapper">\r\n	<div class="modal" id="customerProfileInformation" tabindex="-1" role="dialog" aria-hidden="true">\r\n		<div class="modal-dialog">\r\n			<div class="modal-content">\r\n				\r\n				<div id="customerProfileForm" name= "customerProfileForm" ng-hide=\'customerFormDiv\'>\r\n					<form novalidate id="frmSaveUpdateCustomer">\r\n						<div class="modal-header">\r\n							<button type="button" class="close" data-ng-click="closeProfileInformationModal()" data-dismiss="modal" aria-label="Close" id="btnCloseCustomerProfileModal"><span aria-hidden="true"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\r\n							<h4 class="modal-title"><span translate="hdr.ppos.customerProfileInformation"/></h4>\r\n						</div>\r\n						<div class="ml-ppos-customer-profile-form-container">\r\n							<!-- Error Block Start -->\r\n							<div class="ml-ppos-error-container" data-ng-show="customerDO.showOpFailureMessage">\r\n								<div class="ml-icon-error"></div>\r\n								<div class="ml-ppos-error-message">\r\n									<div>{{ customerDO.opFailureMessage | translate }}</div>\r\n								</div>\r\n							</div>\r\n							<!-- Error Block End -->\r\n							<div class="ml-ppos-customer-profile-row">\r\n								<label>* <span translate="lbl.ppos.phoneNumber"/></label>\r\n								<div class="ml-ppos-account-form-field"><input type="tel" name="phoneNumber" id="phoneNumber" maxlength="10" class="form-control" data-ng-model="customerDO.phoneNumber"/></div>\r\n							</div>\r\n							<div class="ml-ppos-customer-profile-row">\r\n								<label>* <span translate="lbl.ppos.firstName"/></label>\r\n								<div class="ml-ppos-account-form-field"><input type="text" name="firstName" id="firstName" maxlength="40" class="form-control" data-ng-model="customerDO.firstName"/></div>\r\n							</div>\r\n							<div class="ml-ppos-customer-profile-row">\r\n								<label>* <span translate="lbl.ppos.lastName"/></label>\r\n								<div class="ml-ppos-account-form-field"><input type="text" name="lastName" id="lastName" maxlength="40" class="form-control" data-ng-model="customerDO.lastName"/></div>\r\n							</div>\r\n							<div class="ml-ppos-customer-profile-row">\r\n								<label>* <span translate="lbl.ppos.email"/></label>\r\n								<div class="ml-ppos-account-form-field"><input type="email" name="email" id="email" maxlength="100" class="form-control" data-ng-model="customerDO.email"/></div>\r\n							</div>\r\n							<div class="ml-ppos-customer-profile-row">\r\n								<label>* <span translate="lbl.ppos.password"/></label>\r\n								<div class="ml-ppos-account-form-field"><input type="password" name="password" id="password" maxlength="100" class="form-control" data-ng-model="customerDO.password"/></div>\r\n							</div>\r\n							<div class="ml-ppos-customer-profile-row">\r\n								<label>* <span translate="lbl.ppos.confirmPassword"/></label>\r\n								<div class="ml-ppos-account-form-field"><input type="password" name="confirmPassword" id="confirmPassword" maxlength="100" class="form-control" data-ng-model="customerDO.confirmPassword"/></div>\r\n							</div>\r\n							<div class="ml-ppos-customer-profile-row">\r\n								<label>* <span translate="lbl.ppos.securityQuestion"/></label>\r\n								<div class="ml-ppos-account-form-field"><select name="hint" class="form-control" id="hint" data-ng-model="customerDO.hint"> \r\n									<option ng-repeat="option in customerDO.securityQuestions" value="{{option.id}}" ng-selected="{{option.id == customerDO.hint}}">{{ option.question | translate }}</option>\r\n								</select></div>\r\n							</div>\r\n							<div class="ml-ppos-customer-profile-row">\r\n								<label>* <span translate="lbl.ppos.securityAnswer"/></label>\r\n								<div class="ml-ppos-account-form-field ml-ppos-account-form-last-item"><input type="text" name="hintAnswer" id="hintAnswer" maxlength="100" class="form-control" data-ng-model="customerDO.hintAnswer"/></div>\r\n							</div>\r\n							<div class="ml-ppos-customer-profile-button-container">\r\n								<div><button type="submit" name="btnSaveUpdateCustomer" class="ml-ppos-primary-button" id="btnSaveUpdateCustomer" translate="btn.ppos.saveCustomer" data-ng-click="saveOrUpdateCustomer(customerDO)"></button></div>\r\n								<div><button type="button" name="btnCancelSaveUpdateCustomer" class="ml-ppos-secondary-button" id="btnCancelSaveUpdateCustomer" translate="btn.ppos.cancel" data-ng-click="closeProfileInformationModal();" data-dismiss="modal"></button></div>\r\n							</div>\r\n						</div>\r\n					</form>\r\n				</div>\r\n\r\n				<div data-ng-show="customerSearchDataModel.existingPhoneCustomerResult != null" class="ml-ppos-customer-profile-details" >\r\n					<div class="modal-body">\r\n						<div class="ml-ppos-customer-profile-details-message" translate="msg.ppos.customerSearchResultByPhone" translate-values="{ customerPhoneNumber : customerSearchDataModel.customerPhoneNumber }"></div>\r\n						<div data-ng-repeat="customer in customerSearchDataModel.existingPhoneCustomerResult.data" class="ml-ppos-customer-profile-details-row">\r\n							<a href="" data-ng-click="updateSelectedContact(customer.id, customer.primaryContact.id, customerDO)">{{ customer.primaryContact.person.firstName }} {{ customer.primaryContact.person.lastName }} <span class="ml-ppos-customer-search-zip-code">{{ customer.primaryContact.address.postalCode }}</span> <span> {{ customer.email }} </span><i class="ml-ppos-mini-white-icon ml-ppos-arrow-right"></i></a>\r\n						</div>\r\n					</div>\r\n					<div class="modal-footer ml-ppos-customer-profile-button-container">\r\n						<div><button type="button" class="ml-ppos-primary-button" data-ng-click="saveCustomer(customerDO)"><span translate="btn.ppos.saveCustomer"/></button></div>\r\n						<div><button type="button" class="ml-ppos-secondary-button" data-ng-click="closeSearchModal();"><span translate="btn.ppos.cancel"/></button></div>\r\n					</div>\r\n				</div>\r\n\r\n				<div data-ng-show="customerSearchDataModel.existingEmailCustomerResult != null" class="ml-ppos-customer-profile-details ml-ppos-customer-result-byemail">\r\n					<div class="modal-body">\r\n						<div class="ml-ppos-customer-profile-details-message" translate="msg.ppos.customerSearchResultByEmail" translate-values="{ customerEmail : customerSearchDataModel.existingEmail }"></div>\r\n						<div data-ng-repeat="customer in customerSearchDataModel.existingEmailCustomerResult.data" class="ml-ppos-customer-profile-details-row">\r\n							<div class="ml-ppos-customer-result-byemail-info">\r\n								<div>{{ customer.primaryContact.person.firstName }} {{ customer.primaryContact.person.lastName }}</div>\r\n								<div>{{ customer.primaryContact.address.postalCode }}</div>\r\n								<div>{{ customer.email }}</div>\r\n							</div>\r\n							<div class="modal-footer ml-ppos-customer-profile-button-container">\r\n								<div><button type="button" class="ml-ppos-primary-button" data-ng-click="updateSelectedContact(customer.id, customer.primaryContact.id, customerDO)"><span translate="btn.ppos.saveCustomer"/></button></div>\r\n								<div><button type="button" class="ml-ppos-secondary-button" data-ng-click="closeSearchModal();"><span translate="btn.ppos.cancel"/></button></div>\r\n							</div>\r\n						</div>\r\n					</div>\r\n					\r\n				</div>\r\n\r\n			</div>\r\n\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- Following script tag added for fixing PEBL-16484 -->\r\n<script>\r\n'+"$('#btnSaveUpdateCustomer').on('touchend', function(e){\r\n    e.stopPropagation(); e.preventDefault();\r\n	$('#btnSaveUpdateCustomer').trigger('click');\r\n});\r\n$('#btnCancelSaveUpdateCustomer').on('touchend', function(e){\r\n	e.stopPropagation(); e.preventDefault();\r\n	// following is the hack to hide soft keyboard\r\n	document.activeElement.blur();\r\n	$('input').blur();\r\n	$('select').blur();\r\n	$('#btnCancelSaveUpdateCustomer').trigger('click');\r\n});\r\n</script>"),
a.put("views/dashboard/Dashboard.html",'<div class="ml-ppos-main-wrapper">\n	<div class="ml-ppos-dashboard-wrapper">\n		<!-- Instore Pickup Start -->\n		<div class="ml-ppos-dashboard-instore-pickup-widget-wrapper" data-ng-controller="inStorePickupOrderShipmentsController">\n			<div class="ml-ppos-dashboard-instore-pickup-bar"></div>\n			<div class="ml-ppos-dashboard-instore-pickup-container">\n				<div class="ml-ppos-dashboard-instore-pickup-content">\n					<div class="ml-ppos-dashboard-header-wrapper">\n						<div class="ml-ppos-dashboard-header-icon-left"><span class="ml-ppos-mini-white-icon ml-ppos-store"></span></div>\n						<div class="ml-ppos-dashboard-header-message"><a data-ng-href="#/inStorePickupOrderShipments" translate>hdr.ppos.inStorePickup</a></div>\n						<div class="ml-ppos-dashboard-header-icon-right"><a data-ng-href="#/inStorePickupOrderShipments"><span class="ml-ppos-mini-white-icon ml-ppos-arrow-right"></span></a></div>\n					</div>\n					<div data-ng-include="\'views/dashboard/InStorePickupOrderShipmentsWidget.html\'"></div>\n				</div>\n			</div>\n		</div>\n		<!-- Instore Pickup End -->\n		\n		<div class="ml-ppos-dashboard-middle-container">\n			<div class="ml-ppos-dashboard-search-widget-wrapper">\n				<!-- Product Search Start -->\n				<div class="ml-ppos-dashboard-product-search-widget">\n					<div class="ml-ppos-dashboard-product-search-widget-bar"></div>\n					<div class="ml-ppos-dashboard-product-search-widget-container">\n						<div class="ml-ppos-dashboard-product-search-widget-content">\n							<h2 translate>hdr.ppos.product</h2>\n							<div class="ml-ppos-dashboard-product-search-button-wrapper">\n								<div class="ml-ppos-product-scan">\n                                    <ml-barcode-search data-display-as-modal="true"\n                                                       data-modal-title="Product Scan"\n                                                       data-service-url="/api/scan/skus/UPC_CODE"\n													   data-service-post-data="skuBarcodeSearchPostData"\n													   data-scan-success-callback="scanSuccessHandler()"\n													   data-create-basket="true"\n                                                       data-forward-url="/basket"\n													   data-cancel-btn-resource="btn.ppos.close"\n													   data-continue-btn-resource="btn.ppos.done"\n													   data-multi-add-msg-resource="msg.ppos.itemWithCodeAddedToBasket"\n													   data-multi-add-count-resource="msg.ppos.scanAnotherProduct"\n											></ml-barcode-search>\n                                </div>\n								<div class="ml-ppos-product-search">\n									<a href="javascript:;" class="ml-ppos-product-search-button" data-toggle="modal" data-target="#productSearchModal"><span class="ml-ppos-grey-icon ml-ppos-search"></span><span translate="btn.ppos.searchProduct"></span></a>\n									<product-search-modal></product-search-modal>\n									<product-detail-modal></product-detail-modal>\n									<near-by-stores-modal></near-by-stores-modal>\n								</div>\n								<!-- <div class="ml-ppos-product-browse">\n									<a href="javascript:;" class="ml-ppos-product-browse-button"><span class="ml-ppos-grey-icon ml-ppos-browse"></span>Browse</a>\n								</div> -->\n							</div>\n						</div>\n					</div>\n				</div>\n				<!-- Product Search End -->\n				<!-- Order Search Start -->\n				<div class="ml-ppos-dashboard-order-search-widget">\n					<div class="ml-ppos-dashboard-order-search-widget-bar"></div>\n					<div class="ml-ppos-dashboard-order-search-widget-container">\n						<div class="ml-ppos-dashboard-order-search-widget-content">\n							<h2 translate>hdr.ppos.order</h2>\n							<div class="ml-ppos-dashboard-product-search-button-wrapper">\n								<!-- <div class="ml-ppos-product-scan">\n									<a href="javascript:;" class="ml-ppos-product-scan-button"><span class="ml-ppos-grey-icon ml-ppos-scan-barcode"></span><span translate="btn.ppos.scanOrderReceipt"></span></a>\n								</div> -->\n								<div class="ml-ppos-product-search">\n									<a href="javascript:;" class="ml-ppos-product-search-button" data-toggle="modal" data-target="#orderSearchModal"><span class="ml-ppos-grey-icon ml-ppos-search"></span><span translate="btn.ppos.searchOrder"></span></a>\n									<order-search-modal></order-search-modal>\n								</div>\n								<div class="ml-ppos-product-browse" data-ng-controller="customerSearchModalController">\n									<a href="javascript:;" class="ml-ppos-product-browse-button" data-ng-click="showCustomerSearchModal()"><span class="ml-ppos-grey-icon ml-ppos-plus"></span><span translate="btn.ppos.orderNew"></span></a>\n									<customer-search-modal></customer-search-modal>\n								</div>\n							</div>\n						</div>\n					</div>\n				</div>\n				<!-- Order Search End -->\n				<!-- Customer Search Start -->\n				<div class="ml-ppos-dashboard-customer-search-widget">\n					<div class="ml-ppos-dashboard-customer-search-widget-bar"></div>\n					<div class="ml-ppos-dashboard-customer-search-widget-container">\n						<div class="ml-ppos-dashboard-customer-search-widget-content">\n							<h2 translate>hdr.ppos.customer</h2>\n							<div class="ml-ppos-dashboard-product-search-button-wrapper">\n								<!-- <div class="ml-ppos-product-scan">\n									<a href="javascript:;" class="ml-ppos-product-scan-button"><span class="ml-ppos-grey-icon ml-ppos-scan-barcode"></span><span translate="btn.ppos.loyalty"></span></a>\n								</div> -->\n								<div class="ml-ppos-product-search" data-ng-controller="customerSearchModalController">\n									<a href="javascript:;" class="ml-ppos-product-search-button" data-ng-click="showCustomerSearchModal()"><span class="ml-ppos-grey-icon ml-ppos-search"></span><span translate="btn.ppos.searchCustomer"></span></a>\n									<!--<customer-search-modal></customer-search-modal>-->\n								</div>\n								<div class="ml-ppos-product-browse">\n									<a href="javascript:;" class="ml-ppos-product-browse-button" data-ng-click="customerProfileInformationModal(\'dashboard\');"><span class="ml-ppos-grey-icon ml-ppos-plus"></span><span translate="btn.ppos.customerNew"></a>\n									<customer-profile-information-modal></customer-profile-information-modal>\n								</div>\n							</div>\n						</div>\n					</div>\n				</div>\n				<!-- Customer Search End -->\n\n				<!-- Email Signup Start -->\n				<div class="ml-ppos-dashboard-email-signup-widget">\n					<div class="ml-ppos-dashboard-email-signup-widget-bar"></div>\n					<div class="ml-ppos-dashboard-email-signup-widget-container">\n						<div class="ml-ppos-dashboard-email-signup-widget-content">\n							<div data-ng-include="\'views/dashboard/EmailSignupWidget.html\'" data-ng-controller="emailSignupController"></div>\n						</div>\n					</div>\n				</div>\n				<!-- Email Signup End -->\n			</div>\n\n		</div>\n		<div class="ml-ppos-dashboard-right-container">\n			<!-- Shopping Bag Start -->\n			<div class="ml-ppos-dashboard-bag-widget-wrapper">\n				<div class="ml-ppos-dashboard-bag-widget-bar"></div>\n				<div class="ml-ppos-dashboard-bag-widget-container">\n					<div class="ml-ppos-dashboard-bag-widget-content">\n						<!-- Shopping Bag Header Start -->\n						<div class="ml-ppos-dashboard-header-wrapper">\n							<div class="ml-ppos-dashboard-header-icon-left"><span class="ml-ppos-mini-white-icon ml-ppos-circle-bag"></span></div>\n							<div class="ml-ppos-dashboard-header-message" translate>hdr.ppos.shoppingBag</div>\n							<div class="ml-ppos-dashboard-header-icon-right"><a href="javascript:;" data-ng-click="openBasketPage();" class=""><span class="ml-ppos-mini-white-icon ml-ppos-arrow-right"></span></a></div>\n						</div>\n						<!-- Shopping Bag Header End -->\n						<div class="ml-ppos-dashboard-bag-widget-button-wrapper" data-ng-controller="customerSearchModalController">\n							<a href="javascript:;" class="ml-ppos-dashboard-bag-new-order-button" data-ng-click="showCustomerSearchModal()">\n								<span class="ml-ppos-btn-inner">\n									<span class="ml-ppos-btn-text" translate>btn.ppos.newOrder</span>\n									<span class="ml-ppos-btn ml-ppos-mini-grey-icon ml-ppos-plus"></span>\n								</span>\n							</a>\n							<!--<customer-search-modal></customer-search-modal>-->\n						</div>\n					</div>\n					<div class="ml-ppos-dashboard-saved-bag-widget-content">\n						<div data-ng-include="\'views/dashboard/SavedBasketsWidget.html\'" data-ng-controller="savedBasketsController"></div>\n					</div>\n				</div>\n			</div>\n			<!-- Shopping Bag End -->\n		</div>\n	</div>\n</div>\n'),a.put("views/dashboard/EmailSignupWidget.html",'<!-- Email Signup Header Start -->\n<div class="ml-ppos-dashboard-header-wrapper">\n	<div class="ml-ppos-dashboard-header-icon-left"><span class="ml-icon-lib ml-icon-email"></span></div>\n	<div class="ml-ppos-dashboard-header-message" translate>hdr.ppos.emailSignUp</div>\n</div>\n<!-- Email Signup Header End -->\n\n<!-- Email Signup Body Start -->\n<form novalidate name="emailSignupForm" data-ng-submit="emailSignup()">\n	<div class="ml-ppos-dashboard-email-signup-form">\n		<div class="ml-ppos-email-input">\n			<span translate="lbl.ppos.email" />\n			<input type="email" name="emailId" id="emailId" data-ng-model="emailSignupDataModel.email" class="ml-ppos-input-text" />\n		</div>\n\n		<div class="ml-ppos-name-container">\n			<div class="ml-ppos-first-name-input">\n				<span translate="lbl.ppos.firstName" />\n				<input type="text" name="firstName" data-ng-model="emailSignupDataModel.firstName" class="ml-ppos-input-text" />\n			</div>\n\n			<div class="ml-ppos-last-name-input">\n				<span translate="lbl.ppos.lastName" />\n				<input type="text" name="lastName" data-ng-model="emailSignupDataModel.lastName" class="ml-ppos-input-text" />\n			</div>\n		</div>\n\n		<div class="ml-ppos-signup-button">\n			<span class="ml-ppos-btn-inner">\n				<span class="ml-ppos-btn-text" translate>btn.ppos.signUp</span>\n				<span class="ml-ppos-btn ml-ppos-mini-white-icon ml-ppos-arrow-right"></span>\n			</span>\n			<button type="submit" name="emailSignupButton" id="emailSignupButton" class="ml-ppos-btn-hidden">Sign Up</button>\n		</div>\n	</div>\n</form>\n<!-- Email Signup Body End -->\n\n<!-- Success Message -->\n<div class="ml-ppos-modal-container ml-ppos-product-search-wrapper">\n	<div class="modal" id="emailSignupSuccessModal" tabindex="-1" role="dialog" aria-hidden="true">\n		<div class="modal-dialog">\n			<div class="modal-content">\n\n				<div class="modal-body">\n					<div class="ml-ppos-error-container">\n						<div class="ml-icon-success"></div>\n						<div class="ml-ppos-error-message">\n							<div translate>msg.ppos.emailSignUpSuccess</div>\n						</div>\n					</div>\n				</div>\n				\n				<div class="modal-footer ml-ppos-button-product-search">\n					<div><button type="submit" name="emailSignupSuccessOkButton" id="emailSignupSuccessOkButton" data-dismiss="modal" class="ml-ppos-primary-button" translate="btn.ppos.ok"></button></div>\n				</div>\n\n			</div>\n		</div>\n	</div>\n</div>\n\n<!-- Error Message -->\n<div class="ml-ppos-modal-container ml-ppos-product-search-wrapper">\n	<div class="modal" id="emailSignupErrorModal" tabindex="-1" role="dialog" aria-hidden="true">\n		<div class="modal-dialog">\n			<div class="modal-content">\n\n				<div class="modal-body">\n					<div data-ng-show="emailSignupDataModel.hasValidationErrors" class="ml-ppos-error-container">\n						<div class="ml-icon-error"></div>\n						<div class="ml-ppos-error-message">\n							<div data-ng-repeat="validationError in emailSignupDataModel.validationErrors">{{ validationError }}</div>\n						</div>\n					</div>\n				</div>\n				\n				<div class="modal-footer ml-ppos-button-product-search">\n					<div><button type="submit" name="emailSignupErrorOkButton" id="emailSignupErrorOkButton" data-dismiss="modal" class="ml-ppos-primary-button" translate="btn.ppos.ok"></button></div>\n				</div>\n\n			</div>\n		</div>\n	</div>\n</div>\n'),a.put("views/dashboard/InStorePickupOrderShipmentsWidget.html",'<div class="ml-ppos-dashboard-instore-pickup-content-wrapper">\n	<div class="ml-ppos-dashboard-instore-pickup-item-row">\n		<div class="ml-ppos-dashboard-instore-pickup-content-row">\n			<div class="ml-ppos-instore-pickup-new-order"><a data-ng-href="#/pickupNewOrderShipments"><i class="ml-ppos-instore-pickup-circle-new"></i>{{ \'hdr.ppos.inStorePickup.newPickup\' | translate }} <span class="ml-ppos-instore-pickup-count">{{ inStorePickupOrderShipmentsDataModel.Ordered.length }}</span></a></div>\n		</div>\n		<div class="ml-ppos-scroll-container" data-ng-if="inStorePickupOrderShipmentsDataModel.Ordered.length">\n			<div class="ml-ppos-instore-pickup-new-order-items ml-ppos-instore-pickup-new-order-head">\n				<div class="ml-ppos-instore-pickup-item-order" translate>hdr.ppos.inStorePickup.orderNumber</div>\n				<div class="ml-ppos-instore-pickup-item-date" translate>hdr.ppos.inStorePickup.orderDate</div>\n				<div class="ml-ppos-instore-pickup-item-customer" translate>hdr.ppos.inStorePickup.customer</div>\n			</div>\n\n			<div class="ml-ppos-instore-pickup-new-order-items" data-ng-repeat="pickupNewOrderShipment in inStorePickupOrderShipmentsDataModel.Ordered">\n				<div class="ml-ppos-instore-pickup-item-order">#{{ pickupNewOrderShipment.order.code }}</div>\n				<div class="ml-ppos-instore-pickup-item-date">{{pickupNewOrderShipment.order.orderDate | date : \'medium\'}}</div>\n				<div class="ml-ppos-instore-pickup-item-customer">{{ pickupNewOrderShipment.order.billToInfo.firstName }} {{ pickupNewOrderShipment.order.billToInfo.lastName }}</div>\n			</div>\n		</div>\n	</div>\n	<div class="ml-ppos-dashboard-instore-pickup-content-row">\n		<div><a data-ng-href="#/pickupInProcessOrderShipments"><i class="ml-ppos-instore-pickup-circle-process"></i>{{ \'hdr.ppos.inStorePickup.inProcess\' | translate }} <span class="ml-ppos-instore-pickup-count">{{ inStorePickupOrderShipmentsDataModel.PickupInProcess.length }}</span></a></div>\n	</div>\n	<div class="ml-ppos-dashboard-instore-pickup-content-row">\n		<div><a data-ng-href="#/pickupReadyOrderShipments"><i class="ml-ppos-instore-pickup-circle-ready"></i>{{ \'hdr.ppos.inStorePickup.pickUpReady\' | translate }} <span class="ml-ppos-instore-pickup-count">{{ inStorePickupOrderShipmentsDataModel.PickupReady.length }}</span></a></div>\n	</div>\n	<div class="ml-ppos-dashboard-instore-pickup-content-row">\n		<div><a data-ng-href="#/pickupDoneOrderShipments"><i class="ml-ppos-instore-pickup-circle-done"></i>{{ \'hdr.ppos.inStorePickup.done\' | translate }} <span class="ml-ppos-instore-pickup-count">{{ inStorePickupOrderShipmentsDataModel.Shipped.length }}</span></a></div>\n	</div>\n</div>\n'),a.put("views/dashboard/SavedBasketsWidget.html",'<!-- Saved Baskets Header Start -->\n<div class="ml-ppos-dashboard-header-wrapper">\n	<div class="ml-ppos-dashboard-header-icon-left"><span class="ml-ppos-mini-white-icon ml-ppos-circle-bag"></span></div>\n	<div class="ml-ppos-dashboard-header-message" translate>hdr.ppos.saved</div>\n</div>\n<!-- Saved Baskets Header End -->\n\n<!-- Saved Baskets Body Start -->\n<div class="ml-ppos-dashboard-saved-bag-widget-items-container">\n	<div class="ml-ppos-scroll-container">\n		<div data-ng-repeat="savedBasket in savedBasketsDataModel.baskets" class="ml-ppos-dashboard-saved-bag-widget-items">\n			<div>\n				<div class="ml-ppos-dashboard-saved-bag-widget-items-detail">\n					<a data-ng-click="openSavedBasket(savedBasket.customer.id, savedBasket.id)">\n						<div class="ml-ppos-dashboard-saved-bag-widget-customer-name">\n							<span data-ng-if="savedBasket.customer.guest">\n								<span data-ng-if="savedBasket.customer.primaryContact.phone1">\n									{{ savedBasket.customer.primaryContact.phone1 }}\n								</span>\n								<span data-ng-if="!savedBasket.customer.primaryContact.phone1" translate>hdr.ppos.guest</span>\n							</span> \n							<span data-ng-if="!savedBasket.customer.guest">{{ savedBasket.customer.primaryContact.person.firstName }} {{ savedBasket.customer.primaryContact.person.lastName }}</span> \n						</div>\n						{{savedBasket.dateModified | date : \'medium\'}}\n						<div><span translate>lbl.ppos.totalAmount</span> {{ savedBasket.total }}</div>\n					</a>\n				</div>\n				<div class="ml-ppos-dashboard-saved-bag-widget-items-button">			\n					<a data-ng-click="deleteSavedBasket(savedBasket.id)"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></a>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n<!-- Saved Baskets Body End -->'),a.put("views/home/Home.html",'<div class="ml-ppos-change-store-wrapper">\n	<div class="ml-ppos-change-store-container">\n		<span>{{ homePageDataModel.storeName }}</span> <span>({{ homePageDataModel.storeCode }})</span>\n	</div>\n	\n	<div data-ng-include="\'views/login/LoginWidget.html\'"></div>\n</div>\n'),a.put("views/instorepickup/InStorePickupCustomerVerificationModal.html",'<div class="ml-ppos-order-detail-instore-pickup-button" data-ng-if="processInStorePickup">\n	<a href="javascript:;" data-ng-click="showInStorePickupCustomerVerificationModal()" class="ml-ppos-primary-button">{{ \'btn.ppos.inStorePickup\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-store"></span></a>\n</div>\n\n<div class="ml-ppos-modal-container ml-ppos-instore-customer-wrapper">\n	<div class="modal" id="inStorePickupCustomerVerificationModal" tabindex="-1" role="dialog" aria-hidden="true">\n		<div class="modal-dialog">\n			<div class="modal-content">\n\n				<div class="modal-header">\n					<button type="button" class="close" data-ng-click="closeInStorePickupCustomerVerificationModal()" aria-label="Close"><span aria-hidden="true"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\n					<h4 class="modal-title" translate="hdr.ppos.inStorePickupCustomerVerification" translate-values="{ orderNumber : orderNumber }"></h4>\n				</div>\n	  \n				<div data-ng-show="showStep1">\n					<form novalidate data-ng-submit="processStep1()">\n						<div class="modal-body ml-ppos-order-detail-customer-options">\n							<div data-ng-show="paymentTypeCreditCard && cardVerificationRequired">\n								<div class="ml-ppos-order-detail-customer-head" translate>lbl.ppos.lastFourDigitsCreditCard</div>\n								<label>\n									<input type="checkbox" name="creditCardVerified" id="creditCardVerified" data-ng-model="creditCardVerified" />\n									<div for="creditCardVerified"><i></i><span>{{ creditCardType }} {{ creditCardLastFourDigits }}</span></div>\n								</label>\n							</div>\n\n							<div>\n								<div class="ml-ppos-order-detail-customer-sub-head" translate>lbl.ppos.customerIdentification</div>\n								<label>\n									<input type="checkbox" name="customerVerified" id="customerVerified" data-ng-model="customerVerified" />\n									<div for="customerVerified"><i></i><span>{{ pickupContactFirstName }} {{ pickupContactLastName }}</span></div>\n								</label>\n							</div>							\n						</div>\n						\n						<div class="modal-footer ml-ppos-button-product-search">\n							<div><button type="submit" class="ml-ppos-primary-button" translate>btn.ppos.process</button></div>\n							<div><button type="button" class="ml-ppos-secondary-button" data-ng-click="cancelStep1()" translate="btn.ppos.cancel"></button></div>\n						</div>\n					</form>\n				</div>\n				<div data-ng-show="showStep2">\n					<form novalidate data-ng-submit="processStep2(orderId, pickupShipment.id)">\n						<div class="modal-body ml-ppos-order-detail-customer-options">\n							<div class="ml-ppos-signature-wrapper">\n								<div class="ml-ppos-order-detail-customer-head"><span translate="lbl.ppos.creditCardSignatureHeader"></span></div>\n								<canvas ng-signature-pad="signature" ng-signature-pad-pen-color="rgb(255,255,255)" width="420" height="200" class="ml-ppos-signature"></canvas>\n								<div class="ml-ppos-order-detail-customer-sub-head" translate="lbl.ppos.inStorePickupSignatureAgreement"></div>\n							</div>\n						</div>\n\n						<div class="modal-footer ml-ppos-button-product-search">\n							<div><button type="submit" class="ml-ppos-primary-button" translate>btn.ppos.acceptSignature</button></div>\n							<div><button type="button" class="ml-ppos-secondary-button" data-ng-click="cancelStep2()" translate="btn.ppos.cancel"></button></div>\n							<div class="ml-ppos-order-detail-clear-button"><button type="button" class="ml-ppos-secondary-button" data-ng-click="clearSignature()" translate="btn.ppos.clearSignature"></button></div>\n						</div>\n					</form>\n				</div>\n\n				<div data-ng-show="showStep3">\n					<form novalidate data-ng-submit="processStep3()">\n						<div class="modal-body ml-ppos-order-detail-customer-options">\n							<div data-ng-show="hasValidationErrors" class="ml-ppos-error-container">\n								<div class="ml-icon-error"></div>\n								<div class="ml-ppos-error-message">\n									<div data-ng-repeat="validationError in validationErrors">{{ validationError }}</div>\n								</div>\n							</div>\n\n							<div class="ml-ppos-order-detail-customer-info">\n								<label>\n									<input type="checkbox" name="receiptTypePrinter" id="receiptTypePrinter" data-ng-model="receiptTypePrinter" ng-disabled="!printerAvailable" />\n									<div><i for="receiptTypePrinter"></i><span for="receiptTypePrinter" translate="lbl.ppos.print"></span><span class="ml-ppos-order-detail-device-name">{{ deviceName }}</span></div>\n								</label>\n							</div>\n\n							<div class="ml-ppos-order-detail-customer-info">\n								<label>\n									<input type="checkbox" name="receiptTypeEmail" id="receiptTypeEmail" data-ng-model="receiptTypeEmail" />\n									<div><i for="receiptTypeEmail"></i><span for="receiptTypeEmail" translate="lbl.ppos.email"></span></div>\n									<div class="ml-ppos-order-detail-customer-email"><input type="email" name="pickupCustomerEmail" id="pickupCustomerEmail" data-ng-model="pickupCustomerEmail" class="form-control" /></div>\n								</label>\n							</div>\n						</div>\n\n						<div class="modal-footer ml-ppos-button-product-search">\n							<div><button type="submit" class="ml-ppos-primary-button"><span translate="lbl.ppos.receipt"></span></button></div>\n							<div><button type="button" class="ml-ppos-secondary-button" data-ng-click="noReceipt()"><span translate="lbl.ppos.noReceipt"></span></button></div>\n						</div>\n					</form>\n				</div>\n\n			</div>\n		</div>\n	</div>\n</div>\n\n\n<!-- -->\n<div class="ml-ppos-modal-container ml-ppos-instore-customer-wrapper">\n	<div class="modal" id="inStorePickupConfirmationModal" tabindex="-1" role="dialog" aria-hidden="true">\n		<div class="modal-dialog">\n			<div class="modal-content">\n\n				<div class="modal-header">\n					<button type="button" class="close" data-ng-click="closeInStorePickupConfirmationModal()" aria-label="Close"><span aria-hidden="true"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\n					<h4 class="modal-title" translate="hdr.ppos.inStorePickupCustomerVerification" translate-values="{ orderNumber : orderNumber }"></h4>\n				</div>\n\n				<div>\n					<form novalidate data-ng-submit="inStorePickupConfirmationDone()">\n						<div class="modal-body ml-ppos-order-detail-customer-options">\n							<div data-ng-show="receiptTypePrinter"><span translate="lbl.ppos.receiptReadyOn"></span>&nbsp;{{ deviceName }}</div>\n\n							<div data-ng-show="receiptTypeEmail"><span translate="lbl.ppos.receiptHasBeenSentTo"></span>&nbsp;{{ pickupCustomerEmail }}</div>\n\n							<div data-ng-show="!receiptTypePrinter && !receiptTypeEmail"><span translate="msg.ppos.inStorePickupComplete"></span></div>\n						</div>\n\n						<div class="modal-footer ml-ppos-button-product-search">\n							<div><button type="submit" class="ml-ppos-primary-button"><span translate="btn.ppos.done"></span></button></div>\n						</div>\n					</form>\n				</div>\n\n			</div>\n		</div>\n	</div>\n</div>'),a.put("views/instorepickup/InStorePickupHeader.html",'<div class="ml-ppos-instore-pickup-header-container">\n	<div class="ml-ppos-instore-pickup-header-new">\n		<div class="ml-ppos-instore-pickup-order-new-bar" data-ng-class="{\'ml-ppos-instore-pickup-inactive\' : !inStorePickupHeaderDataModel.pickupNewOrderShipmentsState}"></div>\n		<div class="ml-ppos-instore-pickup-title">\n			<a data-ng-href="#/inStorePickupOrderShipments" data-ng-if="inStorePickupHeaderDataModel.pickupNewOrderShipmentsState"><i class="ml-ppos-instore-pickup-circle-new"></i>{{ \'hdr.ppos.inStorePickup.newPickup\' | translate }} <span>{{ inStorePickupOrderShipmentsDataModel.Ordered.length }}</span></a>\n			<a data-ng-href="#/pickupNewOrderShipments" data-ng-if="!inStorePickupHeaderDataModel.pickupNewOrderShipmentsState"><i class="ml-ppos-instore-pickup-circle-new"></i>{{ \'hdr.ppos.inStorePickup.newPickup\' | translate }} <span>{{ inStorePickupOrderShipmentsDataModel.Ordered.length }}</span></a>\n		</div>\n	</div>\n	<div class="ml-ppos-instore-pickup-header-process">\n		<div class="ml-ppos-instore-pickup-order-process-bar" data-ng-class="{\'ml-ppos-instore-pickup-inactive\' : !inStorePickupHeaderDataModel.pickupInProcessOrderShipmentsState}"></div>\n		<div class="ml-ppos-instore-pickup-title">\n			<a data-ng-href="#/inStorePickupOrderShipments" data-ng-if="inStorePickupHeaderDataModel.pickupInProcessOrderShipmentsState"><i class="ml-ppos-instore-pickup-circle-process"></i>{{ \'hdr.ppos.inStorePickup.inProcess\' | translate }} <span>{{ inStorePickupOrderShipmentsDataModel.PickupInProcess.length }}</span></a>\n			<a data-ng-href="#/pickupInProcessOrderShipments" data-ng-if="!inStorePickupHeaderDataModel.pickupInProcessOrderShipmentsState"><i class="ml-ppos-instore-pickup-circle-process"></i>{{ \'hdr.ppos.inStorePickup.inProcess\' | translate }} <span>{{ inStorePickupOrderShipmentsDataModel.PickupInProcess.length }}</span></a>\n		</div>\n	</div>\n	<div class="ml-ppos-instore-pickup-header-ready">\n		<div class="ml-ppos-instore-pickup-order-ready-bar" data-ng-class="{\'ml-ppos-instore-pickup-inactive\' : !inStorePickupHeaderDataModel.pickupReadyOrderShipmentsState}"></div>\n		<div class="ml-ppos-instore-pickup-title">\n			<a data-ng-href="#/inStorePickupOrderShipments" data-ng-if="inStorePickupHeaderDataModel.pickupReadyOrderShipmentsState"><i class="ml-ppos-instore-pickup-circle-ready"></i>{{ \'hdr.ppos.inStorePickup.pickUpReady\' | translate }} <span>{{ inStorePickupOrderShipmentsDataModel.PickupReady.length }}</span></a>\n			<a data-ng-href="#/pickupReadyOrderShipments" data-ng-if="!inStorePickupHeaderDataModel.pickupReadyOrderShipmentsState"><i class="ml-ppos-instore-pickup-circle-ready"></i>{{ \'hdr.ppos.inStorePickup.pickUpReady\' | translate }} <span>{{ inStorePickupOrderShipmentsDataModel.PickupReady.length }}</span></a>\n		</div>\n	</div>\n	<div class="ml-ppos-instore-pickup-header-done">\n		<div class="ml-ppos-instore-pickup-order-done-bar" data-ng-class="{\'ml-ppos-instore-pickup-inactive\' : !inStorePickupHeaderDataModel.pickupDoneOrderShipmentsState}"></div>\n		<div class="ml-ppos-instore-pickup-title">\n			<a data-ng-href="#/inStorePickupOrderShipments" data-ng-if="inStorePickupHeaderDataModel.pickupDoneOrderShipmentsState"><i class="ml-ppos-instore-pickup-circle-done"></i>{{ \'hdr.ppos.inStorePickup.done\' | translate }} <span>{{ inStorePickupOrderShipmentsDataModel.Shipped.length }}</span></a>\n			<a data-ng-href="#/pickupDoneOrderShipments" data-ng-if="!inStorePickupHeaderDataModel.pickupDoneOrderShipmentsState"><i class="ml-ppos-instore-pickup-circle-done"></i>{{ \'hdr.ppos.inStorePickup.done\' | translate }} <span>{{ inStorePickupOrderShipmentsDataModel.Shipped.length }}</span></a>\n		</div>\n	</div>\n</div>\n'),a.put("views/instorepickup/InStorePickupOrderShipments.html",'<div class="ml-ppos-main-wrapper">\n	<div class="ml-ppos-instore-pickup-order-wrapper">\n\n		<!-- Pickup Headers Start -->\n		<div class="ml-ppos-instore-pickup-header-container">\n			<div class="ml-ppos-instore-pickup-header-new">\n				<div class="ml-ppos-instore-pickup-order-new-bar"></div>\n				<div class="ml-ppos-instore-pickup-title">\n					<a data-ng-href="#/pickupNewOrderShipments"><i class="ml-ppos-instore-pickup-circle-new"></i>{{ \'hdr.ppos.inStorePickup.newPickup\' | translate }} <span>{{ inStorePickupOrderShipmentsDataModel.Ordered.length }}</span></a>\n				</div>\n			</div>\n			<div class="ml-ppos-instore-pickup-header-process">\n				<div class="ml-ppos-instore-pickup-order-process-bar"></div>\n				<div class="ml-ppos-instore-pickup-title">\n					<a data-ng-href="#/pickupInProcessOrderShipments"><i class="ml-ppos-instore-pickup-circle-process"></i>{{ \'hdr.ppos.inStorePickup.inProcess\' | translate }} <span>{{ inStorePickupOrderShipmentsDataModel.PickupInProcess.length }}</span></a>\n				</div>\n			</div>\n			<div class="ml-ppos-instore-pickup-header-ready">\n				<div class="ml-ppos-instore-pickup-order-ready-bar"></div>\n				<div class="ml-ppos-instore-pickup-title">\n					<a data-ng-href="#/pickupReadyOrderShipments"><i class="ml-ppos-instore-pickup-circle-ready"></i>{{ \'hdr.ppos.inStorePickup.pickUpReady\' | translate }} <span>{{ inStorePickupOrderShipmentsDataModel.PickupReady.length }}</span></a>\n				</div>\n			</div>\n			<div class="ml-ppos-instore-pickup-header-done">\n				<div class="ml-ppos-instore-pickup-order-done-bar"></div>\n				<div class="ml-ppos-instore-pickup-title">\n					<a data-ng-href="#/pickupDoneOrderShipments"><i class="ml-ppos-instore-pickup-circle-done"></i>{{ \'hdr.ppos.inStorePickup.done\' | translate }} <span>{{ inStorePickupOrderShipmentsDataModel.Shipped.length }}</span></a>\n				</div>\n			</div>\n		</div>\n		<!-- Pickup Headers End -->\n		\n		<!-- Pickup Row Start -->\n		<div class="ml-ppos-instore-pickup-row-container">\n			<!-- Pickup New Orders Start -->\n			<div class="ml-ppos-instore-pickup-order-new ml-ppos-scroll-container">\n				<div class="ml-ppos-instore-pickup-order-new-container">\n					<div class="ml-ppos-instore-pickup-order-content">\n						<!-- Loop Start -->\n						<div data-ng-repeat="pickupNewOrderShipment in inStorePickupOrderShipmentsDataModel.Ordered" class="ml-ppos-instore-pickup-toggle">\n							\n							<button type="button" class="togglebtn" ng-click="toggleIcon({{ pickupNewOrderShipment.id }});"><span class="ml-ppos-instore-pickup-order-number">#{{ pickupNewOrderShipment.order.code }}</span> <span>{{ pickupNewOrderShipment.order.billToInfo.firstName }} {{ pickupNewOrderShipment.order.billToInfo.lastName }}</span> <i class="ml-ppos-mini-white-icon ml-ppos-arrow-down" id="arrow_{{ pickupNewOrderShipment.id }}"></i></button>\n\n							<div id="orderShipmentDetail_{{ pickupNewOrderShipment.id }}" class="collapse ml-ppos-instore-pickup-order-content-data">\n								<div class="ml-ppos-instore-pickup-thumb-container">\n									<div data-ng-repeat="item in pickupNewOrderShipment.items" class="ml-ppos-instore-pickup-thumb-content">\n										<div class="ml-ppos-instore-pickup-thumb"><img src="{{ item.product.image.thumb }}" width="80" height="80" /></div>\n										<div class="ml-ppos-instore-pickup-item-code">{{ item.skuCode }}</div>\n									</div>\n								</div>\n\n								<div class="ml-ppos-instore-pickup-order-date">{{ \'lbl.ppos.inStorePickup.orderedDate\' | translate }} {{pickupNewOrderShipment.order.orderDate | date : \'medium\'}}</div>\n\n								<div class="ml-ppos-instore-pickup-button-container">\n									<div><button type="button" class="ml-ppos-secondary-button" data-ng-click="viewOrderDetail(pickupNewOrderShipment.order.id)" translate>btn.ppos.inStorePickup.viewDetail</button></div>\n									<div class="ml-ppos-instore-pickup-button-move">\n										<span class="ml-ppos-btn-inner">\n											<span class="ml-ppos-btn-text" translate>btn.ppos.inStorePickup.move</span>\n											<span class="ml-ppos-btn ml-ppos-mini-grey-icon ml-ppos-arrow-right"></span>\n										</span>\n										<button type="button" data-ng-click="moveToPickupInProcessState(pickupNewOrderShipment.order.id, pickupNewOrderShipment.id)" class="ml-ppos-btn-hidden"></button>\n									</div>\n								</div>\n							</div>\n\n						</div>\n						<!-- Loop End -->\n					</div>\n				</div>\n			</div>\n			<!-- Pickup New Orders End -->\n\n			<!-- Pickup In Process Orders Start -->\n			<div class="ml-ppos-instore-pickup-order-process">\n				<div class="ml-ppos-instore-pickup-order-process-container ml-ppos-scroll-container">\n					<div class="ml-ppos-instore-pickup-order-content">\n						<!-- Loop Start -->\n						<div data-ng-repeat="pickupInProcessOrderShipment in inStorePickupOrderShipmentsDataModel.PickupInProcess" class="ml-ppos-instore-pickup-toggle">\n							\n							<button type="button" class="togglebtn" ng-click="toggleIcon({{ pickupInProcessOrderShipment.id }});"><span class="ml-ppos-instore-pickup-order-number">#{{ pickupInProcessOrderShipment.order.code }}</span> <span>{{ pickupInProcessOrderShipment.order.billToInfo.firstName }} {{ pickupInProcessOrderShipment.order.billToInfo.lastName }}</span> <i class="ml-ppos-mini-white-icon ml-ppos-arrow-down" id="arrow_{{ pickupInProcessOrderShipment.id }}"></i></button>\n\n							<div id="orderShipmentDetail_{{ pickupInProcessOrderShipment.id }}" class="collapse ml-ppos-instore-pickup-order-content-data">\n								<div class="ml-ppos-instore-pickup-thumb-container">\n									<div data-ng-repeat="item in pickupInProcessOrderShipment.items" class="ml-ppos-instore-pickup-thumb-content">\n										<div class="ml-ppos-instore-pickup-thumb"><img src="{{ item.product.image.thumb }}" width="80" height="80" /></div>\n										<div class="ml-ppos-instore-pickup-item-code">{{ item.skuCode }}</div>\n									</div>\n								</div>\n								\n								<div class="ml-ppos-instore-pickup-order-date">{{ \'lbl.ppos.inStorePickup.orderedDate\' | translate }} {{pickupInProcessOrderShipment.order.orderDate | date : \'medium\'}}</div>\n\n								<div class="ml-ppos-instore-pickup-button-container">\n									<div><button type="button" class="ml-ppos-secondary-button" data-ng-click="viewOrderDetail(pickupInProcessOrderShipment.order.id)" translate>btn.ppos.inStorePickup.viewDetail</button></div>\n									<div class="ml-ppos-instore-pickup-button-move" data-ng-show="pickupInProcessOrderShipment.canMoveToPickupReady">\n										<span class="ml-ppos-btn-inner">\n											<span class="ml-ppos-btn-text" translate>btn.ppos.inStorePickup.move</span>\n											<span class="ml-ppos-btn ml-ppos-mini-grey-icon ml-ppos-arrow-right"></span>\n										</span>\n										<button type="button" data-ng-click="moveToPickupReadyState(pickupInProcessOrderShipment.order.id, pickupInProcessOrderShipment.id)" class="ml-ppos-btn-hidden" translate>btn.ppos.inStorePickup.move</button>\n									</div>\n								</div>\n							</div>\n\n							<div class="ml-ppos-instore-pickup-csr-list">\n								<!-- Assigned CSR -->\n								<button type="button" class="togglebtn" data-toggle="collapse" data-target="#activeCSRList_{{ pickupInProcessOrderShipment.id }}">{{ pickupInProcessOrderShipment.CSR.firstName }} {{ pickupInProcessOrderShipment.CSR.lastName }}</button>\n								<!-- CSR list to choose from -->\n								<div id="activeCSRList_{{ pickupInProcessOrderShipment.id }}" class="collapse ml-ppos-instore-pickup-order-content-data">\n									<ul>\n										<li data-ng-repeat="activeCSR in activeCSRs" ng-if="activeCSR.id != pickupInProcessOrderShipment.CSR.id">\n											<span></span><a href="javascript:;" data-ng-click="associateCSRtoShipment(activeCSR.id, pickupInProcessOrderShipment.order.id, pickupInProcessOrderShipment.id)">{{ activeCSR.firstName }} {{ activeCSR.lastName }}</a>\n										</li>\n									</ul>\n								</div>\n							</div>\n\n						</div>\n						<!-- Loop End -->\n					</div>\n				</div>\n			</div>\n			<!-- Pickup In Process Orders End -->\n\n			<!-- Pickup Ready Orders Start -->\n			<div class="ml-ppos-instore-pickup-order-ready">\n				<div class="ml-ppos-instore-pickup-order-ready-container ml-ppos-scroll-container">\n					<div class="ml-ppos-instore-pickup-order-content">\n						<!-- Loop Start -->\n						<div data-ng-repeat="pickupReadyOrderShipment in inStorePickupOrderShipmentsDataModel.PickupReady" class="ml-ppos-instore-pickup-toggle">\n							\n							<button type="button" class="togglebtn" ng-click="toggleIcon({{ pickupReadyOrderShipment.id }});"><span class="ml-ppos-instore-pickup-order-number">#{{ pickupReadyOrderShipment.order.code }}</span> <span>{{ pickupReadyOrderShipment.order.billToInfo.firstName }} {{ pickupReadyOrderShipment.order.billToInfo.lastName }}</span> <i class="ml-ppos-mini-white-icon ml-ppos-arrow-down" id="arrow_{{ pickupReadyOrderShipment.id }}"></i></button>\n\n							<div id="orderShipmentDetail_{{ pickupReadyOrderShipment.id }}" class="collapse ml-ppos-instore-pickup-order-content-data">\n								<div class="ml-ppos-instore-pickup-thumb-container">\n									<div data-ng-repeat="item in pickupReadyOrderShipment.items" class="ml-ppos-instore-pickup-thumb-content">\n										<div class="ml-ppos-instore-pickup-thumb"><img src="{{ item.product.image.thumb }}" width="80" height="80" /></div>\n										<div class="ml-ppos-instore-pickup-item-code">{{ item.skuCode }}</div>\n									</div>\n								</div>\n\n								<div class="ml-ppos-instore-pickup-order-date">{{ \'lbl.ppos.inStorePickup.orderedDate\' | translate }} {{pickupReadyOrderShipment.order.orderDate | date : \'medium\'}}</div>\n\n								<div class="ml-ppos-instore-pickup-button-container">\n									<div><button type="button" class="ml-ppos-secondary-button" data-ng-click="viewOrderDetail(pickupReadyOrderShipment.order.id)" translate>btn.ppos.inStorePickup.viewDetail</button></div>\n								</div>\n							</div>\n							<!-- Note Start -->\n							<div class="ml-ppos-instore-pickup-notes" data-ng-if="pickupReadyOrderShipment.note.length">\n								<button type="button" class="togglebtn" data-toggle="collapse" data-target="#show_note_{{ pickupReadyOrderShipment.id }}" translate>btn.ppos.inStorePickup.showNote</button>\n								<div id="show_note_{{ pickupReadyOrderShipment.id }}" class="collapse ml-ppos-instore-pickup-order-content-data">\n									<textarea rows="5" cols="25" placeholder="{{ \'msg.ppos.inStorePickup.writeANote\' | translate }}" data-ng-model="pickupReadyOrderShipment.note[0].note" readonly></textarea>\n									<!-- Edit Note - Phase 2 -->\n									<!-- <button type="button" data-ng-click="editShipmentNoteForPickup(pickupReadyOrderShipment.order.id, pickupReadyOrderShipment.id, pickupReadyOrderShipment.order.customer.id, pickupReadyOrderShipment.note[0].id, pickupReadyOrderShipment.note[0].note)" class="ml-ppos-primary-button ml-ppos-instore-pickup-save-button">Save Note</button> -->\n								</div>\n							</div>\n							<div class="ml-ppos-instore-pickup-notes" data-ng-if="!pickupReadyOrderShipment.note.length">\n								<button type="button" class="togglebtn" data-toggle="collapse" data-target="#add_note_{{ pickupReadyOrderShipment.id }}" translate>btn.ppos.inStorePickup.addNote</button>\n								<div id="add_note_{{ pickupReadyOrderShipment.id }}" class="collapse ml-ppos-instore-pickup-order-content-data">\n									<textarea rows="5" cols="25" placeholder="{{ \'msg.ppos.inStorePickup.writeANote\' | translate }}" data-ng-model="pickupReadyOrderShipment.noteTextToAdd" maxlength="{{ noteMaxLength }}"></textarea>\n									<div data-ng-if="pickupReadyOrderShipment.noteTextToAdd.length === noteMaxLength" translate="msg.ppos.inStorePickup.maxNoteCharacters" translate-values="{ noteMaxLength : noteMaxLength }"></div>\n									<div data-ng-if="pickupReadyOrderShipment.noteTextToAdd">\n										<button type="button" data-ng-click="addShipmentNoteForPickup(pickupReadyOrderShipment.order.id, pickupReadyOrderShipment.id, pickupReadyOrderShipment.order.customer.id, pickupReadyOrderShipment.noteTextToAdd)" class="ml-ppos-primary-button ml-ppos-instore-pickup-save-button" translate>btn.ppos.inStorePickup.saveNote</button>\n									</div>\n								</div>\n							</div>\n							<!-- Note End -->\n						</div>\n						<!-- Loop End -->\n					</div>\n				</div>\n			</div>\n			<!-- Pickup Ready Orders End -->\n\n			<!-- Pickup Done Orders Start -->\n			<div class="ml-ppos-instore-pickup-order-done">\n				<div class="ml-ppos-instore-pickup-order-done-container ml-ppos-scroll-container">\n					<div class="ml-ppos-instore-pickup-order-content">\n						<!-- Loop Start -->\n						<div data-ng-repeat="pickupDoneOrderShipment in inStorePickupOrderShipmentsDataModel.Shipped" class="ml-ppos-instore-pickup-toggle">\n							\n							<button type="button" class="togglebtn" ng-click="toggleIcon({{ pickupDoneOrderShipment.id }});"><span class="ml-ppos-instore-pickup-order-number">#{{ pickupDoneOrderShipment.order.code }}</span> <span>{{ pickupDoneOrderShipment.order.billToInfo.firstName }} {{ pickupDoneOrderShipment.order.billToInfo.lastName }}</span> <i class="ml-ppos-mini-white-icon ml-ppos-arrow-down" id="arrow_{{ pickupDoneOrderShipment.id }}"></i></button>\n\n							<div id="orderShipmentDetail_{{ pickupDoneOrderShipment.id }}" class="collapse ml-ppos-instore-pickup-order-content-data">\n								<div class="ml-ppos-instore-pickup-thumb-container">\n									<div data-ng-repeat="item in pickupDoneOrderShipment.items" class="ml-ppos-instore-pickup-thumb-content">\n										<div class="ml-ppos-instore-pickup-thumb"><img src="{{ item.product.image.thumb }}" width="80" height="80" /></div>\n										<div class="ml-ppos-instore-pickup-item-code">{{ item.skuCode }}</div>\n									</div>\n								</div>\n\n								<div class="ml-ppos-instore-pickup-order-date">{{ \'lbl.ppos.inStorePickup.orderedDate\' | translate }} {{pickupDoneOrderShipment.order.orderDate | date : \'medium\'}}</div>\n\n								<div class="ml-ppos-instore-pickup-button-container"><button type="button" class="ml-ppos-secondary-button" data-ng-click="viewOrderDetail(pickupDoneOrderShipment.order.id)" translate>btn.ppos.inStorePickup.viewDetail</button></div>\n							</div>\n\n						</div>\n						<!-- Loop End -->\n					</div>\n				</div>\n			</div>\n			<!-- Pickup Done Orders End -->\n\n\n		</div>\n\n	</div>\n</div>\n'),
a.put("views/instorepickup/PickupDoneOrderShipments.html",'<div class="ml-ppos-main-wrapper">\n	<div class="ml-ppos-instore-pickup-order-wrapper">\n\n		<!-- Pickup Headers Start -->\n		<div data-ng-include="\'views/instorepickup/InStorePickupHeader.html\'"></div>\n		<!-- Pickup Headers End -->\n		\n		<!-- Content Start -->\n		<div class="ml-ppos-instore-pickup-content-container">\n			<!-- Sorting Start -->\n			<div class="ml-ppos-instore-pickup-sort-container" data-ng-if="inStorePickupOrderShipmentsDataModel.Shipped.length">\n				<ul class="nav nav-tabs">\n					<li role="presentation" class="dropdown">\n						<a class="dropdown-toggle" data-toggle="dropdown" href="javascript:;" role="button" aria-haspopup="true" aria-expanded="false">\n							{{ \'lbl.ppos.inStorePickup.sortBy\' | translate }} <span class="ml-icon-lib ml-icon-arrow-down"></span>\n						</a>\n						<ul class="dropdown-menu">\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'orderNumber\')">{{ \'lbl.ppos.inStorePickup.sortByOrderNumber\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'orderNumber\'"></span></a>\n							</li>\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'orderDate\')">{{ \'lbl.ppos.inStorePickup.sortByOrderDate\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'orderDate\'"></span></a>\n							</li>\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'customerLastName\')">{{ \'lbl.ppos.inStorePickup.sortByCustomerName\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'customerLastName\'"></span></a>\n							</li>\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'csrLastName\')">{{ \'lbl.ppos.inStorePickup.sortBySalesAssociateName\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'csrLastName\'"></span></a>\n							</li>\n						</ul>\n					</li>\n				</ul>\n			</div>\n			<!-- Sorting End -->\n			\n			<div class="ml-ppos-scroll-container">\n				<div class="panel-group ml-ppos-instore-pickup-order-detail-row" id="accordion">\n					<div class="panel panel-default" data-ng-repeat="pickupDoneOrderShipment in inStorePickupOrderShipmentsDataModel.Shipped">\n						\n						<div class="panel-heading">\n							<div class="panel-title">\n								<a data-toggle="collapse" data-parent="#accordion" data-target="#orderShipmentDetail_{{ pickupDoneOrderShipment.id }}">#{{ pickupDoneOrderShipment.order.code }} <span>{{pickupDoneOrderShipment.order.orderDate | date : \'medium\'}}</span><span class="ml-ppos-instore-pickup-customer-name">{{ pickupDoneOrderShipment.order.billToInfo.firstName }} {{ pickupDoneOrderShipment.order.billToInfo.lastName }}</span><i class="ml-ppos-mini-white-icon ml-ppos-arrow-down"></i></a>\n							</div>\n						</div>\n\n						<div id="orderShipmentDetail_{{ pickupDoneOrderShipment.id }}" class="panel-collapse collapse">\n							<div class="panel-body">\n								<div data-ng-repeat="item in pickupDoneOrderShipment.items" class="ml-ppos-instore-pickup-order-detail">\n									<div class="ml-ppos-instore-pickup-order-detail-img">\n										<img src="{{ item.product.image.thumb }}" width="80" height="80" />\n									</div>\n									<div class="ml-ppos-instore-pickup-order-detail-info">\n										<div>{{ item.product.name }}</div>\n										<div><span translate="lbl.ppos.style"/> {{ item.skuCode }}</div>\n										<div><span translate="msg.ppos.qty"/> {{ item.qty }}</div>\n									</div>\n									<div class="ml-ppos-instore-pickup-order-detail-options"></div>\n								</div>\n\n								<div class="ml-ppos-instore-pickup-order-detail-footer">\n									<div class="ml-ppos-instore-pickup-order-detail-button">\n										<a href="" data-ng-click="viewOrderDetail(pickupDoneOrderShipment.order.id)" class="ml-ppos-primary-button"><span translate>btn.ppos.inStorePickup.viewDetail</span><i class="ml-ppos-mini-grey-icon ml-ppos-arrow-right"></i></a>\n									</div>\n								</div>\n							</div>\n						</div>\n						\n					</div>\n				</div>\n			</div>\n		</div>\n		<!-- Content End -->\n	</div>\n</div>\n'),a.put("views/instorepickup/PickupInProcessOrderShipments.html",'<div class="ml-ppos-main-wrapper">\n	<div class="ml-ppos-instore-pickup-order-wrapper">\n\n		<!-- Pickup Headers Start -->\n		<div data-ng-include="\'views/instorepickup/InStorePickupHeader.html\'"></div>\n		<!-- Pickup Headers End -->\n		\n		<!-- Content Start -->\n		<div class="ml-ppos-instore-pickup-content-container">\n			<!-- Sorting Start -->\n			<div class="ml-ppos-instore-pickup-sort-container" data-ng-if="inStorePickupOrderShipmentsDataModel.PickupInProcess.length">\n				<ul class="nav nav-tabs">\n					<li role="presentation" class="dropdown">\n						<a class="dropdown-toggle" data-toggle="dropdown" href="javascript:;" role="button" aria-haspopup="true" aria-expanded="false">\n							{{ \'lbl.ppos.inStorePickup.sortBy\' | translate }} <span class="ml-icon-lib ml-icon-arrow-down"></span>\n						</a>\n						<ul class="dropdown-menu">\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'orderNumber\')">{{ \'lbl.ppos.inStorePickup.sortByOrderNumber\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'orderNumber\'"></span></a>\n							</li>\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'orderDate\')">{{ \'lbl.ppos.inStorePickup.sortByOrderDate\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'orderDate\'"></span></a>\n							</li>\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'customerLastName\')">{{ \'lbl.ppos.inStorePickup.sortByCustomerName\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'customerLastName\'"></span></a>\n							</li>\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'csrLastName\')">{{ \'lbl.ppos.inStorePickup.sortBySalesAssociateName\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'csrLastName\'"></span></a>\n							</li>\n						</ul>\n					</li>\n				</ul>\n			</div>\n			<!-- Sorting End -->\n			\n			<div class="ml-ppos-scroll-container">\n				<div class="panel-group ml-ppos-instore-pickup-order-detail-row" id="accordion">\n					<div class="panel panel-default" data-ng-repeat="pickupInProcessOrderShipment in inStorePickupOrderShipmentsDataModel.PickupInProcess">\n						\n						<div class="panel-heading">\n							<div class="panel-title">\n								<a data-toggle="collapse" data-parent="#accordion" data-target="#orderShipmentDetail_{{ pickupInProcessOrderShipment.id }}">#{{ pickupInProcessOrderShipment.order.code }} <span>{{pickupInProcessOrderShipment.order.orderDate | date : \'medium\'}}</span><span class="ml-ppos-instore-pickup-customer-name">{{ pickupInProcessOrderShipment.order.billToInfo.firstName }} {{ pickupInProcessOrderShipment.order.billToInfo.lastName }}</span><i class="ml-ppos-mini-white-icon ml-ppos-arrow-down"></i></a>\n							</div>\n						</div>\n\n						<div id="orderShipmentDetail_{{ pickupInProcessOrderShipment.id }}" class="panel-collapse collapse">\n							<div class="panel-body">\n								<div data-ng-repeat="item in pickupInProcessOrderShipment.items" class="ml-ppos-instore-pickup-order-detail">\n									<div class="ml-ppos-instore-pickup-order-detail-img">\n										<img src="{{ item.product.image.thumb }}" width="80" height="80" />\n									</div>\n									<div class="ml-ppos-instore-pickup-order-detail-info">\n										<div>{{ item.product.name }}</div>\n										<div><span translate="lbl.ppos.style"/> {{ item.skuCode }}</div>\n										<div><span translate="msg.ppos.qty"/> {{ item.qty }}</div>\n									</div>\n									<div class="ml-ppos-instore-pickup-order-detail-options"></div>\n								</div>\n\n								<div class="ml-ppos-instore-pickup-order-detail-footer">\n									<div class="ml-ppos-instore-pickup-order-detail-button">\n										<a href="" data-ng-click="viewOrderDetail(pickupInProcessOrderShipment.order.id)" class="ml-ppos-primary-button"><span translate>btn.ppos.inStorePickup.viewDetail</span><i class="ml-ppos-mini-grey-icon ml-ppos-arrow-right"></i></a>\n									</div>\n								</div>\n							</div>\n						</div>\n						\n					</div>\n				</div>\n			<div>\n		</div>\n		<!-- Content End -->\n	</div>\n</div>\n'),a.put("views/instorepickup/PickupNewOrderShipments.html",'<div class="ml-ppos-main-wrapper">\n	<div class="ml-ppos-instore-pickup-order-wrapper">\n\n		<!-- Pickup Headers Start -->\n		<div data-ng-include="\'views/instorepickup/InStorePickupHeader.html\'"></div>\n		<!-- Pickup Headers End -->\n\n		<!-- Content Start -->\n		<div class="ml-ppos-instore-pickup-content-container">\n			<!-- Sorting Start -->\n			<div class="ml-ppos-instore-pickup-sort-container" data-ng-if="inStorePickupOrderShipmentsDataModel.Ordered.length">\n				<ul class="nav nav-tabs">\n					<li role="presentation" class="dropdown" id="lstSortByMenu">\n						<a class="dropdown-toggle" data-toggle="dropdown" href="javascript:;" role="button" aria-haspopup="true" aria-expanded="false">\n							{{ \'lbl.ppos.inStorePickup.sortBy\' | translate }} <span class="ml-icon-lib ml-icon-arrow-down"></span>\n						</a>\n						<ul class="dropdown-menu">\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'orderNumber\')">{{ \'lbl.ppos.inStorePickup.sortByOrderNumber\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'orderNumber\'"></span></a>\n							</li>\n\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'itemSKUNumber\')">{{ \'lbl.ppos.inStorePickup.sortByItemSKUNumber\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'itemSKUNumber\'"></span></a>\n							</li>\n\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'orderDate\')">{{ \'lbl.ppos.inStorePickup.sortByOrderDate\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'orderDate\'"></span></a>\n							</li>\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'customerLastName\')">{{ \'lbl.ppos.inStorePickup.sortByCustomerName\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'customerLastName\'"></span></a>\n							</li>\n						</ul>\n					</li>\n				</ul>\n			</div>\n			<!-- Sorting End -->\n			\n			<div class="ml-ppos-scroll-container" data-ng-if="currentSortParam !== \'itemSKUNumber\'">\n				<div class="panel-group ml-ppos-instore-pickup-order-detail-row" id="accordion">\n					<div class="panel panel-default" data-ng-repeat="pickupNewOrderShipment in inStorePickupOrderShipmentsDataModel.Ordered">\n						\n						<div class="panel-heading">\n							<div class="panel-title">\n								<a data-toggle="collapse" data-parent="#accordion" data-target="#orderShipmentDetail_{{ pickupNewOrderShipment.id }}">#{{ pickupNewOrderShipment.order.code }} <span>{{pickupNewOrderShipment.order.orderDate | date : \'medium\'}}</span><span class="ml-ppos-instore-pickup-customer-name">{{ pickupNewOrderShipment.order.billToInfo.firstName }} {{ pickupNewOrderShipment.order.billToInfo.lastName }}</span><i class="ml-ppos-mini-white-icon ml-ppos-arrow-down"></i></a>\n							</div>\n						</div>\n\n						<div id="orderShipmentDetail_{{ pickupNewOrderShipment.id }}" class="panel-collapse collapse">\n							<div class="panel-body">\n								<div data-ng-repeat="item in pickupNewOrderShipment.items" class="ml-ppos-instore-pickup-order-detail">\n									<div class="ml-ppos-instore-pickup-order-detail-img">\n										<img src="{{ item.product.image.thumb }}" width="80" height="80" />\n									</div>\n									<div class="ml-ppos-instore-pickup-order-detail-info">\n										<div>{{ item.product.name }}</div>\n										<div><span translate="lbl.ppos.style"/> {{ item.skuCode }}</div>\n										<div><span translate="msg.ppos.qty"/> {{ item.qty }}</div>\n									</div>\n									<div class="ml-ppos-instore-pickup-order-detail-options"></div>\n								</div>\n\n								<div class="ml-ppos-instore-pickup-order-detail-footer">\n									<div class="ml-ppos-instore-pickup-order-detail-button">\n										<a href="" data-ng-click="viewOrderDetail(pickupNewOrderShipment.order.id)" class="ml-ppos-primary-button"><span translate>btn.ppos.inStorePickup.viewDetail</span><i class="ml-ppos-mini-grey-icon ml-ppos-arrow-right"></i></a>\n									</div>\n								</div>\n							</div>\n						</div>\n						\n					</div>\n				</div>\n			</div>\n\n			<div data-ng-if="currentSortParam === \'itemSKUNumber\'">\n				<div class="ml-ppos-instore-pickup-sort-wrapper">\n					<div class="ml-ppos-instore-pickup-sort-head">\n						<div translate>hdr.ppos.inStorePickup.productName</div>\n						<div translate>hdr.ppos.qty</div>\n					</div>\n					<div class="ml-ppos-scroll-container">\n						<div data-ng-repeat="skuDetails in groupBySkuDataModel" class="ml-ppos-instore-pickup-sort-content">\n							<div class="ml-ppos-instore-pickup-sort-thumb"><img src="{{ skuDetails.thumb }}" /></div>\n							<div class="ml-ppos-instore-pickup-sort-name">\n								<div>{{ skuDetails.name }}</div>\n								<div class="ml-ppos-instore-pickup-sku"><span translate="lbl.ppos.style"/> {{ skuDetails.skuCode }}</div>\n							</div>\n							<div class="ml-ppos-instore-pickup-sort-qty">{{ skuDetails.qty }}</div>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n\n		<!-- Content Start End -->\n	</div>\n</div>'),a.put("views/instorepickup/PickupReadyOrderShipments.html",'<div class="ml-ppos-main-wrapper">\n	<div class="ml-ppos-instore-pickup-order-wrapper">\n\n		<!-- Pickup Headers Start -->\n		<div data-ng-include="\'views/instorepickup/InStorePickupHeader.html\'"></div>\n		<!-- Pickup Headers End -->\n		\n		<!-- Content Start -->\n		<div class="ml-ppos-instore-pickup-content-container">\n			<!-- Sorting Start -->\n			<div class="ml-ppos-instore-pickup-sort-container" data-ng-if="inStorePickupOrderShipmentsDataModel.PickupReady.length">\n				<ul class="nav nav-tabs">\n					<li role="presentation" class="dropdown">\n						<a class="dropdown-toggle" data-toggle="dropdown" href="javascript:;" role="button" aria-haspopup="true" aria-expanded="false">\n							{{ \'lbl.ppos.inStorePickup.sortBy\' | translate }} <span class="ml-icon-lib ml-icon-arrow-down"></span>\n						</a>\n						<ul class="dropdown-menu">\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'orderNumber\')">{{ \'lbl.ppos.inStorePickup.sortByOrderNumber\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'orderNumber\'"></span></a>\n							</li>\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'orderDate\')">{{ \'lbl.ppos.inStorePickup.sortByOrderDate\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'orderDate\'"></span></a>\n							</li>\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'customerLastName\')">{{ \'lbl.ppos.inStorePickup.sortByCustomerName\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'customerLastName\'"></span></a>\n							</li>\n							<li>\n								<a href="" data-ng-click="sortInStorePickupOrderShipmentsDataModel(\'csrLastName\')">{{ \'lbl.ppos.inStorePickup.sortBySalesAssociateName\' | translate }} <span class="ml-ppos-mini-grey-icon ml-ppos-arrow-down" data-ng-if="currentSortParam === \'csrLastName\'"></span></a>\n							</li>\n						</ul>\n					</li>\n				</ul>\n			</div>\n			<!-- Sorting End -->\n			\n			<div class="ml-ppos-scroll-container">\n				<div class="panel-group ml-ppos-instore-pickup-order-detail-row" id="accordion">\n					<div class="panel panel-default" data-ng-repeat="pickupReadyOrderShipment in inStorePickupOrderShipmentsDataModel.PickupReady">\n						\n						<div class="panel-heading">\n							<div class="panel-title">\n								<a data-toggle="collapse" data-parent="#accordion" data-target="#orderShipmentDetail_{{ pickupReadyOrderShipment.id }}">#{{ pickupReadyOrderShipment.order.code }} <span>{{pickupReadyOrderShipment.order.orderDate | date : \'medium\'}}</span><span class="ml-ppos-instore-pickup-customer-name">{{ pickupReadyOrderShipment.order.billToInfo.firstName }} {{ pickupReadyOrderShipment.order.billToInfo.lastName }}</span><i class="ml-ppos-mini-white-icon ml-ppos-arrow-down"></i></a>\n							</div>\n						</div>\n\n						<div id="orderShipmentDetail_{{ pickupReadyOrderShipment.id }}" class="panel-collapse collapse">\n							<div class="panel-body">\n								<div data-ng-repeat="item in pickupReadyOrderShipment.items" class="ml-ppos-instore-pickup-order-detail">\n									<div class="ml-ppos-instore-pickup-order-detail-img">\n										<img src="{{ item.product.image.thumb }}" width="80" height="80" />\n									</div>\n									<div class="ml-ppos-instore-pickup-order-detail-info">\n										<div>{{ item.product.name }}</div>\n										<div><span translate="lbl.ppos.style"/> {{ item.skuCode }}</div>\n										<div><span translate="msg.ppos.qty"/> {{ item.qty }}</div>\n									</div>\n									<div class="ml-ppos-instore-pickup-order-detail-options"></div>\n								</div>\n\n								<div class="ml-ppos-instore-pickup-order-detail-footer">\n									<div class="ml-ppos-instore-pickup-order-detail-button">\n										<a href="" data-ng-click="viewOrderDetail(pickupReadyOrderShipment.order.id)" class="ml-ppos-primary-button"><span translate>btn.ppos.inStorePickup.viewDetail</span><i class="ml-ppos-mini-grey-icon ml-ppos-arrow-right"></i></a>\n									</div>\n								</div>\n							</div>\n						</div>\n						\n					</div>\n				</div>\n			</div>\n		</div>\n		<!-- Content End -->\n	</div>\n</div>\n'),a.put("views/login/LoginWidget.html",'<div class="ml-ppos-login-wrapper ml-ppos-login-main-column" data-ng-controller="loginController">\n	<div class="ml-ppos-login-main-container">\n		<div class="ml-ppos-error-container" data-ng-show="showLoginFailureMessage">\n			<div class="ml-icon-error"></div>\n			<div class="ml-ppos-error-message">\n				<div>{{ loginFailureMessage | translate }}</div>\n			</div>\n		</div>\n		\n		<div class="ml-ppos-login-container">\n			<form novalidate data-ng-submit="login(userCredentials)">\n				<div class="ml-ppos-login-label" translate="lbl.ppos.login.username"></div>\n\n				<div class="ml-ppos-login-label-content">\n					<input type="text" name="loginId" id="loginId" class="form-control" data-ng-model="userCredentials.loginId" placeholder="{{ \'msg.ppos.login.enterUsername\' | translate }}" autocorrect="off" autocapitalize="off" />\n				</div>\n\n				<div class="ml-ppos-login-label" translate="lbl.ppos.login.password"></div>\n\n				<div class="ml-ppos-login-label-content">\n					<input type="password" name="password" id="password" class="form-control ml-ppos-login-label-password" data-ng-model="userCredentials.password" placeholder="{{ \'msg.ppos.login.enterPassword\' | translate }}" />\n				</div>\n\n				<div class="ml-ppos-login-button-container">\n					<button type="submit" name="loginButton" class="ml-ppos-login-button" id="loginButton" translate>btn.ppos.login.loginButton</button>\n				</div>\n			</form>\n		</div>\n	</div>\n</div>\n'),a.put("views/login/UnlockScreen.html",'<div class="ml-ppos-unlock-wrapper ml-ppos-unlock-main-column" data-ng-controller="unlockScreenController">\n	<div class="ml-ppos-unlock-main-container">\n		<div class="ml-ppos-unlock-user-logout">\n			<a data-ng-click="logout()" data-ng-controller="logoutController" translate="msg.ppos.logoutOtherUser" translate-values="{ loggedInCSRName : unlockScreenDataModel.loggedInCSR.firstName }"></a>\n		</div>\n\n		<div data-ng-show="unlockScreenDataModel.showPinDoesNotMatchErrorMessage" class="ml-ppos-error-container">\n			<div class="ml-icon-error"></div>\n			<div class="ml-ppos-error-message" translate>msg.ppos.enterCorrectAccessPin</div>\n		</div>\n\n		<div class="ml-ppos-unlock-container">\n			<div translate="msg.ppos.greetingUser" translate-values="{ loggedInCSRName : unlockScreenDataModel.loggedInCSR.firstName }"></div>\n\n			<div translate>msg.ppos.unlockScreenTypeAccessPin</div>\n\n			<div><input type="password" disabled name="pinEntered" id="pinEntered" data-ng-model="unlockScreenDataModel.pinEntered" class="form-control" /></div>\n\n			<div ng-repeat="pinButton in unlockScreenDataModel.pinButtons track by $index" ng-click="selectPin(pinButton.value)" class="ml-ppos-unlock-keys-container">\n				<div class="ml-ppos-unlock-keys">{{ pinButton.label }}</div>\n			</div>\n		</div>\n	</div>\n</div>\n'),a.put("views/management/Management.html",'<div class="ml-ppos-account-wrapper">\n	<div class="ml-ppos-management-container">\n		<!-- Employee Management Start -->\n		<div class="ml-ppos-management-row" data-ng-if="managementDataModel.isUserCanSearchEmp || managementDataModel.isUserCanAddEmp || managementDataModel.isUserCanListEmp">\n			<div class="ml-ppos-management-title">\n				<i class="ml-ppos-mini-white-icon ml-ppos-employee"></i>  <span translate="hdr.ppos.employeeManagement"/>\n			</div>\n			<div class="ml-ppos-management-content">\n				<div class="ml-ppos-management-icon-container" data-ng-if="managementDataModel.isUserCanSearchEmp">\n					<a href=""><span class="ml-ppos-white-icon ml-ppos-search"></span> <span translate="btn.ppos.search"/></a>\n				</div>\n				<div class="ml-ppos-management-icon-container" data-ng-if="managementDataModel.isUserCanAddEmp" ng-click="goToCsrAddScreen();">\n					<a href=""><span class="ml-ppos-white-icon ml-ppos-plus"></span> <span translate="btn.ppos.new"/></a>\n				</div>\n				<div class="ml-ppos-management-icon-container" data-ng-if="managementDataModel.isUserCanListEmp" ng-click="goToCsrListScreen();">\n					<a href=""><span class="ml-ppos-white-icon ml-ppos-browse"></span> <span translate="btn.ppos.view"/></a>\n				</div>\n			</div>\n		</div>\n		<!-- Employee Management End -->\n		<!-- Settings Start -->\n		<div class="ml-ppos-management-row" data-ng-if="managementDataModel.isUserCanDoPosSettings || managementDataModel.isUserCanDoPaymentSettings">\n			<div class="ml-ppos-management-title">\n				<i class="ml-ppos-mini-white-icon ml-ppos-settings"></i> <span translate="lbl.ppos.settings"/>\n			</div>\n			<div class="ml-ppos-management-content">\n				<div class="ml-ppos-management-icon-container" data-ng-if="managementDataModel.isUserCanDoPosSettings" ng-click="goToPposSettingsScreen();">\n					<a href=""><span class="ml-ppos-white-icon ml-ppos-setting-pos"></span><span translate="btn.ppos.pos"/></a>\n				</div>\n				<div class="ml-ppos-management-icon-container" data-ng-if="managementDataModel.isUserCanDoPaymentSettings">\n					<a href=""><span class="ml-ppos-white-icon ml-ppos-payment"></span> <span translate="btn.ppos.payment"/></a>\n				</div>\n			</div>\n		</div>\n		<!-- Settings End -->\n		<!-- Reports Start -->\n		<div class="ml-ppos-management-row" data-ng-if="managementDataModel.isUserCanViewSaleSettlement || managementDataModel.isUserCanViewOrderReturn || managementDataModel.isUserCanViewOrderTransaction || managementDataModel.isUserCanViewShipmentStatus || managementDataModel.isUserCanViewEmpActivity">\n			<div class="ml-ppos-management-title">\n				<i class="ml-ppos-mini-white-icon ml-ppos-report"></i> <span translate="hdr.ppos.reports"/>\n			</div>\n			<div class="ml-ppos-management-content ml-ppos-management-content-reports">\n				<div class="ml-ppos-management-icon-container" data-ng-if="managementDataModel.isUserCanViewSaleSettlement">\n					<a href=""><span class="ml-ppos-white-icon ml-ppos-sales" ></span> <span translate="btn.ppos.saleSettlement"/></a>\n				</div>\n				<div class="ml-ppos-management-icon-container" data-ng-if="managementDataModel.isUserCanViewOrderReturn">\n					<a href=""><span class="ml-ppos-white-icon ml-ppos-return"></span> <span translate="btn.ppos.orderReturn"/></a>\n				</div>\n				<div class="ml-ppos-management-icon-container" data-ng-if="managementDataModel.isUserCanViewOrderTransaction">\n					<a href=""><span class="ml-ppos-white-icon ml-ppos-transaction"></span> <span translate="btn.ppos.orderTransaction"/></a>\n				</div>\n				<div class="ml-ppos-management-icon-container" data-ng-if="managementDataModel.isUserCanViewShipmentStatus">\n					<a href=""><span class="ml-ppos-white-icon ml-ppos-browse"></span> <span translate="btn.ppos.shipmentStatus"/></a>\n				</div>\n				<div class="ml-ppos-management-icon-container" data-ng-if="managementDataModel.isUserCanViewEmpActivity">\n					<a href=""><span class="ml-ppos-white-icon ml-ppos-activity"></span> <span translate="btn.ppos.employeeActivity"/></a>\n				</div>\n			</div>\n		</div>\n		<!-- Reports End -->\n	</div>\n</div>\n'),a.put("views/order/OrderDetail.html",'<div class="ml-ppos-order-detail-instore-pickup-wrapper">\n	<div class="ml-ppos-order-detail-instore-pickup-container">\n		<div class="ml-ppos-order-pickup-detail-container">\n			<div class="ml-ppos-order-pickup-order-number"><span><span translate="lbl.ppos.orderDetail.orderNumber"/>:</span> {{ orderDetailDataModel.code }}</div>\n			\n			<div class="ml-ppos-scroll-container">\n			<!-- Loop -->\n			<div class="panel-group ml-ppos-order-pickup-detail-row" id="accordion">\n				<div class="panel panel-default" data-ng-repeat="orderShipment in orderShipmentDataModel">\n					<div class="panel-heading">\n						<div class="panel-title">\n							<a data-toggle="collapse" data-parent="#accordion" data-target="#orderShipmentDetail_{{ orderShipment.id }}"> <span translate="lbl.ppos.shipmentCount" translate-values="{ shipmentCount: $index + 1, totalShipment: orderShipmentDataModel.length }"/><span class="ml-ppos-instore-pickup-customer-name">{{orderShipment.status}} </span> <i class="ml-ppos-mini-white-icon ml-ppos-arrow-down"></i></a>\n						</div> \n					</div>\n					<div id="orderShipmentDetail_{{ orderShipment.id }}" class="panel-collapse collapse">\n						<div class="panel-body">\n							<div class="ml-ppos-order-pickup-shipment-container">\n								<div class="ml-ppos-order-pickup-detail-info">\n									<div class="ml-ppos-order-pickup-subhead"><span translate="lbl.ppos.orderDetail.shipmentContains"/></div>\n								</div>\n								<div class="ml-ppos-order-pickup-detail-subtotal">\n									<div class="ml-ppos-order-pickup-subhead"><span translate="lbl.ppos.shipmentSubTotal" translate-values="{ shipmentCount: $index + 1 }"/></div>\n								</div>\n								<div class="ml-ppos-order-pickup-info">\n									<div class="ml-ppos-order-pickup-subhead"><span translate="lbl.ppos.orderDetail.shippingInformation"/></div>\n								</div>\n							</div>\n							<div data-ng-repeat="item in orderShipment.items" class="ml-ppos-order-pickup-shipment-container">\n								<div class="ml-ppos-order-pickup-detail-info">\n									<div class="ml-ppos-order-pickup-image">\n										<img src="{{ item.product.image.thumb }}" width="80" height="80" />\n									</div>\n									<div class="ml-ppos-order-pickup-detail">\n										<div>{{ item.product.name }}</div>\n										<div><span translate="lbl.ppos.style"/> {{ item.skuCode }}</div>\n										<div data-ng-repeat="option in item.options">\n											<div data-ng-if="option.optionType">{{ option.optionType }}: {{ option.name }}</div>\n										</div>\n										<div><span translate="msg.ppos.qty"/> {{ item.qty }}</div>\n										<div><span translate="lbl.ppos.orderDetail.priceEach"/> {{ item.regularPrice }}</div>\n										<div data-ng-repeat="itemDiscount in item.discounts">\n											<div><span translate="lbl.ppos.orderDetail.discount"/> {{ itemDiscount.amount }}</div>\n											<div><span translate="hdr.ppos.price"/> {{ item.sellPrice }}</div>\n											<div>{{ itemDiscount.message }}</div>\n										</div>\n									</div>\n								</div>\n\n								<div class="ml-ppos-order-pickup-detail-subtotal">\n									<div data-ng-if="$index === 0">\n										<div>\n											<div class="ml-ppos-order-subtotal-content"><span translate="lbl.ppos.merchandiseSubtotalAmount"/></div>\n											<div class="ml-ppos-order-subtotal-value">{{ orderShipment.merchandiseTotal }}</div>\n										</div>\n										\n										<div data-ng-repeat="shipmentDiscount in orderShipment.discounts">\n											<div class="ml-ppos-order-subtotal-content"><span translate="lbl.ppos.shippingAmount"/></div>\n											<div class="ml-ppos-order-subtotal-value">{{ orderShipment.discountedShippingTotal }} {{ shipmentDiscount.message }}</div>\n										</div>\n										<div data-ng-if="orderShipment.discounts.length === 0">\n											<div class="ml-ppos-order-subtotal-content"><span translate="lbl.ppos.shippingAmount"/></div>\n											<div class="ml-ppos-order-subtotal-value">{{ orderShipment.discountedShippingTotal }}</div>\n										</div>\n										<div>\n											<div class="ml-ppos-order-subtotal-content"><span translate="lbl.ppos.taxAmount"/></div>\n											<div class="ml-ppos-order-subtotal-value">{{ orderShipment.taxTotal }}</div>\n										</div>\n										<div>\n											<div class="ml-ppos-order-subtotal-content ml-ppos-order-subtotal-content-border"><span translate="lbl.ppos.totalAmount"/></div>\n											<div class="ml-ppos-order-subtotal-value ml-ppos-order-subtotal-content-border">{{ orderShipment.total }}</div>\n										</div>\n									</div>\n								</div>\n								\n								<div class="ml-ppos-order-pickup-info">\n									<div data-ng-if="$index === 0">\n										<div class="ml-ppos-order-pickup-customer">{{ orderShipment.shipmentInfo.person.firstName }} {{ orderShipment.shipmentInfo.person.middleName }} {{ orderShipment.shipmentInfo.person.lastName }}</div>\n										<div>{{ orderShipment.shipmentInfo.address.street1 }} {{ orderShipment.shipmentInfo.address.street2 }} {{ orderShipment.shipmentInfo.address.street3 }}</div>\n										<div>{{ orderShipment.shipmentInfo.address.city }}, {{ orderShipment.shipmentInfo.address.state }} {{ orderShipment.shipmentInfo.address.postalCode }}</div>\n										<div>{{ orderShipment.shipmentInfo.address.country }}</div>\n										<div>{{ orderShipment.shipmentInfo.phone }}</div>\n										<br/>\n										<div>{{ orderShipment.shippingMethod.name }} - {{ orderShipment.shippingMethod.description }}</div>\n									</div>\n								</div>\n\n							</div>\n						</div>\n					</div>\n				</div>	\n			<!-- Loop End -->\n			<!-- Loop -->\n				<div class="panel panel-default" data-ng-repeat="orderPickup in orderPickupDataModel" id="PickupOptions">\n					<div class="panel-heading">\n						<div class="panel-title">\n							<a data-toggle="collapse" data-parent="#accordion" data-target="#orderPickupDetail_{{ orderPickup.id }}"><span translate="lbl.ppos.pickupCount" translate-values="{ pickupCount: $index + 1, totalPickup: orderPickupDataModel.length }"/><span>- {{orderPickup.store.name}} ({{orderPickup.store.code}})</span> <span class="ml-ppos-instore-pickup-customer-name">{{orderPickup.status}}</span><i class="ml-ppos-mini-white-icon ml-ppos-arrow-down"></i></a>\n						</div> \n					</div>\n					<div id="orderPickupDetail_{{ orderPickup.id }}" class="panel-collapse collapse">\n						<div class="panel-body">\n							<div class="ml-ppos-order-pickup-shipment-container">\n								<div class="ml-ppos-order-pickup-detail-info">\n									<div class="ml-ppos-order-pickup-subhead"><span translate="lbl.ppos.orderDetail.pickupItems"/></div>\n								</div>\n								<div class="ml-ppos-order-pickup-detail-subtotal">\n									<div class="ml-ppos-order-pickup-subhead"><span translate="lbl.ppos.pickupSubTotal" translate-values="{ pickupCount: $index + 1 }"/></div>\n								</div>\n								<div class="ml-ppos-order-pickup-info">\n									<div data-ng-if="orderPickup.items[0].storeID != thisStore.id">\n										<div class="ml-ppos-order-pickup-subhead"><span translate="lbl.ppos.orderDetail.pickupInfo"/></div>\n									</div>\n								</div>\n							</div>\n							<div data-ng-repeat="item in orderPickup.items" class="ml-ppos-order-pickup-shipment-container">\n								<div class="ml-ppos-order-pickup-detail-info">\n									<div>\n										<div class="ml-ppos-order-pickup-image">\n											<img src="{{ item.product.image.thumb }}" width="80" height="80" />\n										</div>\n										<div class="ml-ppos-order-pickup-detail">\n											<div>{{ item.product.name }}</div>\n											<div><span translate="lbl.ppos.style"/> {{ item.skuCode }}</div>\n											<div data-ng-repeat="option in item.options">\n												<div data-ng-if="option.optionType">{{ option.optionType }}: {{ option.name }}</div>\n											</div>\n											<div><span translate="msg.ppos.qty"/> {{ item.qty }}</div>\n											<div><span translate="lbl.ppos.orderDetail.priceEach"/> {{ item.regularPrice }}</div>\n											<div data-ng-repeat="itemDiscount in item.discounts">\n												<div><span translate="lbl.ppos.orderDetail.discount"/> {{ itemDiscount.amount }}</div>\n												<div><span translate="hdr.ppos.price"/> {{ item.sellPrice }}</div>\n												<div>{{ itemDiscount.message }}</div>\n											</div>\n										</div>\n									</div>\n								</div>\n								\n								<div class="ml-ppos-order-pickup-detail-subtotal">\n									<div data-ng-if="$index === 0">\n										<div>\n											<div class="ml-ppos-order-subtotal-content"><span translate="lbl.ppos.merchandiseSubtotalAmount"/></div>\n											<div class="ml-ppos-order-subtotal-value">{{ orderPickup.merchandiseTotal }}</div>\n										</div>\n										<div>\n											<div class="ml-ppos-order-subtotal-content"><span translate="lbl.ppos.taxAmount"/></div>\n											<div class="ml-ppos-order-subtotal-value">{{ orderPickup.taxTotal }}</div>\n										</div>\n										<div>\n											<div class="ml-ppos-order-subtotal-content ml-ppos-order-subtotal-content-border"><span translate="lbl.ppos.totalAmount"/></div>\n											<div class="ml-ppos-order-subtotal-value ml-ppos-order-subtotal-content-border">{{ orderPickup.total }}</div>\n										</div>\n									</div>\n								</div>\n								\n								<div class="ml-ppos-order-pickup-info">\n									<div data-ng-if="item.storeID != thisStore.id">\n										<div data-ng-if="$index === 0">\n											<div class="ml-ppos-order-pickup-customer">{{ orderPickup.shipmentInfo.person.firstName }} {{ orderPickup.shipmentInfo.person.middleName }} {{ orderPickup.shipmentInfo.person.lastName }}</div>\n											<div>{{ orderPickup.shipmentInfo.phone }}</div>\n										</div>\n									</div>\n								</div>\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n			<!-- Loop End -->\n			</div>\n		</div>\n\n		<div class="ml-ppos-order-pickup-nav-container">\n			<div class="ml-ppos-order-pickup-header-customer">{{ orderDetailDataModel.customer.primaryContact.person.firstName }} {{ orderDetailDataModel.customer.primaryContact.person.lastName }}</div>\n				<div class="ml-ppos-order-pickup-summary-row">\n					<div class="ml-ppos-order-pickup-sub-head"><span translate="lbl.ppos.summaryOfCharges"/></div>\n					<div class="ml-ppos-scroll-container">\n						<div class="ml-ppos-order-pickup-summary-content">\n							<div class="ml-ppos-order-pickup-summary-label" translate="lbl.ppos.merchandiseSubtotalAmount"></div>\n							<div class="ml-ppos-order-pickup-summary-value">{{ orderDetailDataModel.merchTotal }}</div>\n						</div>\n						<div class="ml-ppos-order-pickup-summary-content">\n							<div class="ml-ppos-order-pickup-summary-label" translate="lbl.ppos.taxAmount"></div>\n							<div class="ml-ppos-order-pickup-summary-value">{{ orderDetailDataModel.taxTotal }}</div>\n						</div>\n						<div class="ml-ppos-order-pickup-summary-content">\n							<div class="ml-ppos-order-pickup-summary-label" translate="lbl.ppos.shippingAmount"></div>\n							<div class="ml-ppos-order-pickup-summary-value">{{ orderDetailDataModel.shippingTotal }}</div>\n						</div>\n						<div data-ng-repeat="orderDiscount in orderDetailDataModel.discounts" class="ml-ppos-order-pickup-summary-content">\n							<div class="ml-ppos-order-pickup-summary-label">{{ orderDiscount.message }}</div>\n							<div class="ml-ppos-order-pickup-summary-value">-{{ orderDiscount.amount }}</div>\n						</div>\n						<div class="ml-ppos-order-pickup-summary-total-content">\n							<div class="ml-ppos-order-pickup-summary-label" translate="lbl.ppos.totalAmount"></div>\n							<div class="ml-ppos-order-pickup-summary-value">{{ orderDetailDataModel.total }}</div>\n						</div>\n					</div>\n				</div>\n				\n				<div class="ml-ppos-order-pickup-summary-row">\n					<div class="ml-ppos-order-pickup-sub-head"><span translate="lbl.ppos.orderDetail.paymentMethods"/></div>\n					<div data-ng-repeat="orderPayment in orderDetailDataModel.payments">\n						<div class="ml-ppos-order-pickup-summary-content" data-ng-if="orderPayment.paymentType === \'CARD PRESENT\' || orderPayment.paymentType === \'CREDIT CARD\'">\n							<div class="ml-ppos-order-pickup-summary-label">{{ orderPayment.cardType }} {{ orderPayment.maskedNumber }}</div>\n							<div class="ml-ppos-order-pickup-summary-value">{{ orderPayment.amount }}</div>\n						</div>\n						<div class="ml-ppos-order-pickup-summary-content" data-ng-if="orderPayment.paymentType === \'GIFT CERTIFICATE\'">\n							<div class="ml-ppos-order-pickup-summary-label">{{ orderPayment.paymentType }} <span translate="lbl.ppos.forLabel"></span></div>\n							<div class="ml-ppos-order-pickup-summary-value">{{ orderPayment.amount }}</div>\n						</div>\n						<div class="ml-ppos-order-pickup-summary-content" data-ng-if="orderPayment.paymentType === \'CASH\'">\n							<div class="ml-ppos-order-pickup-summary-label">{{ orderPayment.paymentType }}</div>\n							<div class="ml-ppos-order-pickup-summary-value">{{ orderPayment.amount }}</div>\n						</div>\n<<<<<<< .working\n                        <div class="ml-ppos-order-pickup-summary-content" data-ng-if="orderPayment.paymentType === \'PAYPAL\'">\n                            <div class="ml-ppos-order-pickup-summary-label">{{ orderPayment.paymentType }}</div>\n                            <div class="ml-ppos-order-pickup-summary-value">{{ orderPayment.amount }}</div>\n                        </div>\n                        <div class="ml-ppos-order-pickup-summary-content" data-ng-if="orderPayment.paymentType === \'AMAZON\'">\n                            <div class="ml-ppos-order-pickup-summary-label">{{ orderPayment.paymentType }}</div>\n                            <div class="ml-ppos-order-pickup-summary-value">{{ orderPayment.amount }}</div>\n                        </div>\n=======\n                        <div class="ml-ppos-order-pickup-summary-content" data-ng-if="orderPayment.paymentType === \'PAYPAL\'">\n                            <div class="ml-ppos-order-pickup-summary-label">{{ orderPayment.paymentType }} <span translate="lbl.ppos.forLabel"></span></div>\n                            <div class="ml-ppos-order-pickup-summary-value">{{ orderPayment.amount }}</div>\n                        </div>\n                        <div class="ml-ppos-order-pickup-summary-content" data-ng-if="orderPayment.paymentType === \'AMAZON\'">\n                            <div class="ml-ppos-order-pickup-summary-label">{{ orderPayment.paymentType }} <span translate="lbl.ppos.forLabel"></span></div>\n                            <div class="ml-ppos-order-pickup-summary-value">{{ orderPayment.amount }}</div>\n                        </div>\n>>>>>>> .merge-right.r166239\n					</div>\n					<div data-ng-if="orderDetailDataModel.sourceCodeInfoList" data-ng-repeat="sourceCodeInfo in orderDetailDataModel.sourceCodeInfoList"  class="ml-ppos-order-pickup-summary-content">\n						<div class="ml-ppos-order-pickup-summary-label"><span translate="msg.ppos.appliedCouponCodeWithAmount" translate-values="{ couponCode : sourceCodeInfo.code}"></span></div>\n						<div class="ml-ppos-order-pickup-summary-value" data-ng-if="!sourceCodeInfo.discountAmountZero">{{ sourceCodeInfo.discountAmount }}</div>\n					</div>\n				</div>\n\n				<div class="ml-ppos-order-detail-instore-pickup-button-container">\n					<in-store-pickup-customer-verification-modal data-order-detail-data-model="orderDetailDataModel"></in-store-pickup-customer-verification-modal>\n				</div>\n			</div>\n	</div>\n</div>\n'),
a.put("views/product/ProductDetail.html",'<div class="ml-product-detail-wrapper">\n    <div class="ml-product-detail-container">\n        <!-- Main Content -->\n        <div class="ml-product-detail-main-content">\n            <!-- Image -->\n            <div class="ml-product-detail-image-wrapper">\n                <div class="ml-product-detail-image"><img src="{{model.product.image.detail}}"></div>\n                <!-- Suggested Items -->\n                <div class="ml-product-detail-suggestions" data-ng-if="model.crossSells.length">\n					<div translate="msg.ppos.suggestedProducts"></div>\n                    <div class="ml-ppos-grid-view-items">\n                        <div data-ng-repeat="crossSellItem in model.crossSells track by $index" class="ml-ppos-grid-view-item">\n                            <div data-ng-if="$index < 6">\n                                <a data-ng-href="#/productDetail?productId={{ crossSellItem.id }}&fromProductSearch=false">\n                                    <div class="ml-ppos-item-image"><img ng-src="{{crossSellItem.image.thumb}}" width="80" height="80"/></div>\n                                    <div class="ml-ppos-item-info">\n                                        <div class="ml-ppos-item-product-name" data-ng-if="model.showName">{{ crossSellItem.name }}</div>\n                                        <div class="ml-ppos-item-price">\n                                            <div>{{ crossSellItem.prices.displayPrice.price }}</div>\n                                        </div>\n                                    </div>\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n				<!-- Suggested Items End -->\n            </div>\n\n            <!-- Details -->\n            <div class="ml-product-detail-data-wrapper">\n                <div class="ml-product-detail-backto-search" data-ng-if="model.fromProductSearch === \'true\'">\n    				<a data-ng-click="backToProductSearchResult()"><i class="ml-ppos-mini-white-icon ml-ppos-arrow-left"></i> <span translate>btn.ppos.backToSearchResult</span></a>\n				</div>\n				\n					<!-- Name, Description, Code, etc... -->\n					<div class="ml-product-detail-data-section">\n						<div class="ml-ppos-item-product-name" data-ng-if="model.showName">{{model.product.name}}</div>\n						<div class="ml-ppos-item-short-desc" data-ng-if="model.showShortDescription">{{model.product.description.shortDescription}}</div>\n						<div class="ml-ppos-item-long-desc" data-ng-if="model.showLongDescription">{{model.product.description.longDescription}}</div>\n						<div class="ml-ppos-item-product-code"><span translate="lbl.ppos.style"></span> {{model.product.code}}</div>\n						<div class="ml-product-detail-price-product">\n							<div class="ml-item-price-was">{{model.product.prices.displayPrice.priceWas}}</div>\n							<div>{{model.product.prices.displayPrice.price}}</div>\n						</div>\n					</div>\n\n					<div class="ml-product-detail-data-section">\n						<!-- Options -->\n						<div class="ml-product-detail-options-wrapper"\n							 data-ml-product-options\n							 data-options="model.product.optionsWithAssociatedSkuIDs"></div>\n						<!-- Qty -->\n						<div class="ml-ppos-quantity-spinner-wrapper">\n							<label class="ml-ppos-quantity-spinner-label"><div translate="msg.ppos.qty"></div></label>\n							<div>\n								<ml-numeric-spinner data-mapped-value="model.addToBasketItem.qty"\n													data-max-length="2"></ml-numeric-spinner>\n							</div>\n						</div>\n						<div class="ml-product-detail-price-wrapper">\n							<div class="ml-product-detail-price-sku">{{model.priceSkuMsg}}</div>\n						</div>\n						<div class="ml-product-detail-stock-wrapper">\n							<div data-ng-if="model.stockAvailable === true">\n								<span class="ml-product-detail-stock-label" translate="msg.ppos.inStock"></span>\n								<span class="ml-product-detail-stock-qty">{{model.stockQty}}</span>\n								<span class="ml-product-detail-stock-available" translate="msg.ppos.available"></span>\n							</div>\n							<div data-ng-if="model.stockUnavailable === true">\n								<span class="ml-product-detail-stock-unavailable" translate="msg.ppos.unavailable"></span>\n							</div>\n\n							<div class="ml-product-detail-button-wrapper" data-ng-if="model.initialized">\n								<div data-ng-if="!getSelectedSku()" class="ml-ppos-error-container">\n									<div class="ml-icon-error"></div>\n									<div class="ml-ppos-error-message" translate>msg.ppos.selectValidOption</div>\n								</div>\n							</div>\n						</div>\n					</div>\n\n					<div class="ml-product-detail-button-wrapper" data-ng-if="model.initialized">\n						<!-- Nearby Store Button -->\n						<div class="ml-product-detail-store-button" data-ng-class="{\'disabled\' : model.disableStoresButton}"><input type="button" name="nearByStoresButton" id="nearByStoresButton" value="{{\'btn.ppos.stores\' | translate}}" data-ng-click="showNearByStoresModal(model.product.id, getSelectedSku(), model.addToBasketItem.qty)" class="ml-ppos-secondary-button"> <near-by-stores-modal></near-by-stores-modal></div>\n						<!-- Add to Cart Button -->\n						<div class="ml-product-detail-cart-button" data-ng-class="{\'disabled\' : model.disableAddToCartButton}"><input type="button" name="addToCartButton" id="addToCartButton" class="ml-ppos-primary-button" value="{{\'btn.ppos.addToBasket\' | translate}}" ng-click="addItemToBasket()"></div>\n					</div>\n				\n            </div>\n        </div>\n    </div>\n</div>'),a.put("views/product/ProductDetailModal.html",'<div class="ml-ppos-modal-container ml-ppos-product-search-wrapper">\n	<div class="modal" id="productDetailModal" tabindex="-1" role="dialog" aria-hidden="true">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-ng-click="closeProductDetailModal()" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\n					<h4 class="modal-title">{{ model.product.name }}</h4>\n				</div>\n                <form novalidate data-ng-submit="closeProductDetailModal(); addItemToBasketAndReloadBasket();">\n					<div class="modal-body">\n						<div class="ml-ppos-product-search-label-content">\n							<div class="ml-ppos-product-search-row">\n								<div class="ml-ppos-product-search-thumb"><img data-ng-src="{{model.addToBasketItem.thumb}}" width="150" height="150" /></div>\n								<div class="ml-ppos-product-search-info">\n\n                                    <!-- Short Description -->\n									<div class="ml-ppos-product-search-short-desc" data-ng-if="model.showShortDescription">{{ model.product.description.shortDescription }}</div>\n									\n									<!-- Long Description -->\n									<div data-ng-if="model.showLongDescription">{{ model.product.description.longDescription }}</div>\n									\n									<!-- Code -->\n									<div class="ml-ppos-product-search-code"><span translate="lbl.ppos.style"></span> {{ model.product.code }}</div>\n\n									<!-- Product Level Price -->\n									<div class="ml-product-detail-price-product">\n										<div class="ml-item-price-was">{{model.product.prices.displayPrice.priceWas}}</div>\n										<div>{{model.product.prices.displayPrice.price}}</div>\n									</div>\n\n									<!-- Options -->\n									<div class="ml-product-detail-options-wrapper"\n										data-ml-product-options\n										data-options="model.product.optionsWithAssociatedSkuIDs"></div>\n                    \n									<!-- Qty -->\n									<div>\n										<label class="ml-ppos-quantity-spinner-label"><div translate="msg.ppos.qty"></div></label>\n										<div class="ml-ppos-quantity-spinner-wrapper">\n											<ml-numeric-spinner data-mapped-value="model.addToBasketItem.qty" data-max-length="2"></ml-numeric-spinner>\n										</div>\n									</div>\n\n									<!-- Sku Level Price -->\n									<div class="ml-product-detail-price-wrapper">\n										<div class="ml-product-detail-price-sku">{{model.priceSkuMsg}}</div>\n									</div>\n\n									<!-- Stock Availability -->\n									<div class="ml-product-detail-stock-wrapper">\n										<div data-ng-if="model.stockAvailable === true">\n											<span class="ml-product-detail-stock-label" translate="msg.ppos.inStock"></span>\n											<span class="ml-product-detail-stock-qty">{{model.stockQty}}</span>\n											<span class="ml-product-detail-stock-available" translate="msg.ppos.available"></span>\n										</div>\n										<div data-ng-if="model.stockUnavailable === true">\n											<span class="ml-product-detail-stock-unavailable" translate="msg.ppos.unavailable"></span>\n										</div>\n\n										<div data-ng-if="model.initialized">\n											<div data-ng-if="!getSelectedSku()" class="ml-ppos-error-container">\n												<div class="ml-icon-error"></div>\n												<div class="ml-ppos-error-message" translate>msg.ppos.selectValidOption</div>\n											</div>\n										</div>\n									</div>\n\n								</div>\n							</div>\n						</div>\n					</div>\n					\n					<div class="modal-footer ml-ppos-button-set ml-ppos-button-product-search">\n						<div data-ng-if="model.initialized">\n							<!-- Add to Cart Button -->\n							<div data-ng-class="{\'disabled\' : model.disableAddToCartButton}">\n								<span class="ml-ppos-btn-inner">\n									<span class="ml-ppos-btn-text" translate="btn.ppos.addToBasket"></span>\n									<span class="ml-ppos-btn ml-ppos-mini-grey-icon ml-ppos-plus"></span>\n								</span>\n								<button type="submit" name="addToCartButton" id="addToCartButton" class="ml-ppos-btn-hidden" translate="btn.ppos.addToBasket"></button>\n							</div>\n\n							<!-- Nearby Store Button -->\n							<div class="ml-product-detail-store-button" data-ng-class="{\'disabled\' : model.disableStoresButton}"><input type="button" name="nearByStoresButton" id="nearByStoresButton" value="{{\'btn.ppos.stores\' | translate}}" data-ng-click="showNearByStoresModal(model.product.id, getSelectedSku(), model.addToBasketItem.qty)" class="ml-ppos-secondary-button"></div>\n						</div>\n\n						<div>\n							<button type="button" class="ml-ppos-secondary-button" data-ng-click="cancelProductDetailModal()" data-dismiss="modal" translate="btn.ppos.cancel"></button>\n						</div>\n					</div>\n				</form>\n			</div>\n		</div>\n	</div>\n</div>\n'),a.put("views/product/ProductOptions.html",'<div class="ml-product-option-container">\n    <div class="ml-product-option-type-wrapper" ng-repeat="type in options track by $index">\n        <div class="ml-product-option-type">{{type.optionType}}</div>\n        <div class="ml-product-option-wrapper">\n            <div class="ml-product-option"\n                 ng-class="{\'selected\': type.selectedOption == option,\'disabled\': !isOptionSelectable(type, option)}"\n                 ng-repeat="option in type.options track by $index">\n                <div class="ml-product-option-text" ng-click="selectOption(type, option)" ng-hide="option.image">\n                    {{option.name}}\n                </div>\n                <div class="ml-product-option-image" ng-click="selectOption(type, option)" ng-show="option.image"><img\n                        ng-src="{{option.image}}"/></div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("views/provisioning/Provisioning.html",'<div class="ml-ppos-login-wrapper ml-ppos-login-main-column">\n	<div class="ml-ppos-login-main-container">	\n		<div class="ml-ppos-error-container" data-ng-show="showProvisioningFailureMessage">\n			<div class="ml-icon-error"></div>\n			<div class="ml-ppos-error-message">\n				<div>{{ provisioningFailureMessage | translate }}</div>\n			</div>\n		</div>\n\n		<div class="ml-ppos-login-head" translate="msg.ppos.provisioning.header"></div>\n\n		<div class="ml-ppos-login-container">\n			<form novalidate data-ng-submit="provisionApplication(provisioningDetails)">\n				<div class="ml-ppos-login-label" translate="lbl.ppos.provisioning.serverUrl"></div>\n\n				<div class="ml-ppos-login-label-content">\n					<input type="text" name="urlBase" id="urlBase" class="form-control" data-ng-model="provisioningDetails.urlBase" placeholder="{{ \'msg.ppos.provisioning.enterServerUrl\' | translate }}" autocorrect="off" autocapitalize="off" />\n				</div>\n\n				<div class="ml-ppos-login-label" translate="lbl.ppos.provisioning.storeCode"></div>\n\n				<div class="ml-ppos-login-label-content">\n					<input type="text" name="storeCode" id="storeCode" class="form-control" data-ng-model="provisioningDetails.storeCode" placeholder="{{ \'msg.ppos.provisioning.enterStoreCode\' | translate }}" autocorrect="off" autocapitalize="off" />\n				</div>\n\n				<div class="ml-ppos-login-button-container">\n					<button type="submit" name="provisioningSubmitButton" id="provisioningSubmitButton" class="ml-ppos-login-button" translate>btn.ppos.provisioning.submit</button>\n				</div>\n			</form>\n		</div>\n	</div>\n</div>\n'),a.put("views/search/CustomerSearchModal.html",'<div class="ml-ppos-modal-container ml-ppos-customer-search-wrapper">\n	<div class="modal" id="customerSearchModal" tabindex="-1" role="dialog" aria-hidden="true">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-ng-click="close()" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\n					<h4 class="modal-title" translate>hdr.ppos.newOrder</h4>\n				</div>\n	  \n				<div data-ng-show="customerSearchDataModel.customerSearchResult == null">\n					<form name="customerSearchForm" novalidate data-ng-submit="searchCustomer()">\n						<div class="modal-body">\n							<div data-ng-show="showPhoneNumberRequiredMessage" class="ml-ppos-error-container">\n								<div class="ml-icon-error"></div>\n								<div class="ml-ppos-error-message">\n									<div translate>msg.ppos.phoneNumberRequired</div>\n								</div>\n							</div>\n							<div data-ng-show="showInValidPhoneNumberMessage" class="ml-ppos-error-container">\n								<div class="ml-icon-error"></div>\n								<div class="ml-ppos-error-message">\n									<div translate>msg.ppos.invalidPhoneNumberEntered</div>\n								</div>\n							</div>\n							<div class="ml-ppos-customer-search-head" translate>lbl.ppos.customerPhoneNumber</div>\n							<div class="ml-ppos-customer-search-label-content">\n								<input type="tel" name="customerPhoneNumber" id="customerPhoneNumber" class="form-control" placeholder="{{ \'msg.ppos.phoneNumberSearchPlaceholder\' | translate }}" data-ng-model="customerSearchDataModel.customerPhoneNumber" show-focus="customerSearchDataModel.customerSearchResult == null"/>\n							</div>\n						</div>\n						<div class="modal-footer ml-ppos-button-customer-search">\n							<div><button type="submit" name="customerSearchButton" id="customerSearchButton" class="ml-ppos-primary-button" translate>btn.ppos.searchCustomerButon</button></div>\n							<div><button type="button" class="ml-ppos-secondary-button" data-ng-click="cancel()" data-dismiss="modal" translate="btn.ppos.cancel"></button></div>\n							<div class="ml-ppos-button-customer-skip-button"><a href="javascript:;" data-ng-click="skipCustomerSearchAndStartNewOrder(null)" class="ml-ppos-secondary-button-understated" translate>btn.ppos.skip</a></div>\n						</div>\n					</form>\n				</div>\n\n				<div data-ng-show="customerSearchDataModel.customerSearchResult != null">\n					<div class="modal-body">\n						<div class="ml-ppos-customer-search-result-message" translate="msg.ppos.customerSearchResult" translate-values="{ customerCount : customerSearchDataModel.customerSearchResult.data.length, customerPhoneNumber : customerSearchDataModel.customerPhoneNumber }"></div>\n						<div data-ng-repeat="customer in customerSearchDataModel.customerSearchResult.data" class="ml-ppos-customer-search-result-row">\n							<a href="" data-ng-click="startNewOrder(customer.id)">{{ customer.primaryContact.person.firstName }} {{ customer.primaryContact.person.lastName }} <span class="ml-ppos-customer-search-zip-code">{{ customer.primaryContact.address.postalCode }}</span> <span class="ml-ppos-mini-white-icon ml-ppos-arrow-right"></span></a>\n						</div>\n					</div>\n					<div class="modal-footer ml-ppos-button-customer-search-result">\n						<div><button type="button" class="ml-ppos-secondary-button-understated" data-ng-click="skipCustomerSearchAndStartNewOrder(null)" translate>btn.ppos.skip</button></div>\n						<div class="ml-ppos-button-customer-search-place-order">\n							<span class="ml-ppos-btn-inner">\n								<span class="ml-ppos-btn-text" translate>btn.ppos.searchAgain</span>\n								<span class="ml-ppos-btn ml-ppos-mini-white-icon ml-ppos-arrow-left"></span>\n							</span>\n							<button type="button" class="ml-ppos-btn-hidden" data-ng-click="searchAgain()" translate>btn.ppos.searchAgai</button>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n'),a.put("views/search/OrderSearchModal.html",'<div class="ml-ppos-modal-container ml-ppos-product-search-wrapper">\n	<div class="modal" id="orderSearchModal" tabindex="-1" role="dialog" aria-hidden="true">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close"  data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\n					<h4 class="modal-title" translate="hdr.ppos.searchOrder"></h4>\n				</div>\n	  \n				<form novalidate data-ng-submit="searchOrderByCode()">\n					<div class="modal-body">\n						<div data-ng-show="orderSearchDataModel.showOrderSearchError" class="ml-ppos-error-container">\n							<div class="ml-icon-error"></div>\n							<div class="ml-ppos-error-message">\n								{{ orderSearchDataModel.orderSearchErrorMessage }}\n							</div>\n						</div>\n\n						<div class="ml-ppos-product-search-head" translate="lbl.ppos.enterOrderNumber"></div>\n\n						<div class="ml-ppos-product-search-label-content">\n							<input type="text" name="orderCode" id="orderCode" class="form-control" data-ng-model="orderSearchDataModel.orderCode" />\n						</div>\n					</div>\n					\n					<div class="modal-footer ml-ppos-button-product-search">\n						<div><button type="submit" name="orderSearchButton" id="orderSearchButton" class="ml-ppos-primary-button" translate="btn.ppos.searchOrder"></button></div>\n						<div><button type="button" class="ml-ppos-secondary-button" data-dismiss="modal" translate="btn.ppos.cancel"></button></div>\n					</div>\n				</form>\n			</div>\n		</div>\n	</div>\n</div>\n'),a.put("views/search/ProductSearchModal.html",'<div class="ml-ppos-modal-container ml-ppos-product-search-wrapper">\n	<div class="modal" id="productSearchModal" tabindex="-1" role="dialog" aria-hidden="true">\n		<div class="modal-dialog">\n			<div class="modal-content">\n				<div class="modal-header">\n					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><span class="ml-ppos-mini-white-icon ml-ppos-close"></span></span></button>\n					<h4 class="modal-title" translate="hdr.ppos.addManually"></h4>\n				</div>\n	  \n				<form novalidate data-ng-submit="searchProduct()">\n					<div class="modal-body">\n						<div data-ng-show="productSearchDataModel.showProductSearchError" class="ml-ppos-error-container">\n							<div class="ml-icon-error"></div>\n							<div class="ml-ppos-error-message">\n								{{ productSearchDataModel.productSearchErrorMessage }}\n							</div>\n						</div>\n\n						<div class="ml-ppos-product-search-head" translate="lbl.ppos.enterProductNameOrSkuNumber"></div>\n						<div class="ml-ppos-product-search-label-content">\n							<input type="text" name="productSearchKeyword" id="productSearchKeyword" class="form-control" placeholder="{{ \'msg.ppos.keywordOrItem\' | translate }}" data-ng-model="productSearchDataModel.productSearchKeyword" />\n						</div>\n					</div>\n					\n					<div class="modal-footer ml-ppos-button-product-search">\n						<div><button type="submit" name="productSearchButton" id="productSearchButton" class="ml-ppos-primary-button" translate="btn.ppos.searchProduct"></button></div>\n						<div><button type="button" class="ml-ppos-secondary-button" data-dismiss="modal" translate="btn.ppos.cancel"></button></div>\n					</div>\n				</form>\n			</div>\n		</div>\n	</div>\n</div>\n'),a.put("views/search/ProductSearchResult.html",'<div data-ng-controller="productSearchResultController" class="ml-ppos-product-search-result-wrapper">\n	<div class="ml-ppos-search-container">\n		<div class="ml-ppos-facet-nav-container">\n		<div data-ng-if="productSearchResultDataModel.showSorting">\n			<div class="ml-ppos-facet-refine-head" translate="hdr.ppos.refineYourSearch"></div>\n				<div class="ml-ppos-facet-sortbg">\n					<div class="ml-ppos-default-header-wrapper">\n						<div class="ml-ppos-default-header-message" translate="lbl.ppos.sortBy"></div>\n						<div class="ml-ppos-default-header-icon"><a href="" data-toggle="collapse" data-target="#Sorting"><span class="ml-ppos-mini-white-icon ml-ppos-arrow-down"></span></a></div>\n					</div>\n					<div class="ml-ppos-facet-selected">\n						<span data-ng-repeat="sortOption in productSearchResultDataModel.sortOptions" data-ng-if="sortOption.sortOptionConfig === productSearchResultDataModel.currentSortOptionConfig" \n						translate="sel.ppos.{{ productSearchResultDataModel.currentSortOptionConfig }}">\n						</span>\n					</div>\n					<div id="Sorting" class="collapse">\n						<a data-toggle="collapse" data-target="#Sorting" href="" data-ng-repeat="sortOption in productSearchResultDataModel.sortOptions" data-ng-click="searchProduct(productSearchResultDataModel.productSearchKeyword, 0, 1, sortOption.sortOptionOrder, sortOption.sortOptionParam)" translate="sel.ppos.{{ sortOption.sortOptionConfig }}"></a>\n					</div>\n				</div>\n			</div>\n		</div>\n		\n		<div class="ml-ppos-search-detail-container">\n			<div class="ml-ppos-search-head-row">\n				<!-- Title and search field. -->\n				<div class="ml-ppos-search-title-wrapper">\n					<div class="ml-ppos-search-title" translate="lbl.ppos.searchTerm"></div>\n					<div class="ml-ppos-search-keyword">\n						<form novalidate data-ng-submit="searchProduct(productSearchKeyword, 0, 1)">\n							<input type="text" name="productSearchKeyword" id="productSearchKeyword" class="form-control" placeholder="{{ \'msg.ppos.keywordOrItem\' | translate }}" data-ng-model="productSearchKeyword" />\n						</form>\n					</div>\n				</div>\n\n				<!-- Pagination -->\n				<div class="ml-ppos-search-pagination" data-ng-show="productSearchResultDataModel.pagingModel.showPagination">\n					<ul class="ml-ppos-pagination">\n						<!-- Previous Page Group Link Disabled -->\n						<li data-ng-show="!productSearchResultDataModel.pagingModel.previousPageGroup.hasPreviousPageGroup" class="ml-ppos-paging-default ml-ppos-paging-disabled">\n							<span class="ml-ppos-paging-previous ml-icon-lib ml-icon-previous"></span>\n						</li>\n						<!-- Previous Page Group Link Clickable -->\n						<li data-ng-show="productSearchResultDataModel.pagingModel.previousPageGroup.hasPreviousPageGroup" class="ml-ppos-paging-default">\n							<a href="" data-ng-click="searchProduct(productSearchResultDataModel.productSearchKeyword, productSearchResultDataModel.pagingModel.previousPageGroup.previousPageGroupPageNumberOffSet, productSearchResultDataModel.pagingModel.previousPageGroup.previousPageGroupPageNumber, productSearchResultDataModel.currentSortOrder, productSearchResultDataModel.currentSortParam)" class="ml-ppos-paging-previous ml-icon-lib ml-icon-previous"> </a>\n						</li>\n\n						<!-- Pages for current Page Group -->\n						<li data-ng-repeat="page in productSearchResultDataModel.pagingModel.pages" class="ml-ppos-paging-default">\n							<!-- Current Page should not be clickable. -->\n							<a href="" data-ng-if="productSearchResultDataModel.pagingModel.currentPage == page.pageNumber" class="active">{{ page.pageNumber }}</a>\n							<!-- All other pages should be clickable. -->\n							<a href="" data-ng-if="productSearchResultDataModel.pagingModel.currentPage != page.pageNumber" data-ng-click="searchProduct(productSearchResultDataModel.productSearchKeyword, page.offSet, page.pageNumber, productSearchResultDataModel.currentSortOrder, productSearchResultDataModel.currentSortParam)">{{ page.pageNumber }}</a>\n						</li>\n\n						<!-- Next Page Group Link Disabled -->\n						<li data-ng-show="!productSearchResultDataModel.pagingModel.nextPageGroup.hasNextPageGroup" class="ml-ppos-paging-default ml-ppos-paging-disabled">\n							<span class="ml-ppos-paging-next ml-icon-lib ml-icon-next"></span>\n						</li>\n						<!-- Next Page Group Link Clickable -->\n						<li data-ng-show="productSearchResultDataModel.pagingModel.nextPageGroup.hasNextPageGroup" class="ml-ppos-paging-default">\n							<a href="" data-ng-click="searchProduct(productSearchResultDataModel.productSearchKeyword, productSearchResultDataModel.pagingModel.nextPageGroup.nextPageGroupPageNumberOffSet, productSearchResultDataModel.pagingModel.nextPageGroup.nextPageGroupPageNumber, productSearchResultDataModel.currentSortOrder, productSearchResultDataModel.currentSortParam)" class="ml-ppos-paging-next ml-icon-lib ml-icon-next"> </a>\n						</li>\n					</ul>\n				</div>\n			</div>\n\n			<div class="ml-ppos-scroll-container">\n			<!-- Error Messages. -->\n			<div>\n				<div data-ng-show="productSearchResultDataModel.showKeywordRequiredErrorMessage" class="ml-ppos-error-container">\n					<div class="ml-icon-error"></div>\n					<div class="ml-ppos-error-message">\n						<div translate="msg.ppos.shortSearchTerm" translate-values="{ minLength : 3 }"></div>\n					</div>\n				</div>\n\n				<div data-ng-show="productSearchResultDataModel.showProductNotFoundErrorMessage" class="ml-ppos-error-container">\n					<div class="ml-icon-error"></div>\n					<div class="ml-ppos-error-message">\n						<div translate="msg.ppos.searchNoResults" translate-values="{ searchTerm : productSearchResultDataModel.searchTerm }"></div>\n					</div>\n				</div>\n			</div>\n\n			<!-- Success Messages. -->\n			<div data-ng-if="!productSearchResultDataModel.showKeywordRequiredErrorMessage && !productSearchResultDataModel.showProductNotFoundErrorMessage">\n				<div data-ng-if="!productSearchResultDataModel.searchResult.alternateTermsQueryEncoded">\n					<div class="ml-ppos-search-result-message" translate="msg.ppos.searchResults" translate-values="{ productCount: productSearchResultDataModel.searchResult.searchResultSize, searchKeyword: productSearchResultDataModel.productSearchKeyword }">\n					</div>\n				</div>\n\n				<div data-ng-if="productSearchResultDataModel.searchResult.alternateTermsQueryEncoded">\n					<div class="ml-ppos-error-container">\n						<div class="ml-icon-error"></div>\n						<div class="ml-ppos-error-message">\n							<div translate="msg.ppos.noMatchesFound" translate-values="{ searchKeyword: productSearchResultDataModel.productSearchKeyword }">\n							</div>\n\n							<div data-ng-if="productSearchResultDataModel.searchResult.alternateTermsQueryEncoded.length == 1">\n								<span translate="msg.ppos.didYouMean"></span>\n								<span data-ng-repeat="alternateTerm in productSearchResultDataModel.searchResult.alternateTermsQueryEncoded">\n									<a href="" data-ng-click="searchProduct(alternateTerm, 0, 1)" translate="msg.ppos.alternateTerm" translate-values="{ alternateTerm: alternateTerm }"></a>?\n								</span>\n							</div>\n\n							<div data-ng-if="productSearchResultDataModel.searchResult.alternateTermsQueryEncoded.length > 1">\n								<span translate="msg.ppos.didYouMean"></span>\n								<span data-ng-repeat="alternateTerm in productSearchResultDataModel.searchResult.alternateTermsQuery">\n									<span data-ng-if="$first"><a href="" data-ng-click="searchProduct(alternateTerm, 0, 1)" translate="msg.ppos.alternateTerm" translate-values="{ alternateTerm: alternateTerm }"></a></span>\n									\n									<span data-ng-if="$middle">, <a href="" data-ng-click="searchProduct(alternateTerm, 0, 1)" translate="msg.ppos.alternateTerm" translate-values="{ alternateTerm: alternateTerm }"></a></span>\n									\n									<span data-ng-if="$last">or <a href="" data-ng-click="searchProduct(alternateTerm, 0, 1)" translate="msg.ppos.alternateTerm" translate-values="{ alternateTerm: alternateTerm }"></a>?</span>\n								</span>\n							</div>\n\n							<div translate="msg.ppos.alternateMatchCount" translate-values="{ productCount: productSearchResultDataModel.searchResult.searchResultSize }">\n							</div>\n						</div>\n					</div>\n				</div>\n			</div>\n\n			<!-- Product Thumbnails. -->\n			<div class="ml-ppos-grid-view-items">	\n				<div data-ng-repeat="product in productSearchResultDataModel.searchResult.productInfo" class="ml-ppos-grid-view-item">\n					<a data-ng-href="#/productDetail?productId={{ product.id }}&fromProductSearch=true">\n						<div class="ml-ppos-item-image"><img ng-src="{{ product.imageResolved }}" /></div>\n						<div class="ml-ppos-item-info">\n							<div class="ml-ppos-item-product-name" data-ng-if="productSearchConfigModel.showName">{{ product.name }}</div>\n							<div class="ml-ppos-item-short-desc" data-ng-if="productSearchConfigModel.showShortDescription">{{ product.description.shortDescription }}</div>\n							<div class="ml-ppos-item-product-code" data-ng-if="productSearchConfigModel.showCode">{{ product.code }}</div>\n							<div class="ml-ppos-item-price" data-ng-if="productSearchConfigModel.showPrices">\n								<div>{{ product.priceInfo.priceMsg }}</div>\n								<div class="ml-item-price-was">{{ product.priceInfo.priceWasMsg }}</div>\n								<div>{{ product.priceInfo.priceNowMsg }}</div>\n							</div>\n						</div>\n					</a>\n				</div>\n			</div>\n			</div>\n\n		</div>\n	</div>\n</div>\n'),a.put("views/settings/POSSettings.html",'<div class="ml-ppos-account-wrapper">\r\n	<div class="ml-ppos-management-container">\r\n		<!-- Management Title Start -->\r\n		<div class="ml-ppos-management-row">\r\n			<div class="ml-ppos-management-title">\r\n				<a href="" ng-click="goToManagementScreen()"><i class="ml-ppos-mini-white-icon ml-ppos-arrow-left"></i><span translate="lbl.ppos.management"/></a>\r\n			</div>\r\n		</div>\r\n		<!-- Management Title End -->\r\n		<!-- Settings Start -->\r\n		<form novalidate>\r\n			<!-- Error Block Start -->\r\n			<div class="ml-ppos-error-container" data-ng-show="posSettingsModel.showMessage">\r\n				<div class="ml-icon-error" id="divMsgIconContainer"></div>\r\n				<div class="ml-ppos-error-message">\r\n					<div>{{ posSettingsModel.message | translate }}</div>\r\n				</div>\r\n			</div>\r\n		<!-- Error Block End -->\r\n			<!-- PEBL-16140 : Commented for phase 1, uncomment in Phase 2 - STARTS -->\r\n			<!--\r\n			<div class="ml-ppos-settings-row">\r\n				<div><span translate="hdr.ppos.posScreenSettings"/></div>\r\n			</div>\r\n			\r\n			<div class="ml-ppos-settings-row ml-ppos-settings-row-indent">\r\n				<div class="ml-ppos-settings-label">\r\n					<div><span translate="hdr.ppos.autoLockScreen"/></div>\r\n					<div><span translate="hdr.ppos.autoLockScreenInactivity"/></div>\r\n				</div>\r\n							\r\n				<div class="ml-ppos-settings-value ml-ppos-toggle-container">\r\n					<div class="ml-ppos-toggle btn-group btn-toggle">\r\n						<label class="ml-ppos-toggle-button btn" ng-class="{active : timeout == posSettingsModel.userSetTimeout}" data-ng-repeat="timeout in posSettingsModel.timeoutArray">\r\n							<input type="radio" name="selectedTimeout" id="selectedTimeout" value="{{ timeout }}" data-ng-model="posSettingsModel.userSetTimeout" data-ng-change="saveChanges(posSettingsModel);"/> <span translate="lbl.ppos.timeoutMinutes" translate-values="{ timeout: timeout }"></span>\r\n						</label>\r\n					</div>\r\n				</div>\r\n			</div>\r\n			-->\r\n			<!-- PEBL-16140 : Commented for phase 1, uncomment in Phase 2 - ENDS -->\r\n			<!-- Stores -->\r\n			<div class="ml-ppos-settings-row">\r\n				<div class="ml-ppos-settings-store-location">\r\n					<div><span translate="lbl.ppos.storeLocation"/></div>\r\n					<div>{{ posSettingsModel.storeLocation | translate }}</div>\r\n				</div>\r\n			</div>\r\n			<!-- Stores -->\r\n			<div class="ml-ppos-settings-row ml-ppos-settings-row-indent">\r\n				<div class="ml-ppos-settings-label">\r\n					<div><span translate="lbl.ppos.nearbyStores"/></div>\r\n					<div><span translate="lbl.ppos.nearbyStoresDistance"/></div>\r\n				</div>\r\n				<div class="ml-ppos-settings-value ml-ppos-toggle-container">\r\n					<div class="ml-ppos-toggle btn-group btn-toggle">\r\n						<label class="ml-ppos-toggle-button btn" ng-class="{active : radius == posSettingsModel.userSetRadius}" data-ng-repeat="radius in posSettingsModel.radiusArray">\r\n							<input type="radio" name="selectedRadius" id="selectedRadius" value="{{ radius }}" data-ng-model="posSettingsModel.userSetRadius" data-ng-change="saveChanges(posSettingsModel);"/> <span translate="lbl.ppos.storeRadius" translate-values="{ storeRadius: radius }"></span>\r\n						</label>\r\n					</div>\r\n				</div>\r\n			</div>\r\n\r\n		</form>\r\n	</div>\r\n</div>\r\n');
}]);
//# sourceMappingURL=marketlive.min.js.map